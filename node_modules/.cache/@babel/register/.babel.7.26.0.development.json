{"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/tests/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/tests/dbClient.test.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$24\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$25\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-import-attributes\",\"visitor\":{},\"options\":{\"deprecatedAssertSyntax\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"109.0.0\",\"edge\":\"130.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"11.0.0\",\"node\":\"10.0.0\",\"opera\":\"114.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"26.0.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":true,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.promise.js\");\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\nvar _chai = require(\"chai\");\nvar _db = _interopRequireDefault(require(\"../utils/db.js\"));\nvar _mongodb = require(\"mongodb\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n// tests/dbClient.test.js\n\ndescribe('DBClient', () => {\n  before(async () => {\n    const collections = await _db.default.db.listCollections().toArray();\n    for (const collection of collections) {\n      await _db.default.db.collection(collection.name).deleteMany({});\n    }\n  });\n  after(async () => {\n    const collections = await _db.default.db.listCollections().toArray();\n    for (const collection of collections) {\n      await _db.default.db.collection(collection.name).deleteMany({});\n    }\n  });\n  it('should connect to MongoDB successfully', () => {\n    (0, _chai.expect)(_db.default.isAlive()).to.be.true;\n  });\n  it('should return correct number of users', async () => {\n    const usersCollection = _db.default.db.collection('users');\n    await usersCollection.insertMany([{\n      email: 'test1@test.com',\n      password: 'password1'\n    }, {\n      email: 'test2@test.com',\n      password: 'password2'\n    }]);\n    const nbUsers = await _db.default.nbUsers();\n    (0, _chai.expect)(nbUsers).to.equal(2);\n  });\n  it('should return correct number of files', async () => {\n    const filesCollection = _db.default.db.collection('files');\n    await filesCollection.insertMany([{\n      name: 'file1.txt',\n      type: 'file'\n    }, {\n      name: 'file2.txt',\n      type: 'file'\n    }, {\n      name: 'file3.txt',\n      type: 'file'\n    }]);\n    const nbFiles = await _db.default.nbFiles();\n    (0, _chai.expect)(nbFiles).to.equal(3);\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY2hhaSIsInJlcXVpcmUiLCJfZGIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX21vbmdvZGIiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJkZXNjcmliZSIsImJlZm9yZSIsImNvbGxlY3Rpb25zIiwiZGJDbGllbnQiLCJkYiIsImxpc3RDb2xsZWN0aW9ucyIsInRvQXJyYXkiLCJjb2xsZWN0aW9uIiwibmFtZSIsImRlbGV0ZU1hbnkiLCJhZnRlciIsIml0IiwiZXhwZWN0IiwiaXNBbGl2ZSIsInRvIiwiYmUiLCJ0cnVlIiwidXNlcnNDb2xsZWN0aW9uIiwiaW5zZXJ0TWFueSIsImVtYWlsIiwicGFzc3dvcmQiLCJuYlVzZXJzIiwiZXF1YWwiLCJmaWxlc0NvbGxlY3Rpb24iLCJ0eXBlIiwibmJGaWxlcyJdLCJzb3VyY2VSb290IjoiL2FseC1maWxlc19tYW5hZ2VyL3Rlc3RzLyIsInNvdXJjZXMiOlsiZGJDbGllbnQudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyB0ZXN0cy9kYkNsaWVudC50ZXN0LmpzXG5pbXBvcnQgeyBleHBlY3QgfSBmcm9tICdjaGFpJztcbmltcG9ydCBkYkNsaWVudCBmcm9tICcuLi91dGlscy9kYi5qcyc7XG5pbXBvcnQgeyBPYmplY3RJZCB9IGZyb20gJ21vbmdvZGInO1xuXG5kZXNjcmliZSgnREJDbGllbnQnLCAoKSA9PiB7XG4gICAgYmVmb3JlKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY29sbGVjdGlvbnMgPSBhd2FpdCBkYkNsaWVudC5kYi5saXN0Q29sbGVjdGlvbnMoKS50b0FycmF5KCk7XG4gICAgICAgIGZvciAoY29uc3QgY29sbGVjdGlvbiBvZiBjb2xsZWN0aW9ucykge1xuICAgICAgICAgICAgYXdhaXQgZGJDbGllbnQuZGIuY29sbGVjdGlvbihjb2xsZWN0aW9uLm5hbWUpLmRlbGV0ZU1hbnkoe30pO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBhZnRlcihhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbGxlY3Rpb25zID0gYXdhaXQgZGJDbGllbnQuZGIubGlzdENvbGxlY3Rpb25zKCkudG9BcnJheSgpO1xuICAgICAgICBmb3IgKGNvbnN0IGNvbGxlY3Rpb24gb2YgY29sbGVjdGlvbnMpIHtcbiAgICAgICAgICAgIGF3YWl0IGRiQ2xpZW50LmRiLmNvbGxlY3Rpb24oY29sbGVjdGlvbi5uYW1lKS5kZWxldGVNYW55KHt9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjb25uZWN0IHRvIE1vbmdvREIgc3VjY2Vzc2Z1bGx5JywgKCkgPT4ge1xuICAgICAgICBleHBlY3QoZGJDbGllbnQuaXNBbGl2ZSgpKS50by5iZS50cnVlO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gY29ycmVjdCBudW1iZXIgb2YgdXNlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHVzZXJzQ29sbGVjdGlvbiA9IGRiQ2xpZW50LmRiLmNvbGxlY3Rpb24oJ3VzZXJzJyk7XG4gICAgICAgIGF3YWl0IHVzZXJzQ29sbGVjdGlvbi5pbnNlcnRNYW55KFtcbiAgICAgICAgICAgIHsgZW1haWw6ICd0ZXN0MUB0ZXN0LmNvbScsIHBhc3N3b3JkOiAncGFzc3dvcmQxJyB9LFxuICAgICAgICAgICAgeyBlbWFpbDogJ3Rlc3QyQHRlc3QuY29tJywgcGFzc3dvcmQ6ICdwYXNzd29yZDInIH1cbiAgICAgICAgXSk7XG4gICAgICAgIGNvbnN0IG5iVXNlcnMgPSBhd2FpdCBkYkNsaWVudC5uYlVzZXJzKCk7XG4gICAgICAgIGV4cGVjdChuYlVzZXJzKS50by5lcXVhbCgyKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGNvcnJlY3QgbnVtYmVyIG9mIGZpbGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBmaWxlc0NvbGxlY3Rpb24gPSBkYkNsaWVudC5kYi5jb2xsZWN0aW9uKCdmaWxlcycpO1xuICAgICAgICBhd2FpdCBmaWxlc0NvbGxlY3Rpb24uaW5zZXJ0TWFueShbXG4gICAgICAgICAgICB7IG5hbWU6ICdmaWxlMS50eHQnLCB0eXBlOiAnZmlsZScgfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ2ZpbGUyLnR4dCcsIHR5cGU6ICdmaWxlJyB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnZmlsZTMudHh0JywgdHlwZTogJ2ZpbGUnIH1cbiAgICAgICAgXSk7XG4gICAgICAgIGNvbnN0IG5iRmlsZXMgPSBhd2FpdCBkYkNsaWVudC5uYkZpbGVzKCk7XG4gICAgICAgIGV4cGVjdChuYkZpbGVzKS50by5lcXVhbCgzKTtcbiAgICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOzs7O0FBQ0EsSUFBQUEsS0FBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsR0FBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQUcsUUFBQSxHQUFBSCxPQUFBO0FBQW1DLFNBQUFFLHVCQUFBRSxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBSG5DOztBQUtBRyxRQUFRLENBQUMsVUFBVSxFQUFFLE1BQU07RUFDdkJDLE1BQU0sQ0FBQyxZQUFZO0lBQ2YsTUFBTUMsV0FBVyxHQUFHLE1BQU1DLFdBQVEsQ0FBQ0MsRUFBRSxDQUFDQyxlQUFlLENBQUMsQ0FBQyxDQUFDQyxPQUFPLENBQUMsQ0FBQztJQUNqRSxLQUFLLE1BQU1DLFVBQVUsSUFBSUwsV0FBVyxFQUFFO01BQ2xDLE1BQU1DLFdBQVEsQ0FBQ0MsRUFBRSxDQUFDRyxVQUFVLENBQUNBLFVBQVUsQ0FBQ0MsSUFBSSxDQUFDLENBQUNDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNoRTtFQUNKLENBQUMsQ0FBQztFQUVGQyxLQUFLLENBQUMsWUFBWTtJQUNkLE1BQU1SLFdBQVcsR0FBRyxNQUFNQyxXQUFRLENBQUNDLEVBQUUsQ0FBQ0MsZUFBZSxDQUFDLENBQUMsQ0FBQ0MsT0FBTyxDQUFDLENBQUM7SUFDakUsS0FBSyxNQUFNQyxVQUFVLElBQUlMLFdBQVcsRUFBRTtNQUNsQyxNQUFNQyxXQUFRLENBQUNDLEVBQUUsQ0FBQ0csVUFBVSxDQUFDQSxVQUFVLENBQUNDLElBQUksQ0FBQyxDQUFDQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDaEU7RUFDSixDQUFDLENBQUM7RUFFRkUsRUFBRSxDQUFDLHdDQUF3QyxFQUFFLE1BQU07SUFDL0MsSUFBQUMsWUFBTSxFQUFDVCxXQUFRLENBQUNVLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQ0MsRUFBRSxDQUFDQyxFQUFFLENBQUNDLElBQUk7RUFDekMsQ0FBQyxDQUFDO0VBRUZMLEVBQUUsQ0FBQyx1Q0FBdUMsRUFBRSxZQUFZO0lBQ3BELE1BQU1NLGVBQWUsR0FBR2QsV0FBUSxDQUFDQyxFQUFFLENBQUNHLFVBQVUsQ0FBQyxPQUFPLENBQUM7SUFDdkQsTUFBTVUsZUFBZSxDQUFDQyxVQUFVLENBQUMsQ0FDN0I7TUFBRUMsS0FBSyxFQUFFLGdCQUFnQjtNQUFFQyxRQUFRLEVBQUU7SUFBWSxDQUFDLEVBQ2xEO01BQUVELEtBQUssRUFBRSxnQkFBZ0I7TUFBRUMsUUFBUSxFQUFFO0lBQVksQ0FBQyxDQUNyRCxDQUFDO0lBQ0YsTUFBTUMsT0FBTyxHQUFHLE1BQU1sQixXQUFRLENBQUNrQixPQUFPLENBQUMsQ0FBQztJQUN4QyxJQUFBVCxZQUFNLEVBQUNTLE9BQU8sQ0FBQyxDQUFDUCxFQUFFLENBQUNRLEtBQUssQ0FBQyxDQUFDLENBQUM7RUFDL0IsQ0FBQyxDQUFDO0VBRUZYLEVBQUUsQ0FBQyx1Q0FBdUMsRUFBRSxZQUFZO0lBQ3BELE1BQU1ZLGVBQWUsR0FBR3BCLFdBQVEsQ0FBQ0MsRUFBRSxDQUFDRyxVQUFVLENBQUMsT0FBTyxDQUFDO0lBQ3ZELE1BQU1nQixlQUFlLENBQUNMLFVBQVUsQ0FBQyxDQUM3QjtNQUFFVixJQUFJLEVBQUUsV0FBVztNQUFFZ0IsSUFBSSxFQUFFO0lBQU8sQ0FBQyxFQUNuQztNQUFFaEIsSUFBSSxFQUFFLFdBQVc7TUFBRWdCLElBQUksRUFBRTtJQUFPLENBQUMsRUFDbkM7TUFBRWhCLElBQUksRUFBRSxXQUFXO01BQUVnQixJQUFJLEVBQUU7SUFBTyxDQUFDLENBQ3RDLENBQUM7SUFDRixNQUFNQyxPQUFPLEdBQUcsTUFBTXRCLFdBQVEsQ0FBQ3NCLE9BQU8sQ0FBQyxDQUFDO0lBQ3hDLElBQUFiLFlBQU0sRUFBQ2EsT0FBTyxDQUFDLENBQUNYLEVBQUUsQ0FBQ1EsS0FBSyxDQUFDLENBQUMsQ0FBQztFQUMvQixDQUFDLENBQUM7QUFDTixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_chai","require","_db","_interopRequireDefault","_mongodb","e","__esModule","default","describe","before","collections","dbClient","db","listCollections","toArray","collection","name","deleteMany","after","it","expect","isAlive","to","be","true","usersCollection","insertMany","email","password","nbUsers","equal","filesCollection","type","nbFiles"],"sourceRoot":"/alx-files_manager/tests/","sources":["dbClient.test.js"],"sourcesContent":["// tests/dbClient.test.js\nimport { expect } from 'chai';\nimport dbClient from '../utils/db.js';\nimport { ObjectId } from 'mongodb';\n\ndescribe('DBClient', () => {\n    before(async () => {\n        const collections = await dbClient.db.listCollections().toArray();\n        for (const collection of collections) {\n            await dbClient.db.collection(collection.name).deleteMany({});\n        }\n    });\n\n    after(async () => {\n        const collections = await dbClient.db.listCollections().toArray();\n        for (const collection of collections) {\n            await dbClient.db.collection(collection.name).deleteMany({});\n        }\n    });\n\n    it('should connect to MongoDB successfully', () => {\n        expect(dbClient.isAlive()).to.be.true;\n    });\n\n    it('should return correct number of users', async () => {\n        const usersCollection = dbClient.db.collection('users');\n        await usersCollection.insertMany([\n            { email: 'test1@test.com', password: 'password1' },\n            { email: 'test2@test.com', password: 'password2' }\n        ]);\n        const nbUsers = await dbClient.nbUsers();\n        expect(nbUsers).to.equal(2);\n    });\n\n    it('should return correct number of files', async () => {\n        const filesCollection = dbClient.db.collection('files');\n        await filesCollection.insertMany([\n            { name: 'file1.txt', type: 'file' },\n            { name: 'file2.txt', type: 'file' },\n            { name: 'file3.txt', type: 'file' }\n        ]);\n        const nbFiles = await dbClient.nbFiles();\n        expect(nbFiles).to.equal(3);\n    });\n});\n"],"mappings":";;;;AACA,IAAAA,KAAA,GAAAC,OAAA;AACA,IAAAC,GAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,QAAA,GAAAH,OAAA;AAAmC,SAAAE,uBAAAE,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAHnC;;AAKAG,QAAQ,CAAC,UAAU,EAAE,MAAM;EACvBC,MAAM,CAAC,YAAY;IACf,MAAMC,WAAW,GAAG,MAAMC,WAAQ,CAACC,EAAE,CAACC,eAAe,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;IACjE,KAAK,MAAMC,UAAU,IAAIL,WAAW,EAAE;MAClC,MAAMC,WAAQ,CAACC,EAAE,CAACG,UAAU,CAACA,UAAU,CAACC,IAAI,CAAC,CAACC,UAAU,CAAC,CAAC,CAAC,CAAC;IAChE;EACJ,CAAC,CAAC;EAEFC,KAAK,CAAC,YAAY;IACd,MAAMR,WAAW,GAAG,MAAMC,WAAQ,CAACC,EAAE,CAACC,eAAe,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;IACjE,KAAK,MAAMC,UAAU,IAAIL,WAAW,EAAE;MAClC,MAAMC,WAAQ,CAACC,EAAE,CAACG,UAAU,CAACA,UAAU,CAACC,IAAI,CAAC,CAACC,UAAU,CAAC,CAAC,CAAC,CAAC;IAChE;EACJ,CAAC,CAAC;EAEFE,EAAE,CAAC,wCAAwC,EAAE,MAAM;IAC/C,IAAAC,YAAM,EAACT,WAAQ,CAACU,OAAO,CAAC,CAAC,CAAC,CAACC,EAAE,CAACC,EAAE,CAACC,IAAI;EACzC,CAAC,CAAC;EAEFL,EAAE,CAAC,uCAAuC,EAAE,YAAY;IACpD,MAAMM,eAAe,GAAGd,WAAQ,CAACC,EAAE,CAACG,UAAU,CAAC,OAAO,CAAC;IACvD,MAAMU,eAAe,CAACC,UAAU,CAAC,CAC7B;MAAEC,KAAK,EAAE,gBAAgB;MAAEC,QAAQ,EAAE;IAAY,CAAC,EAClD;MAAED,KAAK,EAAE,gBAAgB;MAAEC,QAAQ,EAAE;IAAY,CAAC,CACrD,CAAC;IACF,MAAMC,OAAO,GAAG,MAAMlB,WAAQ,CAACkB,OAAO,CAAC,CAAC;IACxC,IAAAT,YAAM,EAACS,OAAO,CAAC,CAACP,EAAE,CAACQ,KAAK,CAAC,CAAC,CAAC;EAC/B,CAAC,CAAC;EAEFX,EAAE,CAAC,uCAAuC,EAAE,YAAY;IACpD,MAAMY,eAAe,GAAGpB,WAAQ,CAACC,EAAE,CAACG,UAAU,CAAC,OAAO,CAAC;IACvD,MAAMgB,eAAe,CAACL,UAAU,CAAC,CAC7B;MAAEV,IAAI,EAAE,WAAW;MAAEgB,IAAI,EAAE;IAAO,CAAC,EACnC;MAAEhB,IAAI,EAAE,WAAW;MAAEgB,IAAI,EAAE;IAAO,CAAC,EACnC;MAAEhB,IAAI,EAAE,WAAW;MAAEgB,IAAI,EAAE;IAAO,CAAC,CACtC,CAAC;IACF,MAAMC,OAAO,GAAG,MAAMtB,WAAQ,CAACsB,OAAO,CAAC,CAAC;IACxC,IAAAb,YAAM,EAACa,OAAO,CAAC,CAACX,EAAE,CAACQ,KAAK,CAAC,CAAC,CAAC;EAC/B,CAAC,CAAC;AACN,CAAC,CAAC","ignoreList":[]}},"mtime":1736350606781},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/utils/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/utils/db.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$24\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$25\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-import-attributes\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"deprecatedAssertSyntax\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"109.0.0\",\"edge\":\"130.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"11.0.0\",\"node\":\"10.0.0\",\"opera\":\"114.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"26.0.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":true,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.promise.js\");\nvar _mongodb = require(\"mongodb\");\nclass DBClient {\n  constructor() {\n    const host = process.env.DB_HOST || 'localhost';\n    const port = process.env.DB_PORT || 27017;\n    const database = process.env.DB_DATABASE || 'files_manager';\n    const url = \"mongodb://\".concat(host, \":\").concat(port);\n    _mongodb.MongoClient.connect(url, {\n      useUnifiedTopology: true\n    }, (err, client) => {\n      if (err) {\n        console.log(err);\n        this.db = false;\n      } else {\n        this.db = client.db(database);\n        this.users = this.db.collection('users');\n        this.files = this.db.collection('files');\n      }\n    });\n  }\n  isAlive() {\n    return !!this.db;\n  }\n  async nbUsers() {\n    return this.users.countDocuments();\n  }\n  async nbFiles() {\n    return this.files.countDocuments();\n  }\n}\nconst dbClient = new DBClient();\nvar _default = exports.default = dbClient;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29kYiIsInJlcXVpcmUiLCJEQkNsaWVudCIsImNvbnN0cnVjdG9yIiwiaG9zdCIsInByb2Nlc3MiLCJlbnYiLCJEQl9IT1NUIiwicG9ydCIsIkRCX1BPUlQiLCJkYXRhYmFzZSIsIkRCX0RBVEFCQVNFIiwidXJsIiwiY29uY2F0IiwiTW9uZ29DbGllbnQiLCJjb25uZWN0IiwidXNlVW5pZmllZFRvcG9sb2d5IiwiZXJyIiwiY2xpZW50IiwiY29uc29sZSIsImxvZyIsImRiIiwidXNlcnMiLCJjb2xsZWN0aW9uIiwiZmlsZXMiLCJpc0FsaXZlIiwibmJVc2VycyIsImNvdW50RG9jdW1lbnRzIiwibmJGaWxlcyIsImRiQ2xpZW50IiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL2FseC1maWxlc19tYW5hZ2VyL3V0aWxzLyIsInNvdXJjZXMiOlsiZGIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9uZ29DbGllbnQgfSBmcm9tICdtb25nb2RiJztcblxuY2xhc3MgREJDbGllbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBjb25zdCBob3N0ID0gcHJvY2Vzcy5lbnYuREJfSE9TVCB8fCAnbG9jYWxob3N0JztcbiAgICAgICAgY29uc3QgcG9ydCA9IHByb2Nlc3MuZW52LkRCX1BPUlQgfHwgMjcwMTc7XG4gICAgICAgIGNvbnN0IGRhdGFiYXNlID0gcHJvY2Vzcy5lbnYuREJfREFUQUJBU0UgfHwgJ2ZpbGVzX21hbmFnZXInO1xuICAgICAgICBjb25zdCB1cmwgPSBgbW9uZ29kYjovLyR7aG9zdH06JHtwb3J0fWA7XG5cbiAgICAgICAgTW9uZ29DbGllbnQuY29ubmVjdCh1cmwsIHsgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlIH0sIChlcnIsIGNsaWVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgdGhpcy5kYiA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRiID0gY2xpZW50LmRiKGRhdGFiYXNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXJzID0gdGhpcy5kYi5jb2xsZWN0aW9uKCd1c2VycycpO1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsZXMgPSB0aGlzLmRiLmNvbGxlY3Rpb24oJ2ZpbGVzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGlzQWxpdmUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuZGI7XG4gICAgfVxuXG4gICAgYXN5bmMgbmJVc2VycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlcnMuY291bnREb2N1bWVudHMoKTtcbiAgICB9XG5cbiAgICBhc3luYyBuYkZpbGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maWxlcy5jb3VudERvY3VtZW50cygpO1xuICAgIH1cbn1cblxuY29uc3QgZGJDbGllbnQgPSBuZXcgREJDbGllbnQoKTtcbmV4cG9ydCBkZWZhdWx0IGRiQ2xpZW50O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsUUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBTUMsUUFBUSxDQUFDO0VBQ1hDLFdBQVdBLENBQUEsRUFBRztJQUNWLE1BQU1DLElBQUksR0FBR0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLE9BQU8sSUFBSSxXQUFXO0lBQy9DLE1BQU1DLElBQUksR0FBR0gsT0FBTyxDQUFDQyxHQUFHLENBQUNHLE9BQU8sSUFBSSxLQUFLO0lBQ3pDLE1BQU1DLFFBQVEsR0FBR0wsT0FBTyxDQUFDQyxHQUFHLENBQUNLLFdBQVcsSUFBSSxlQUFlO0lBQzNELE1BQU1DLEdBQUcsZ0JBQUFDLE1BQUEsQ0FBZ0JULElBQUksT0FBQVMsTUFBQSxDQUFJTCxJQUFJLENBQUU7SUFFdkNNLG9CQUFXLENBQUNDLE9BQU8sQ0FBQ0gsR0FBRyxFQUFFO01BQUVJLGtCQUFrQixFQUFFO0lBQUssQ0FBQyxFQUFFLENBQUNDLEdBQUcsRUFBRUMsTUFBTSxLQUFLO01BQ3BFLElBQUlELEdBQUcsRUFBRTtRQUNMRSxPQUFPLENBQUNDLEdBQUcsQ0FBQ0gsR0FBRyxDQUFDO1FBQ2hCLElBQUksQ0FBQ0ksRUFBRSxHQUFHLEtBQUs7TUFDbkIsQ0FBQyxNQUFNO1FBQ0gsSUFBSSxDQUFDQSxFQUFFLEdBQUdILE1BQU0sQ0FBQ0csRUFBRSxDQUFDWCxRQUFRLENBQUM7UUFDN0IsSUFBSSxDQUFDWSxLQUFLLEdBQUcsSUFBSSxDQUFDRCxFQUFFLENBQUNFLFVBQVUsQ0FBQyxPQUFPLENBQUM7UUFDeEMsSUFBSSxDQUFDQyxLQUFLLEdBQUcsSUFBSSxDQUFDSCxFQUFFLENBQUNFLFVBQVUsQ0FBQyxPQUFPLENBQUM7TUFDNUM7SUFDSixDQUFDLENBQUM7RUFDTjtFQUVBRSxPQUFPQSxDQUFBLEVBQUc7SUFDTixPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUNKLEVBQUU7RUFDcEI7RUFFQSxNQUFNSyxPQUFPQSxDQUFBLEVBQUc7SUFDWixPQUFPLElBQUksQ0FBQ0osS0FBSyxDQUFDSyxjQUFjLENBQUMsQ0FBQztFQUN0QztFQUVBLE1BQU1DLE9BQU9BLENBQUEsRUFBRztJQUNaLE9BQU8sSUFBSSxDQUFDSixLQUFLLENBQUNHLGNBQWMsQ0FBQyxDQUFDO0VBQ3RDO0FBQ0o7QUFFQSxNQUFNRSxRQUFRLEdBQUcsSUFBSTNCLFFBQVEsQ0FBQyxDQUFDO0FBQUMsSUFBQTRCLFFBQUEsR0FBQUMsT0FBQSxDQUFBQyxPQUFBLEdBQ2pCSCxRQUFRIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_mongodb","require","DBClient","constructor","host","process","env","DB_HOST","port","DB_PORT","database","DB_DATABASE","url","concat","MongoClient","connect","useUnifiedTopology","err","client","console","log","db","users","collection","files","isAlive","nbUsers","countDocuments","nbFiles","dbClient","_default","exports","default"],"sourceRoot":"/alx-files_manager/utils/","sources":["db.js"],"sourcesContent":["import { MongoClient } from 'mongodb';\n\nclass DBClient {\n    constructor() {\n        const host = process.env.DB_HOST || 'localhost';\n        const port = process.env.DB_PORT || 27017;\n        const database = process.env.DB_DATABASE || 'files_manager';\n        const url = `mongodb://${host}:${port}`;\n\n        MongoClient.connect(url, { useUnifiedTopology: true }, (err, client) => {\n            if (err) {\n                console.log(err);\n                this.db = false;\n            } else {\n                this.db = client.db(database);\n                this.users = this.db.collection('users');\n                this.files = this.db.collection('files');\n            }\n        });\n    }\n\n    isAlive() {\n        return !!this.db;\n    }\n\n    async nbUsers() {\n        return this.users.countDocuments();\n    }\n\n    async nbFiles() {\n        return this.files.countDocuments();\n    }\n}\n\nconst dbClient = new DBClient();\nexport default dbClient;\n"],"mappings":";;;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AAEA,MAAMC,QAAQ,CAAC;EACXC,WAAWA,CAAA,EAAG;IACV,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,OAAO,IAAI,WAAW;IAC/C,MAAMC,IAAI,GAAGH,OAAO,CAACC,GAAG,CAACG,OAAO,IAAI,KAAK;IACzC,MAAMC,QAAQ,GAAGL,OAAO,CAACC,GAAG,CAACK,WAAW,IAAI,eAAe;IAC3D,MAAMC,GAAG,gBAAAC,MAAA,CAAgBT,IAAI,OAAAS,MAAA,CAAIL,IAAI,CAAE;IAEvCM,oBAAW,CAACC,OAAO,CAACH,GAAG,EAAE;MAAEI,kBAAkB,EAAE;IAAK,CAAC,EAAE,CAACC,GAAG,EAAEC,MAAM,KAAK;MACpE,IAAID,GAAG,EAAE;QACLE,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC;QAChB,IAAI,CAACI,EAAE,GAAG,KAAK;MACnB,CAAC,MAAM;QACH,IAAI,CAACA,EAAE,GAAGH,MAAM,CAACG,EAAE,CAACX,QAAQ,CAAC;QAC7B,IAAI,CAACY,KAAK,GAAG,IAAI,CAACD,EAAE,CAACE,UAAU,CAAC,OAAO,CAAC;QACxC,IAAI,CAACC,KAAK,GAAG,IAAI,CAACH,EAAE,CAACE,UAAU,CAAC,OAAO,CAAC;MAC5C;IACJ,CAAC,CAAC;EACN;EAEAE,OAAOA,CAAA,EAAG;IACN,OAAO,CAAC,CAAC,IAAI,CAACJ,EAAE;EACpB;EAEA,MAAMK,OAAOA,CAAA,EAAG;IACZ,OAAO,IAAI,CAACJ,KAAK,CAACK,cAAc,CAAC,CAAC;EACtC;EAEA,MAAMC,OAAOA,CAAA,EAAG;IACZ,OAAO,IAAI,CAACJ,KAAK,CAACG,cAAc,CAAC,CAAC;EACtC;AACJ;AAEA,MAAME,QAAQ,GAAG,IAAI3B,QAAQ,CAAC,CAAC;AAAC,IAAA4B,QAAA,GAAAC,OAAA,CAAAC,OAAA,GACjBH,QAAQ","ignoreList":[]}},"mtime":1736348095141},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/tests/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/tests/endpoints.test.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$24\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$25\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-import-attributes\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"deprecatedAssertSyntax\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"109.0.0\",\"edge\":\"130.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"11.0.0\",\"node\":\"10.0.0\",\"opera\":\"114.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"26.0.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":true,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.promise.js\");\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\nvar _chai = require(\"chai\");\nvar _supertest = _interopRequireDefault(require(\"supertest\"));\nvar _uuid = require(\"uuid\");\nvar _server = _interopRequireDefault(require(\"../server\"));\nvar _redis = _interopRequireDefault(require(\"../utils/redis\"));\nvar _db = require(\"../utils/db\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\ndescribe('API Endpoints', () => {\n  let token;\n  let userId;\n  let fileId;\n  before(async function () {\n    this.timeout(20000); // Ensure enough time for MongoDB connection\n\n    // Flush Redis asynchronously\n    await _redis.default.client.flushall('ASYNC');\n\n    // Connect to MongoDB and ensure it's successful\n    try {\n      await _db.dbClient.connect(); // Explicit connection call\n    } catch (err) {\n      console.error('MongoDB connection failed during tests:', err);\n      throw err; // Stop the tests if DB connection fails\n    }\n\n    // Delete all collections from MongoDB concurrently\n    const collections = await _db.dbClient.db.listCollections().toArray();\n    const deletePromises = collections.map(collection => {\n      return _db.dbClient.db.collection(collection.name).deleteMany({});\n    });\n\n    // Wait for all delete operations to finish\n    await Promise.all(deletePromises);\n\n    // Create a test user\n    const userResponse = await (0, _supertest.default)(_server.default).post('/users').send({\n      email: 'test@example.com',\n      password: 'testpassword123'\n    });\n    userId = userResponse.body.id;\n\n    // Authenticate the user to get a token\n    const authResponse = await (0, _supertest.default)(_server.default).get('/connect').auth('test@example.com', 'testpassword123', {\n      type: 'basic'\n    });\n    token = authResponse.body.token;\n  });\n  describe('GET /status', () => {\n    it('should return status of Redis and DB connections', async () => {\n      const res = await (0, _supertest.default)(_server.default).get('/status');\n      (0, _chai.expect)(res.status).to.equal(200);\n      (0, _chai.expect)(res.body).to.deep.equal({\n        redis: true,\n        db: true\n      });\n    });\n  });\n  describe('GET /users/me', () => {\n    it('should return user information', async () => {\n      const res = await (0, _supertest.default)(_server.default).get('/users/me').set('X-Token', token); // Ensure the token is sent here\n      (0, _chai.expect)(res.status).to.equal(200);\n      (0, _chai.expect)(res.body).to.have.property('email', 'test@example.com');\n    });\n  });\n  describe('POST /files', () => {\n    it('should create a new file successfully', async () => {\n      const res = await (0, _supertest.default)(_server.default).post('/files').set('X-Token', token) // Ensure the token is sent here\n      .send({\n        name: 'test.txt',\n        type: 'file',\n        data: Buffer.from('Hello World').toString('base64')\n      });\n      (0, _chai.expect)(res.status).to.equal(201);\n      (0, _chai.expect)(res.body).to.have.property('id');\n      fileId = res.body.id;\n    });\n  });\n  describe('GET /files/:id', () => {\n    it('should retrieve file information', async () => {\n      const res = await (0, _supertest.default)(_server.default).get(\"/files/\".concat(fileId)).set('X-Token', token); // Token for authenticated request\n      (0, _chai.expect)(res.status).to.equal(200);\n      (0, _chai.expect)(res.body).to.have.property('name', 'test.txt');\n    });\n  });\n  describe('GET /files/:id/data', () => {\n    it('should retrieve file data', async () => {\n      const res = await (0, _supertest.default)(_server.default).get(\"/files/\".concat(fileId, \"/data\")).set('X-Token', token); // Token for authenticated request\n      (0, _chai.expect)(res.status).to.equal(200);\n      (0, _chai.expect)(res.text).to.equal('Hello World');\n    });\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY2hhaSIsInJlcXVpcmUiLCJfc3VwZXJ0ZXN0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl91dWlkIiwiX3NlcnZlciIsIl9yZWRpcyIsIl9kYiIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImRlc2NyaWJlIiwidG9rZW4iLCJ1c2VySWQiLCJmaWxlSWQiLCJiZWZvcmUiLCJ0aW1lb3V0IiwicmVkaXNDbGllbnQiLCJjbGllbnQiLCJmbHVzaGFsbCIsImRiQ2xpZW50IiwiY29ubmVjdCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImNvbGxlY3Rpb25zIiwiZGIiLCJsaXN0Q29sbGVjdGlvbnMiLCJ0b0FycmF5IiwiZGVsZXRlUHJvbWlzZXMiLCJtYXAiLCJjb2xsZWN0aW9uIiwibmFtZSIsImRlbGV0ZU1hbnkiLCJQcm9taXNlIiwiYWxsIiwidXNlclJlc3BvbnNlIiwicmVxdWVzdCIsImFwcCIsInBvc3QiLCJzZW5kIiwiZW1haWwiLCJwYXNzd29yZCIsImJvZHkiLCJpZCIsImF1dGhSZXNwb25zZSIsImdldCIsImF1dGgiLCJ0eXBlIiwiaXQiLCJyZXMiLCJleHBlY3QiLCJzdGF0dXMiLCJ0byIsImVxdWFsIiwiZGVlcCIsInJlZGlzIiwic2V0IiwiaGF2ZSIsInByb3BlcnR5IiwiZGF0YSIsIkJ1ZmZlciIsImZyb20iLCJ0b1N0cmluZyIsImNvbmNhdCIsInRleHQiXSwic291cmNlUm9vdCI6Ii9hbHgtZmlsZXNfbWFuYWdlci90ZXN0cy8iLCJzb3VyY2VzIjpbImVuZHBvaW50cy50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGV4cGVjdCB9IGZyb20gJ2NoYWknO1xuaW1wb3J0IHJlcXVlc3QgZnJvbSAnc3VwZXJ0ZXN0JztcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IGFwcCBmcm9tICcuLi9zZXJ2ZXInO1xuaW1wb3J0IHJlZGlzQ2xpZW50IGZyb20gJy4uL3V0aWxzL3JlZGlzJztcbmltcG9ydCB7IGRiQ2xpZW50IH0gZnJvbSAnLi4vdXRpbHMvZGInO1xuXG5kZXNjcmliZSgnQVBJIEVuZHBvaW50cycsICgpID0+IHtcbiAgICBsZXQgdG9rZW47XG4gICAgbGV0IHVzZXJJZDtcbiAgICBsZXQgZmlsZUlkO1xuXG4gICAgYmVmb3JlKGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50aW1lb3V0KDIwMDAwKTsgLy8gRW5zdXJlIGVub3VnaCB0aW1lIGZvciBNb25nb0RCIGNvbm5lY3Rpb25cblxuICAgICAgICAvLyBGbHVzaCBSZWRpcyBhc3luY2hyb25vdXNseVxuICAgICAgICBhd2FpdCByZWRpc0NsaWVudC5jbGllbnQuZmx1c2hhbGwoJ0FTWU5DJyk7XG5cbiAgICAgICAgLy8gQ29ubmVjdCB0byBNb25nb0RCIGFuZCBlbnN1cmUgaXQncyBzdWNjZXNzZnVsXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBkYkNsaWVudC5jb25uZWN0KCk7IC8vIEV4cGxpY2l0IGNvbm5lY3Rpb24gY2FsbFxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01vbmdvREIgY29ubmVjdGlvbiBmYWlsZWQgZHVyaW5nIHRlc3RzOicsIGVycik7XG4gICAgICAgICAgICB0aHJvdyBlcnI7IC8vIFN0b3AgdGhlIHRlc3RzIGlmIERCIGNvbm5lY3Rpb24gZmFpbHNcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERlbGV0ZSBhbGwgY29sbGVjdGlvbnMgZnJvbSBNb25nb0RCIGNvbmN1cnJlbnRseVxuICAgICAgICBjb25zdCBjb2xsZWN0aW9ucyA9IGF3YWl0IGRiQ2xpZW50LmRiLmxpc3RDb2xsZWN0aW9ucygpLnRvQXJyYXkoKTtcbiAgICAgICAgY29uc3QgZGVsZXRlUHJvbWlzZXMgPSBjb2xsZWN0aW9ucy5tYXAoY29sbGVjdGlvbiA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZGJDbGllbnQuZGIuY29sbGVjdGlvbihjb2xsZWN0aW9uLm5hbWUpLmRlbGV0ZU1hbnkoe30pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBXYWl0IGZvciBhbGwgZGVsZXRlIG9wZXJhdGlvbnMgdG8gZmluaXNoXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGRlbGV0ZVByb21pc2VzKTtcblxuICAgICAgICAvLyBDcmVhdGUgYSB0ZXN0IHVzZXJcbiAgICAgICAgY29uc3QgdXNlclJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAucG9zdCgnL3VzZXJzJylcbiAgICAgICAgICAgIC5zZW5kKHtcbiAgICAgICAgICAgICAgICBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAndGVzdHBhc3N3b3JkMTIzJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHVzZXJJZCA9IHVzZXJSZXNwb25zZS5ib2R5LmlkO1xuXG4gICAgICAgIC8vIEF1dGhlbnRpY2F0ZSB0aGUgdXNlciB0byBnZXQgYSB0b2tlblxuICAgICAgICBjb25zdCBhdXRoUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgICAgIC5nZXQoJy9jb25uZWN0JylcbiAgICAgICAgICAgIC5hdXRoKCd0ZXN0QGV4YW1wbGUuY29tJywgJ3Rlc3RwYXNzd29yZDEyMycsIHsgdHlwZTogJ2Jhc2ljJyB9KTtcbiAgICAgICAgdG9rZW4gPSBhdXRoUmVzcG9uc2UuYm9keS50b2tlbjtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdHRVQgL3N0YXR1cycsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gc3RhdHVzIG9mIFJlZGlzIGFuZCBEQiBjb25uZWN0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QoYXBwKS5nZXQoJy9zdGF0dXMnKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXMuc3RhdHVzKS50by5lcXVhbCgyMDApO1xuICAgICAgICAgICAgZXhwZWN0KHJlcy5ib2R5KS50by5kZWVwLmVxdWFsKHtcbiAgICAgICAgICAgICAgICByZWRpczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkYjogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ0dFVCAvdXNlcnMvbWUnLCAoKSA9PiB7XG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIHVzZXIgaW5mb3JtYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgICAgICAgICAuZ2V0KCcvdXNlcnMvbWUnKVxuICAgICAgICAgICAgICAgIC5zZXQoJ1gtVG9rZW4nLCB0b2tlbik7IC8vIEVuc3VyZSB0aGUgdG9rZW4gaXMgc2VudCBoZXJlXG4gICAgICAgICAgICBleHBlY3QocmVzLnN0YXR1cykudG8uZXF1YWwoMjAwKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXMuYm9keSkudG8uaGF2ZS5wcm9wZXJ0eSgnZW1haWwnLCAndGVzdEBleGFtcGxlLmNvbScpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdQT1NUIC9maWxlcycsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgYSBuZXcgZmlsZSBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgICAgICAgICAucG9zdCgnL2ZpbGVzJylcbiAgICAgICAgICAgICAgICAuc2V0KCdYLVRva2VuJywgdG9rZW4pIC8vIEVuc3VyZSB0aGUgdG9rZW4gaXMgc2VudCBoZXJlXG4gICAgICAgICAgICAgICAgLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAndGVzdC50eHQnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZmlsZScsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IEJ1ZmZlci5mcm9tKCdIZWxsbyBXb3JsZCcpLnRvU3RyaW5nKCdiYXNlNjQnKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvLmVxdWFsKDIwMSk7XG4gICAgICAgICAgICBleHBlY3QocmVzLmJvZHkpLnRvLmhhdmUucHJvcGVydHkoJ2lkJyk7XG4gICAgICAgICAgICBmaWxlSWQgPSByZXMuYm9keS5pZDtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnR0VUIC9maWxlcy86aWQnLCAoKSA9PiB7XG4gICAgICAgIGl0KCdzaG91bGQgcmV0cmlldmUgZmlsZSBpbmZvcm1hdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAgICAgICAgIC5nZXQoYC9maWxlcy8ke2ZpbGVJZH1gKVxuICAgICAgICAgICAgICAgIC5zZXQoJ1gtVG9rZW4nLCB0b2tlbik7IC8vIFRva2VuIGZvciBhdXRoZW50aWNhdGVkIHJlcXVlc3RcbiAgICAgICAgICAgIGV4cGVjdChyZXMuc3RhdHVzKS50by5lcXVhbCgyMDApO1xuICAgICAgICAgICAgZXhwZWN0KHJlcy5ib2R5KS50by5oYXZlLnByb3BlcnR5KCduYW1lJywgJ3Rlc3QudHh0Jyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ0dFVCAvZmlsZXMvOmlkL2RhdGEnLCAoKSA9PiB7XG4gICAgICAgIGl0KCdzaG91bGQgcmV0cmlldmUgZmlsZSBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLmdldChgL2ZpbGVzLyR7ZmlsZUlkfS9kYXRhYClcbiAgICAgICAgICAgICAgICAuc2V0KCdYLVRva2VuJywgdG9rZW4pOyAvLyBUb2tlbiBmb3IgYXV0aGVudGljYXRlZCByZXF1ZXN0XG4gICAgICAgICAgICBleHBlY3QocmVzLnN0YXR1cykudG8uZXF1YWwoMjAwKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXMudGV4dCkudG8uZXF1YWwoJ0hlbGxvIFdvcmxkJyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG5cbiJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLElBQUFBLEtBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLFVBQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFHLEtBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLE9BQUEsR0FBQUYsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFLLE1BQUEsR0FBQUgsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFNLEdBQUEsR0FBQU4sT0FBQTtBQUF1QyxTQUFBRSx1QkFBQUssQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQUV2Q0csUUFBUSxDQUFDLGVBQWUsRUFBRSxNQUFNO0VBQzVCLElBQUlDLEtBQUs7RUFDVCxJQUFJQyxNQUFNO0VBQ1YsSUFBSUMsTUFBTTtFQUVWQyxNQUFNLENBQUMsa0JBQWtCO0lBQ3JCLElBQUksQ0FBQ0MsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7O0lBRXJCO0lBQ0EsTUFBTUMsY0FBVyxDQUFDQyxNQUFNLENBQUNDLFFBQVEsQ0FBQyxPQUFPLENBQUM7O0lBRTFDO0lBQ0EsSUFBSTtNQUNBLE1BQU1DLFlBQVEsQ0FBQ0MsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzlCLENBQUMsQ0FBQyxPQUFPQyxHQUFHLEVBQUU7TUFDVkMsT0FBTyxDQUFDQyxLQUFLLENBQUMseUNBQXlDLEVBQUVGLEdBQUcsQ0FBQztNQUM3RCxNQUFNQSxHQUFHLENBQUMsQ0FBQztJQUNmOztJQUVBO0lBQ0EsTUFBTUcsV0FBVyxHQUFHLE1BQU1MLFlBQVEsQ0FBQ00sRUFB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Q0FBQyxDQUFDQyxRQUFRLENBQUMsUUFBUTtNQUN0RCxDQUFDLENBQUM7TUFDTixJQUFBWixZQUFNLEVBQUNELEdBQUcsQ0FBQ0UsTUFBTSxDQUFDLENBQUNDLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLEdBQUcsQ0FBQztNQUNoQyxJQUFBSCxZQUFNLEVBQUNELEdBQUcsQ0FBQ1AsSUFBSSxDQUFDLENBQUNVLEVBQUUsQ0FBQ0ssSUFBSSxDQUFDQyxRQUFRLENBQUMsSUFBSSxDQUFDO01BQ3ZDN0MsTUFBTSxHQUFHb0MsR0FBRyxDQUFDUCxJQUFJLENBQUNDLEVBQUU7SUFDeEIsQ0FBQyxDQUFDO0VBQ04sQ0FBQyxDQUFDO0VBRUZqQyxRQUFRLENBQUMsZ0JBQWdCLEVBQUUsTUFBTTtJQUM3QnNDLEVBQUUsQ0FBQyxrQ0FBa0MsRUFBRSxZQUFZO01BQy9DLE1BQU1DLEdBQUcsR0FBRyxNQUFNLElBQUFiLGtCQUFPLEVBQUNDLGVBQUcsQ0FBQyxDQUN6QlEsR0FBRyxXQUFBa0IsTUFBQSxDQUFXbEQsTUFBTSxDQUFFLENBQUMsQ0FDdkIyQyxHQUFHLENBQUMsU0FBUyxFQUFFN0MsS0FBSyxDQUFDLENBQUMsQ0FBQztNQUM1QixJQUFBdUMsWUFBTSxFQUFDRCxHQUFHLENBQUNFLE1BQU0sQ0FBQyxDQUFDQyxFQUFFLENBQUNDLEtBQUssQ0FBQyxHQUFHLENBQUM7TUFDaEMsSUFBQUgsWUFBTSxFQUFDRCxHQUFHLENBQUNQLElBQUksQ0FBQyxDQUFDVSxFQUFFLENBQUNLLElBQUksQ0FBQ0MsUUFBUSxDQUFDLE1BQU0sRUFBRSxVQUFVLENBQUM7SUFDekQsQ0FBQyxDQUFDO0VBQ04sQ0FBQyxDQUFDO0VBRUZoRCxRQUFRLENBQUMscUJBQXFCLEVBQUUsTUFBTTtJQUNsQ3NDLEVBQUUsQ0FBQywyQkFBMkIsRUFBRSxZQUFZO01BQ3hDLE1BQU1DLEdBQUcsR0FBRyxNQUFNLElBQUFiLGtCQUFPLEVBQUNDLGVBQUcsQ0FBQyxDQUN6QlEsR0FBRyxXQUFBa0IsTUFBQSxDQUFXbEQsTUFBTSxVQUFPLENBQUMsQ0FDNUIyQyxHQUFHLENBQUMsU0FBUyxFQUFFN0MsS0FBSyxDQUFDLENBQUMsQ0FBQztNQUM1QixJQUFBdUMsWUFBTSxFQUFDRCxHQUFHLENBQUNFLE1BQU0sQ0FBQyxDQUFDQyxFQUFFLENBQUNDLEtBQUssQ0FBQyxHQUFHLENBQUM7TUFDaEMsSUFBQUgsWUFBTSxFQUFDRCxHQUFHLENBQUNlLElBQUksQ0FBQyxDQUFDWixFQUFFLENBQUNDLEtBQUssQ0FBQyxhQUFhLENBQUM7SUFDNUMsQ0FBQyxDQUFDO0VBQ04sQ0FBQyxDQUFDO0FBQ04sQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_chai","require","_supertest","_interopRequireDefault","_uuid","_server","_redis","_db","e","__esModule","default","describe","token","userId","fileId","before","timeout","redisClient","client","flushall","dbClient","connect","err","console","error","collections","db","listCollections","toArray","deletePromises","map","collection","name","deleteMany","Promise","all","userResponse","request","app","post","send","email","password","body","id","authResponse","get","auth","type","it","res","expect","status","to","equal","deep","redis","set","have","property","data","Buffer","from","toString","concat","text"],"sourceRoot":"/alx-files_manager/tests/","sources":["endpoints.test.js"],"sourcesContent":["import { expect } from 'chai';\nimport request from 'supertest';\nimport { v4 as uuidv4 } from 'uuid';\nimport app from '../server';\nimport redisClient from '../utils/redis';\nimport { dbClient } from '../utils/db';\n\ndescribe('API Endpoints', () => {\n    let token;\n    let userId;\n    let fileId;\n\n    before(async function () {\n        this.timeout(20000); // Ensure enough time for MongoDB connection\n\n        // Flush Redis asynchronously\n        await redisClient.client.flushall('ASYNC');\n\n        // Connect to MongoDB and ensure it's successful\n        try {\n            await dbClient.connect(); // Explicit connection call\n        } catch (err) {\n            console.error('MongoDB connection failed during tests:', err);\n            throw err; // Stop the tests if DB connection fails\n        }\n\n        // Delete all collections from MongoDB concurrently\n        const collections = await dbClient.db.listCollections().toArray();\n        const deletePromises = collections.map(collection => {\n            return dbClient.db.collection(collection.name).deleteMany({});\n        });\n\n        // Wait for all delete operations to finish\n        await Promise.all(deletePromises);\n\n        // Create a test user\n        const userResponse = await request(app)\n            .post('/users')\n            .send({\n                email: 'test@example.com',\n                password: 'testpassword123'\n            });\n        userId = userResponse.body.id;\n\n        // Authenticate the user to get a token\n        const authResponse = await request(app)\n            .get('/connect')\n            .auth('test@example.com', 'testpassword123', { type: 'basic' });\n        token = authResponse.body.token;\n    });\n\n    describe('GET /status', () => {\n        it('should return status of Redis and DB connections', async () => {\n            const res = await request(app).get('/status');\n            expect(res.status).to.equal(200);\n            expect(res.body).to.deep.equal({\n                redis: true,\n                db: true\n            });\n        });\n    });\n\n    describe('GET /users/me', () => {\n        it('should return user information', async () => {\n            const res = await request(app)\n                .get('/users/me')\n                .set('X-Token', token); // Ensure the token is sent here\n            expect(res.status).to.equal(200);\n            expect(res.body).to.have.property('email', 'test@example.com');\n        });\n    });\n\n    describe('POST /files', () => {\n        it('should create a new file successfully', async () => {\n            const res = await request(app)\n                .post('/files')\n                .set('X-Token', token) // Ensure the token is sent here\n                .send({\n                    name: 'test.txt',\n                    type: 'file',\n                    data: Buffer.from('Hello World').toString('base64')\n                });\n            expect(res.status).to.equal(201);\n            expect(res.body).to.have.property('id');\n            fileId = res.body.id;\n        });\n    });\n\n    describe('GET /files/:id', () => {\n        it('should retrieve file information', async () => {\n            const res = await request(app)\n                .get(`/files/${fileId}`)\n                .set('X-Token', token); // Token for authenticated request\n            expect(res.status).to.equal(200);\n            expect(res.body).to.have.property('name', 'test.txt');\n        });\n    });\n\n    describe('GET /files/:id/data', () => {\n        it('should retrieve file data', async () => {\n            const res = await request(app)\n                .get(`/files/${fileId}/data`)\n                .set('X-Token', token); // Token for authenticated request\n            expect(res.status).to.equal(200);\n            expect(res.text).to.equal('Hello World');\n        });\n    });\n});\n\n"],"mappings":"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","ignoreList":[]}},"mtime":1736398661919},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$24\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$25\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-import-attributes\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"deprecatedAssertSyntax\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"109.0.0\",\"edge\":\"130.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"11.0.0\",\"node\":\"10.0.0\",\"opera\":\"114.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"26.0.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":true,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _index = _interopRequireDefault(require(\"./routes/index.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst app = (0, _express.default)();\nconst port = process.env.PORT || 5000;\napp.use(_express.default.json());\napp.use('/', _index.default);\napp.listen(port, () => {\n  console.log(\"Server running on port \".concat(port));\n});\nvar _default = exports.default = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2luZGV4IiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiYXBwIiwiZXhwcmVzcyIsInBvcnQiLCJwcm9jZXNzIiwiZW52IiwiUE9SVCIsInVzZSIsImpzb24iLCJyb3V0ZXMiLCJsaXN0ZW4iLCJjb25zb2xlIiwibG9nIiwiY29uY2F0IiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvYWx4LWZpbGVzX21hbmFnZXIvIiwic291cmNlcyI6WyJzZXJ2ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgcm91dGVzIGZyb20gJy4vcm91dGVzL2luZGV4LmpzJztcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuY29uc3QgcG9ydCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgNTAwMDtcblxuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG5hcHAudXNlKCcvJywgcm91dGVzKTtcblxuYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coYFNlcnZlciBydW5uaW5nIG9uIHBvcnQgJHtwb3J0fWApO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGFwcDtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsUUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsTUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQXVDLFNBQUFELHVCQUFBRyxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBRXZDLE1BQU1HLEdBQUcsR0FBRyxJQUFBQyxnQkFBTyxFQUFDLENBQUM7QUFDckIsTUFBTUMsSUFBSSxHQUFHQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsSUFBSSxJQUFJLElBQUk7QUFFckNMLEdBQUcsQ0FBQ00sR0FBRyxDQUFDTCxnQkFBTyxDQUFDTSxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ3ZCUCxHQUFHLENBQUNNLEdBQUcsQ0FBQyxHQUFHLEVBQUVFLGNBQU0sQ0FBQztBQUVwQlIsR0FBRyxDQUFDUyxNQUFNLENBQUNQLElBQUksRUFBRSxNQUFNO0VBQ25CUSxPQUFPLENBQUNDLEdBQUcsMkJBQUFDLE1BQUEsQ0FBMkJWLElBQUksQ0FBRSxDQUFDO0FBQ2pELENBQUMsQ0FBQztBQUFDLElBQUFXLFFBQUEsR0FBQUMsT0FBQSxDQUFBZixPQUFBLEdBRVlDLEdBQUciLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_express","_interopRequireDefault","require","_index","e","__esModule","default","app","express","port","process","env","PORT","use","json","routes","listen","console","log","concat","_default","exports"],"sourceRoot":"/alx-files_manager/","sources":["server.js"],"sourcesContent":["import express from 'express';\nimport routes from './routes/index.js';\n\nconst app = express();\nconst port = process.env.PORT || 5000;\n\napp.use(express.json());\napp.use('/', routes);\n\napp.listen(port, () => {\n    console.log(`Server running on port ${port}`);\n});\n\nexport default app;\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,MAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAuC,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAEvC,MAAMG,GAAG,GAAG,IAAAC,gBAAO,EAAC,CAAC;AACrB,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,IAAI,IAAI,IAAI;AAErCL,GAAG,CAACM,GAAG,CAACL,gBAAO,CAACM,IAAI,CAAC,CAAC,CAAC;AACvBP,GAAG,CAACM,GAAG,CAAC,GAAG,EAAEE,cAAM,CAAC;AAEpBR,GAAG,CAACS,MAAM,CAACP,IAAI,EAAE,MAAM;EACnBQ,OAAO,CAACC,GAAG,2BAAAC,MAAA,CAA2BV,IAAI,CAAE,CAAC;AACjD,CAAC,CAAC;AAAC,IAAAW,QAAA,GAAAC,OAAA,CAAAf,OAAA,GAEYC,GAAG","ignoreList":[]}},"mtime":1736347303916},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$24\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$25\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-import-attributes\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"deprecatedAssertSyntax\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"109.0.0\",\"edge\":\"130.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"11.0.0\",\"node\":\"10.0.0\",\"opera\":\"114.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"26.0.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":true,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = require(\"express\");\nvar _AppController = _interopRequireDefault(require(\"../controllers/AppController.js\"));\nvar _UsersController = _interopRequireDefault(require(\"../controllers/UsersController.js\"));\nvar _AuthController = _interopRequireDefault(require(\"../controllers/AuthController.js\"));\nvar _FilesController = _interopRequireDefault(require(\"../controllers/FilesController.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst router = (0, _express.Router)();\n\n// App routes\nrouter.get('/status', _AppController.default.getStatus);\nrouter.get('/stats', _AppController.default.getStats);\n\n// User routes\nrouter.post('/users', _UsersController.default.postNew);\nrouter.get('/users/me', _UsersController.default.getMe);\n\n// Auth routes\nrouter.get('/connect', _AuthController.default.getConnect);\nrouter.get('/disconnect', _AuthController.default.getDisconnect);\n\n// Files routes\nrouter.post('/files', _FilesController.default.postUpload);\nrouter.get('/files', _FilesController.default.getIndex);\nrouter.get('/files/:id', _FilesController.default.getShow);\nrouter.get('/files/:id/data', _FilesController.default.getFile);\nrouter.put('/files/:id/publish', _FilesController.default.putPublish);\nrouter.put('/files/:id/unpublish', _FilesController.default.putUnpublish);\nvar _default = exports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsInJlcXVpcmUiLCJfQXBwQ29udHJvbGxlciIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfVXNlcnNDb250cm9sbGVyIiwiX0F1dGhDb250cm9sbGVyIiwiX0ZpbGVzQ29udHJvbGxlciIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInJvdXRlciIsIlJvdXRlciIsImdldCIsIkFwcENvbnRyb2xsZXIiLCJnZXRTdGF0dXMiLCJnZXRTdGF0cyIsInBvc3QiLCJVc2Vyc0NvbnRyb2xsZXIiLCJwb3N0TmV3IiwiZ2V0TWUiLCJBdXRoQ29udHJvbGxlciIsImdldENvbm5lY3QiLCJnZXREaXNjb25uZWN0IiwiRmlsZXNDb250cm9sbGVyIiwicG9zdFVwbG9hZCIsImdldEluZGV4IiwiZ2V0U2hvdyIsImdldEZpbGUiLCJwdXQiLCJwdXRQdWJsaXNoIiwicHV0VW5wdWJsaXNoIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvYWx4LWZpbGVzX21hbmFnZXIvcm91dGVzLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgQXBwQ29udHJvbGxlciBmcm9tICcuLi9jb250cm9sbGVycy9BcHBDb250cm9sbGVyLmpzJztcbmltcG9ydCBVc2Vyc0NvbnRyb2xsZXIgZnJvbSAnLi4vY29udHJvbGxlcnMvVXNlcnNDb250cm9sbGVyLmpzJztcbmltcG9ydCBBdXRoQ29udHJvbGxlciBmcm9tICcuLi9jb250cm9sbGVycy9BdXRoQ29udHJvbGxlci5qcyc7XG5pbXBvcnQgRmlsZXNDb250cm9sbGVyIGZyb20gJy4uL2NvbnRyb2xsZXJzL0ZpbGVzQ29udHJvbGxlci5qcyc7XG5cbmNvbnN0IHJvdXRlciA9IFJvdXRlcigpO1xuXG4vLyBBcHAgcm91dGVzXG5yb3V0ZXIuZ2V0KCcvc3RhdHVzJywgQXBwQ29udHJvbGxlci5nZXRTdGF0dXMpO1xucm91dGVyLmdldCgnL3N0YXRzJywgQXBwQ29udHJvbGxlci5nZXRTdGF0cyk7XG5cbi8vIFVzZXIgcm91dGVzXG5yb3V0ZXIucG9zdCgnL3VzZXJzJywgVXNlcnNDb250cm9sbGVyLnBvc3ROZXcpO1xucm91dGVyLmdldCgnL3VzZXJzL21lJywgVXNlcnNDb250cm9sbGVyLmdldE1lKTtcblxuLy8gQXV0aCByb3V0ZXNcbnJvdXRlci5nZXQoJy9jb25uZWN0JywgQXV0aENvbnRyb2xsZXIuZ2V0Q29ubmVjdCk7XG5yb3V0ZXIuZ2V0KCcvZGlzY29ubmVjdCcsIEF1dGhDb250cm9sbGVyLmdldERpc2Nvbm5lY3QpO1xuXG4vLyBGaWxlcyByb3V0ZXNcbnJvdXRlci5wb3N0KCcvZmlsZXMnLCBGaWxlc0NvbnRyb2xsZXIucG9zdFVwbG9hZCk7XG5yb3V0ZXIuZ2V0KCcvZmlsZXMnLCBGaWxlc0NvbnRyb2xsZXIuZ2V0SW5kZXgpO1xucm91dGVyLmdldCgnL2ZpbGVzLzppZCcsIEZpbGVzQ29udHJvbGxlci5nZXRTaG93KTtcbnJvdXRlci5nZXQoJy9maWxlcy86aWQvZGF0YScsIEZpbGVzQ29udHJvbGxlci5nZXRGaWxlKTtcbnJvdXRlci5wdXQoJy9maWxlcy86aWQvcHVibGlzaCcsIEZpbGVzQ29udHJvbGxlci5wdXRQdWJsaXNoKTtcbnJvdXRlci5wdXQoJy9maWxlcy86aWQvdW5wdWJsaXNoJywgRmlsZXNDb250cm9sbGVyLnB1dFVucHVibGlzaCk7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsUUFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsY0FBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQUcsZ0JBQUEsR0FBQUQsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFJLGVBQUEsR0FBQUYsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFLLGdCQUFBLEdBQUFILHNCQUFBLENBQUFGLE9BQUE7QUFBZ0UsU0FBQUUsdUJBQUFJLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFFaEUsTUFBTUcsTUFBTSxHQUFHLElBQUFDLGVBQU0sRUFBQyxDQUFDOztBQUV2QjtBQUNBRCxNQUFNLENBQUNFLEdBQUcsQ0FBQyxTQUFTLEVBQUVDLHNCQUFhLENBQUNDLFNBQVMsQ0FBQztBQUM5Q0osTUFBTSxDQUFDRSxHQUFHLENBQUMsUUFBUSxFQUFFQyxzQkFBYSxDQUFDRSxRQUFRLENBQUM7O0FBRTVDO0FBQ0FMLE1BQU0sQ0FBQ00sSUFBSSxDQUFDLFFBQVEsRUFBRUMsd0JBQWUsQ0FBQ0MsT0FBTyxDQUFDO0FBQzlDUixNQUFNLENBQUNFLEdBQUcsQ0FBQyxXQUFXLEVBQUVLLHdCQUFlLENBQUNFLEtBQUssQ0FBQzs7QUFFOUM7QUFDQVQsTUFBTSxDQUFDRSxHQUFHLENBQUMsVUFBVSxFQUFFUSx1QkFBYyxDQUFDQyxVQUFVLENBQUM7QUFDakRYLE1BQU0sQ0FBQ0UsR0FBRyxDQUFDLGFBQWEsRUFBRVEsdUJBQWMsQ0FBQ0UsYUFBYSxDQUFDOztBQUV2RDtBQUNBWixNQUFNLENBQUNNLElBQUksQ0FBQyxRQUFRLEVBQUVPLHdCQUFlLENBQUNDLFVBQVUsQ0FBQztBQUNqRGQsTUFBTSxDQUFDRSxHQUFHLENBQUMsUUFBUSxFQUFFVyx3QkFBZSxDQUFDRSxRQUFRLENBQUM7QUFDOUNmLE1BQU0sQ0FBQ0UsR0FBRyxDQUFDLFlBQVksRUFBRVcsd0JBQWUsQ0FBQ0csT0FBTyxDQUFDO0FBQ2pEaEIsTUFBTSxDQUFDRSxHQUFHLENBQUMsaUJBQWlCLEVBQUVXLHdCQUFlLENBQUNJLE9BQU8sQ0FBQztBQUN0RGpCLE1BQU0sQ0FBQ2tCLEdBQUcsQ0FBQyxvQkFBb0IsRUFBRUwsd0JBQWUsQ0FBQ00sVUFBVSxDQUFDO0FBQzVEbkIsTUFBTSxDQUFDa0IsR0FBRyxDQUFDLHNCQUFzQixFQUFFTCx3QkFBZSxDQUFDTyxZQUFZLENBQUM7QUFBQyxJQUFBQyxRQUFBLEdBQUFDLE9BQUEsQ0FBQXZCLE9BQUEsR0FFbERDLE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_express","require","_AppController","_interopRequireDefault","_UsersController","_AuthController","_FilesController","e","__esModule","default","router","Router","get","AppController","getStatus","getStats","post","UsersController","postNew","getMe","AuthController","getConnect","getDisconnect","FilesController","postUpload","getIndex","getShow","getFile","put","putPublish","putUnpublish","_default","exports"],"sourceRoot":"/alx-files_manager/routes/","sources":["index.js"],"sourcesContent":["import { Router } from 'express';\nimport AppController from '../controllers/AppController.js';\nimport UsersController from '../controllers/UsersController.js';\nimport AuthController from '../controllers/AuthController.js';\nimport FilesController from '../controllers/FilesController.js';\n\nconst router = Router();\n\n// App routes\nrouter.get('/status', AppController.getStatus);\nrouter.get('/stats', AppController.getStats);\n\n// User routes\nrouter.post('/users', UsersController.postNew);\nrouter.get('/users/me', UsersController.getMe);\n\n// Auth routes\nrouter.get('/connect', AuthController.getConnect);\nrouter.get('/disconnect', AuthController.getDisconnect);\n\n// Files routes\nrouter.post('/files', FilesController.postUpload);\nrouter.get('/files', FilesController.getIndex);\nrouter.get('/files/:id', FilesController.getShow);\nrouter.get('/files/:id/data', FilesController.getFile);\nrouter.put('/files/:id/publish', FilesController.putPublish);\nrouter.put('/files/:id/unpublish', FilesController.putUnpublish);\n\nexport default router;\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,cAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,gBAAA,GAAAD,sBAAA,CAAAF,OAAA;AACA,IAAAI,eAAA,GAAAF,sBAAA,CAAAF,OAAA;AACA,IAAAK,gBAAA,GAAAH,sBAAA,CAAAF,OAAA;AAAgE,SAAAE,uBAAAI,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAEhE,MAAMG,MAAM,GAAG,IAAAC,eAAM,EAAC,CAAC;;AAEvB;AACAD,MAAM,CAACE,GAAG,CAAC,SAAS,EAAEC,sBAAa,CAACC,SAAS,CAAC;AAC9CJ,MAAM,CAACE,GAAG,CAAC,QAAQ,EAAEC,sBAAa,CAACE,QAAQ,CAAC;;AAE5C;AACAL,MAAM,CAACM,IAAI,CAAC,QAAQ,EAAEC,wBAAe,CAACC,OAAO,CAAC;AAC9CR,MAAM,CAACE,GAAG,CAAC,WAAW,EAAEK,wBAAe,CAACE,KAAK,CAAC;;AAE9C;AACAT,MAAM,CAACE,GAAG,CAAC,UAAU,EAAEQ,uBAAc,CAACC,UAAU,CAAC;AACjDX,MAAM,CAACE,GAAG,CAAC,aAAa,EAAEQ,uBAAc,CAACE,aAAa,CAAC;;AAEvD;AACAZ,MAAM,CAACM,IAAI,CAAC,QAAQ,EAAEO,wBAAe,CAACC,UAAU,CAAC;AACjDd,MAAM,CAACE,GAAG,CAAC,QAAQ,EAAEW,wBAAe,CAACE,QAAQ,CAAC;AAC9Cf,MAAM,CAACE,GAAG,CAAC,YAAY,EAAEW,wBAAe,CAACG,OAAO,CAAC;AACjDhB,MAAM,CAACE,GAAG,CAAC,iBAAiB,EAAEW,wBAAe,CAACI,OAAO,CAAC;AACtDjB,MAAM,CAACkB,GAAG,CAAC,oBAAoB,EAAEL,wBAAe,CAACM,UAAU,CAAC;AAC5DnB,MAAM,CAACkB,GAAG,CAAC,sBAAsB,EAAEL,wBAAe,CAACO,YAAY,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAvB,OAAA,GAElDC,MAAM","ignoreList":[]}},"mtime":1736347787152},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/controllers/AppController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$24\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$25\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-import-attributes\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"deprecatedAssertSyntax\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"109.0.0\",\"edge\":\"130.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"11.0.0\",\"node\":\"10.0.0\",\"opera\":\"114.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"26.0.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":true,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.promise.js\");\nvar _redis = _interopRequireDefault(require(\"../utils/redis.js\"));\nvar _db = _interopRequireDefault(require(\"../utils/db.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nclass AppController {\n  static getStatus(req, res) {\n    const status = {\n      redis: _redis.default.isAlive(),\n      db: _db.default.isAlive()\n    };\n    res.status(200).json(status);\n  }\n  static async getStats(req, res) {\n    const stats = {\n      users: await _db.default.nbUsers(),\n      files: await _db.default.nbFiles()\n    };\n    res.status(200).json(stats);\n  }\n}\nvar _default = exports.default = AppController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVkaXMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9kYiIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIkFwcENvbnRyb2xsZXIiLCJnZXRTdGF0dXMiLCJyZXEiLCJyZXMiLCJzdGF0dXMiLCJyZWRpcyIsInJlZGlzQ2xpZW50IiwiaXNBbGl2ZSIsImRiIiwiZGJDbGllbnQiLCJqc29uIiwiZ2V0U3RhdHMiLCJzdGF0cyIsInVzZXJzIiwibmJVc2VycyIsImZpbGVzIiwibmJGaWxlcyIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2FseC1maWxlc19tYW5hZ2VyL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsiQXBwQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcmVkaXNDbGllbnQgZnJvbSAnLi4vdXRpbHMvcmVkaXMuanMnO1xuaW1wb3J0IGRiQ2xpZW50IGZyb20gJy4uL3V0aWxzL2RiLmpzJztcblxuY2xhc3MgQXBwQ29udHJvbGxlciB7XG4gICAgc3RhdGljIGdldFN0YXR1cyhyZXEsIHJlcykge1xuICAgICAgICBjb25zdCBzdGF0dXMgPSB7XG4gICAgICAgICAgICByZWRpczogcmVkaXNDbGllbnQuaXNBbGl2ZSgpLFxuICAgICAgICAgICAgZGI6IGRiQ2xpZW50LmlzQWxpdmUoKSxcbiAgICAgICAgfTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oc3RhdHVzKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgYXN5bmMgZ2V0U3RhdHMocmVxLCByZXMpIHtcbiAgICAgICAgY29uc3Qgc3RhdHMgPSB7XG4gICAgICAgICAgICB1c2VyczogYXdhaXQgZGJDbGllbnQubmJVc2VycygpLFxuICAgICAgICAgICAgZmlsZXM6IGF3YWl0IGRiQ2xpZW50Lm5iRmlsZXMoKSxcbiAgICAgICAgfTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oc3RhdHMpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBwQ29udHJvbGxlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLEdBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUFzQyxTQUFBRCx1QkFBQUcsQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQUV0QyxNQUFNRyxhQUFhLENBQUM7RUFDaEIsT0FBT0MsU0FBU0EsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUU7SUFDdkIsTUFBTUMsTUFBTSxHQUFHO01BQ1hDLEtBQUssRUFBRUMsY0FBVyxDQUFDQyxPQUFPLENBQUMsQ0FBQztNQUM1QkMsRUFBRSxFQUFFQyxXQUFRLENBQUNGLE9BQU8sQ0FBQztJQUN6QixDQUFDO0lBQ0RKLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDTSxJQUFJLENBQUNOLE1BQU0sQ0FBQztFQUNoQztFQUVBLGFBQWFPLFFBQVFBLENBQUNULEdBQUcsRUFBRUMsR0FBRyxFQUFFO0lBQzVCLE1BQU1TLEtBQUssR0FBRztNQUNWQyxLQUFLLEVBQUUsTUFBTUosV0FBUSxDQUFDSyxPQUFPLENBQUMsQ0FBQztNQUMvQkMsS0FBSyxFQUFFLE1BQU1OLFdBQVEsQ0FBQ08sT0FBTyxDQUFDO0lBQ2xDLENBQUM7SUFDRGIsR0FBRyxDQUFDQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNNLElBQUksQ0FBQ0UsS0FBSyxDQUFDO0VBQy9CO0FBQ0o7QUFBQyxJQUFBSyxRQUFBLEdBQUFDLE9BQUEsQ0FBQW5CLE9BQUEsR0FFY0MsYUFBYSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["_redis","_interopRequireDefault","require","_db","e","__esModule","default","AppController","getStatus","req","res","status","redis","redisClient","isAlive","db","dbClient","json","getStats","stats","users","nbUsers","files","nbFiles","_default","exports"],"sourceRoot":"/alx-files_manager/controllers/","sources":["AppController.js"],"sourcesContent":["import redisClient from '../utils/redis.js';\nimport dbClient from '../utils/db.js';\n\nclass AppController {\n    static getStatus(req, res) {\n        const status = {\n            redis: redisClient.isAlive(),\n            db: dbClient.isAlive(),\n        };\n        res.status(200).json(status);\n    }\n\n    static async getStats(req, res) {\n        const stats = {\n            users: await dbClient.nbUsers(),\n            files: await dbClient.nbFiles(),\n        };\n        res.status(200).json(stats);\n    }\n}\n\nexport default AppController;\n"],"mappings":";;;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,GAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAsC,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAEtC,MAAMG,aAAa,CAAC;EAChB,OAAOC,SAASA,CAACC,GAAG,EAAEC,GAAG,EAAE;IACvB,MAAMC,MAAM,GAAG;MACXC,KAAK,EAAEC,cAAW,CAACC,OAAO,CAAC,CAAC;MAC5BC,EAAE,EAAEC,WAAQ,CAACF,OAAO,CAAC;IACzB,CAAC;IACDJ,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACM,IAAI,CAACN,MAAM,CAAC;EAChC;EAEA,aAAaO,QAAQA,CAACT,GAAG,EAAEC,GAAG,EAAE;IAC5B,MAAMS,KAAK,GAAG;MACVC,KAAK,EAAE,MAAMJ,WAAQ,CAACK,OAAO,CAAC,CAAC;MAC/BC,KAAK,EAAE,MAAMN,WAAQ,CAACO,OAAO,CAAC;IAClC,CAAC;IACDb,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACM,IAAI,CAACE,KAAK,CAAC;EAC/B;AACJ;AAAC,IAAAK,QAAA,GAAAC,OAAA,CAAAnB,OAAA,GAEcC,aAAa","ignoreList":[]}},"mtime":1736348747707},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/utils/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/utils/redis.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$24\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$25\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-import-attributes\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"deprecatedAssertSyntax\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"109.0.0\",\"edge\":\"130.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"11.0.0\",\"node\":\"10.0.0\",\"opera\":\"114.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"26.0.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":true,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.promise.js\");\nvar _redis = _interopRequireDefault(require(\"redis\"));\nvar _util = require(\"util\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nclass RedisClient {\n  constructor() {\n    this.client = _redis.default.createClient({\n      host: process.env.REDIS_HOST || '127.0.0.1',\n      port: process.env.REDIS_PORT || 6379,\n      retry_strategy: options => {\n        if (options.total_retry_time > 1000 * 60 * 60) {\n          return new Error('Retry time exhausted');\n        }\n        return Math.min(options.attempt * 100, 3000);\n      }\n    });\n    this.client.on('error', error => {\n      console.error('Redis client error:', error);\n    });\n  }\n  isAlive() {\n    return this.client.connected;\n  }\n  async get(key) {\n    const asyncGet = (0, _util.promisify)(this.client.get).bind(this.client);\n    return asyncGet(key);\n  }\n  async set(key, value, duration) {\n    const asyncSet = (0, _util.promisify)(this.client.setex).bind(this.client);\n    return asyncSet(key, duration, value);\n  }\n  async del(key) {\n    const asyncDel = (0, _util.promisify)(this.client.del).bind(this.client);\n    return asyncDel(key);\n  }\n}\nconst redisClient = new RedisClient();\nvar _default = exports.default = redisClient;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVkaXMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl91dGlsIiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiUmVkaXNDbGllbnQiLCJjb25zdHJ1Y3RvciIsImNsaWVudCIsInJlZGlzIiwiY3JlYXRlQ2xpZW50IiwiaG9zdCIsInByb2Nlc3MiLCJlbnYiLCJSRURJU19IT1NUIiwicG9ydCIsIlJFRElTX1BPUlQiLCJyZXRyeV9zdHJhdGVneSIsIm9wdGlvbnMiLCJ0b3RhbF9yZXRyeV90aW1lIiwiRXJyb3IiLCJNYXRoIiwibWluIiwiYXR0ZW1wdCIsIm9uIiwiZXJyb3IiLCJjb25zb2xlIiwiaXNBbGl2ZSIsImNvbm5lY3RlZCIsImdldCIsImtleSIsImFzeW5jR2V0IiwicHJvbWlzaWZ5IiwiYmluZCIsInNldCIsInZhbHVlIiwiZHVyYXRpb24iLCJhc3luY1NldCIsInNldGV4IiwiZGVsIiwiYXN5bmNEZWwiLCJyZWRpc0NsaWVudCIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2FseC1maWxlc19tYW5hZ2VyL3V0aWxzLyIsInNvdXJjZXMiOlsicmVkaXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHJlZGlzIGZyb20gJ3JlZGlzJztcbmltcG9ydCB7IHByb21pc2lmeSB9IGZyb20gJ3V0aWwnO1xuXG5jbGFzcyBSZWRpc0NsaWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY2xpZW50ID0gcmVkaXMuY3JlYXRlQ2xpZW50KHtcbiAgICAgIGhvc3Q6IHByb2Nlc3MuZW52LlJFRElTX0hPU1QgfHwgJzEyNy4wLjAuMScsXG4gICAgICBwb3J0OiBwcm9jZXNzLmVudi5SRURJU19QT1JUIHx8IDYzNzksXG4gICAgICByZXRyeV9zdHJhdGVneTogKG9wdGlvbnMpID0+IHtcbiAgICAgICAgaWYgKG9wdGlvbnMudG90YWxfcmV0cnlfdGltZSA+IDEwMDAgKiA2MCAqIDYwKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignUmV0cnkgdGltZSBleGhhdXN0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTWF0aC5taW4ob3B0aW9ucy5hdHRlbXB0ICogMTAwLCAzMDAwKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuY2xpZW50Lm9uKCdlcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcignUmVkaXMgY2xpZW50IGVycm9yOicsIGVycm9yKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlzQWxpdmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50LmNvbm5lY3RlZDtcbiAgfVxuXG4gIGFzeW5jIGdldChrZXkpIHtcbiAgICBjb25zdCBhc3luY0dldCA9IHByb21pc2lmeSh0aGlzLmNsaWVudC5nZXQpLmJpbmQodGhpcy5jbGllbnQpO1xuICAgIHJldHVybiBhc3luY0dldChrZXkpO1xuICB9XG5cbiAgYXN5bmMgc2V0KGtleSwgdmFsdWUsIGR1cmF0aW9uKSB7XG4gICAgY29uc3QgYXN5bmNTZXQgPSBwcm9taXNpZnkodGhpcy5jbGllbnQuc2V0ZXgpLmJpbmQodGhpcy5jbGllbnQpO1xuICAgIHJldHVybiBhc3luY1NldChrZXksIGR1cmF0aW9uLCB2YWx1ZSk7XG4gIH1cblxuICBhc3luYyBkZWwoa2V5KSB7XG4gICAgY29uc3QgYXN5bmNEZWwgPSBwcm9taXNpZnkodGhpcy5jbGllbnQuZGVsKS5iaW5kKHRoaXMuY2xpZW50KTtcbiAgICByZXR1cm4gYXN5bmNEZWwoa2V5KTtcbiAgfVxufVxuXG5jb25zdCByZWRpc0NsaWVudCA9IG5ldyBSZWRpc0NsaWVudCgpO1xuZXhwb3J0IGRlZmF1bHQgcmVkaXNDbGllbnQ7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxNQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxLQUFBLEdBQUFELE9BQUE7QUFBaUMsU0FBQUQsdUJBQUFHLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFFakMsTUFBTUcsV0FBVyxDQUFDO0VBQ2hCQyxXQUFXQSxDQUFBLEVBQUc7SUFDWixJQUFJLENBQUNDLE1BQU0sR0FBR0MsY0FBSyxDQUFDQyxZQUFZLENBQUM7TUFDL0JDLElBQUksRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFVBQVUsSUFBSSxXQUFXO01BQzNDQyxJQUFJLEVBQUVILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRyxVQUFVLElBQUksSUFBSTtNQUNwQ0MsY0FBYyxFQUFHQyxPQUFPLElBQUs7UUFDM0IsSUFBSUEsT0FBTyxDQUFDQyxnQkFBZ0IsR0FBRyxJQUFJLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRTtVQUM3QyxPQUFPLElBQUlDLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQztRQUMxQztRQUNBLE9BQU9DLElBQUksQ0FBQ0MsR0FBRyxDQUFDSixPQUFPLENBQUNLLE9BQU8sR0FBRyxHQUFHLEVBQUUsSUFBSSxDQUFDO01BQzlDO0lBQ0YsQ0FBQyxDQUFDO0lBRUYsSUFBSSxDQUFDZixNQUFNLENBQUNnQixFQUFFLENBQUMsT0FBTyxFQUFHQyxLQUFLLElBQUs7TUFDakNDLE9BQU8sQ0FBQ0QsS0FBSyxDQUFDLHFCQUFxQixFQUFFQSxLQUFLLENBQUM7SUFDN0MsQ0FBQyxDQUFDO0VBQ0o7RUFFQUUsT0FBT0EsQ0FBQSxFQUFHO0lBQ1IsT0FBTyxJQUFJLENBQUNuQixNQUFNLENBQUNvQixTQUFTO0VBQzlCO0VBRUEsTUFBTUMsR0FBR0EsQ0FBQ0MsR0FBRyxFQUFFO0lBQ2IsTUFBTUMsUUFBUSxHQUFHLElBQUFDLGVBQVMsRUFBQyxJQUFJLENBQUN4QixNQUFNLENBQUNxQixHQUFHLENBQUMsQ0FBQ0ksSUFBSSxDQUFDLElBQUksQ0FBQ3pCLE1BQU0sQ0FBQztJQUM3RCxPQUFPdUIsUUFBUSxDQUFDRCxHQUFHLENBQUM7RUFDdEI7RUFFQSxNQUFNSSxHQUFHQSxDQUFDSixHQUFHLEVBQUVLLEtBQUssRUFBRUMsUUFBUSxFQUFFO0lBQzlCLE1BQU1DLFFBQVEsR0FBRyxJQUFBTCxlQUFTLEVBQUMsSUFBSSxDQUFDeEIsTUFBTSxDQUFDOEIsS0FBSyxDQUFDLENBQUNMLElBQUksQ0FBQyxJQUFJLENBQUN6QixNQUFNLENBQUM7SUFDL0QsT0FBTzZCLFFBQVEsQ0FBQ1AsR0FBRyxFQUFFTSxRQUFRLEVBQUVELEtBQUssQ0FBQztFQUN2QztFQUVBLE1BQU1JLEdBQUdBLENBQUNULEdBQUcsRUFBRTtJQUNiLE1BQU1VLFFBQVEsR0FBRyxJQUFBUixlQUFTLEVBQUMsSUFBSSxDQUFDeEIsTUFBTSxDQUFDK0IsR0FBRyxDQUFDLENBQUNOLElBQUksQ0FBQyxJQUFJLENBQUN6QixNQUFNLENBQUM7SUFDN0QsT0FBT2dDLFFBQVEsQ0FBQ1YsR0FBRyxDQUFDO0VBQ3RCO0FBQ0Y7QUFFQSxNQUFNVyxXQUFXLEdBQUcsSUFBSW5DLFdBQVcsQ0FBQyxDQUFDO0FBQUMsSUFBQW9DLFFBQUEsR0FBQUMsT0FBQSxDQUFBdEMsT0FBQSxHQUN2Qm9DLFdBQVciLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_redis","_interopRequireDefault","require","_util","e","__esModule","default","RedisClient","constructor","client","redis","createClient","host","process","env","REDIS_HOST","port","REDIS_PORT","retry_strategy","options","total_retry_time","Error","Math","min","attempt","on","error","console","isAlive","connected","get","key","asyncGet","promisify","bind","set","value","duration","asyncSet","setex","del","asyncDel","redisClient","_default","exports"],"sourceRoot":"/alx-files_manager/utils/","sources":["redis.js"],"sourcesContent":["import redis from 'redis';\nimport { promisify } from 'util';\n\nclass RedisClient {\n  constructor() {\n    this.client = redis.createClient({\n      host: process.env.REDIS_HOST || '127.0.0.1',\n      port: process.env.REDIS_PORT || 6379,\n      retry_strategy: (options) => {\n        if (options.total_retry_time > 1000 * 60 * 60) {\n          return new Error('Retry time exhausted');\n        }\n        return Math.min(options.attempt * 100, 3000);\n      }\n    });\n\n    this.client.on('error', (error) => {\n      console.error('Redis client error:', error);\n    });\n  }\n\n  isAlive() {\n    return this.client.connected;\n  }\n\n  async get(key) {\n    const asyncGet = promisify(this.client.get).bind(this.client);\n    return asyncGet(key);\n  }\n\n  async set(key, value, duration) {\n    const asyncSet = promisify(this.client.setex).bind(this.client);\n    return asyncSet(key, duration, value);\n  }\n\n  async del(key) {\n    const asyncDel = promisify(this.client.del).bind(this.client);\n    return asyncDel(key);\n  }\n}\n\nconst redisClient = new RedisClient();\nexport default redisClient;\n"],"mappings":";;;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AAAiC,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAEjC,MAAMG,WAAW,CAAC;EAChBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,MAAM,GAAGC,cAAK,CAACC,YAAY,CAAC;MAC/BC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,UAAU,IAAI,WAAW;MAC3CC,IAAI,EAAEH,OAAO,CAACC,GAAG,CAACG,UAAU,IAAI,IAAI;MACpCC,cAAc,EAAGC,OAAO,IAAK;QAC3B,IAAIA,OAAO,CAACC,gBAAgB,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE,EAAE;UAC7C,OAAO,IAAIC,KAAK,CAAC,sBAAsB,CAAC;QAC1C;QACA,OAAOC,IAAI,CAACC,GAAG,CAACJ,OAAO,CAACK,OAAO,GAAG,GAAG,EAAE,IAAI,CAAC;MAC9C;IACF,CAAC,CAAC;IAEF,IAAI,CAACf,MAAM,CAACgB,EAAE,CAAC,OAAO,EAAGC,KAAK,IAAK;MACjCC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;IAC7C,CAAC,CAAC;EACJ;EAEAE,OAAOA,CAAA,EAAG;IACR,OAAO,IAAI,CAACnB,MAAM,CAACoB,SAAS;EAC9B;EAEA,MAAMC,GAAGA,CAACC,GAAG,EAAE;IACb,MAAMC,QAAQ,GAAG,IAAAC,eAAS,EAAC,IAAI,CAACxB,MAAM,CAACqB,GAAG,CAAC,CAACI,IAAI,CAAC,IAAI,CAACzB,MAAM,CAAC;IAC7D,OAAOuB,QAAQ,CAACD,GAAG,CAAC;EACtB;EAEA,MAAMI,GAAGA,CAACJ,GAAG,EAAEK,KAAK,EAAEC,QAAQ,EAAE;IAC9B,MAAMC,QAAQ,GAAG,IAAAL,eAAS,EAAC,IAAI,CAACxB,MAAM,CAAC8B,KAAK,CAAC,CAACL,IAAI,CAAC,IAAI,CAACzB,MAAM,CAAC;IAC/D,OAAO6B,QAAQ,CAACP,GAAG,EAAEM,QAAQ,EAAED,KAAK,CAAC;EACvC;EAEA,MAAMI,GAAGA,CAACT,GAAG,EAAE;IACb,MAAMU,QAAQ,GAAG,IAAAR,eAAS,EAAC,IAAI,CAACxB,MAAM,CAAC+B,GAAG,CAAC,CAACN,IAAI,CAAC,IAAI,CAACzB,MAAM,CAAC;IAC7D,OAAOgC,QAAQ,CAACV,GAAG,CAAC;EACtB;AACF;AAEA,MAAMW,WAAW,GAAG,IAAInC,WAAW,CAAC,CAAC;AAAC,IAAAoC,QAAA,GAAAC,OAAA,CAAAtC,OAAA,GACvBoC,WAAW","ignoreList":[]}},"mtime":1736397149828},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/controllers/UsersController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$24\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$25\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-import-attributes\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"deprecatedAssertSyntax\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"109.0.0\",\"edge\":\"130.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"11.0.0\",\"node\":\"10.0.0\",\"opera\":\"114.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"26.0.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":true,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.promise.js\");\nvar _sha = _interopRequireDefault(require(\"sha1\"));\nvar _mongodb = require(\"mongodb\");\nvar _bull = _interopRequireDefault(require(\"bull\"));\nvar _db = _interopRequireDefault(require(\"../utils/db.js\"));\nvar _redis = _interopRequireDefault(require(\"../utils/redis.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst userQueue = new _bull.default('userQueue');\nclass UsersController {\n  static async postNew(req, res) {\n    const {\n      email,\n      password\n    } = req.body;\n    if (!email) {\n      return res.status(400).json({\n        error: 'Missing email'\n      });\n    }\n    if (!password) {\n      return res.status(400).json({\n        error: 'Missing password'\n      });\n    }\n    const existingUser = await _db.default.users.findOne({\n      email\n    });\n    if (existingUser) {\n      return res.status(400).json({\n        error: 'Already exist'\n      });\n    }\n    const hashedPassword = (0, _sha.default)(password);\n    const result = await _db.default.users.insertOne({\n      email,\n      password: hashedPassword\n    });\n    const user = {\n      id: result.insertedId,\n      email\n    };\n\n    // Add welcome email job to queue\n    await userQueue.add({\n      userId: result.insertedId.toString()\n    });\n    return res.status(201).json(user);\n  }\n  static async getMe(req, res) {\n    const token = req.header('X-Token');\n    if (!token) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const userId = await _redis.default.get(\"auth_\".concat(token));\n    if (!userId) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const user = await _db.default.users.findOne({\n      _id: (0, _mongodb.ObjectID)(userId)\n    });\n    if (!user) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    return res.status(200).json({\n      id: user._id,\n      email: user.email\n    });\n  }\n}\nvar _default = exports.default = UsersController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2hhIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbW9uZ29kYiIsIl9idWxsIiwiX2RiIiwiX3JlZGlzIiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwidXNlclF1ZXVlIiwiUXVldWUiLCJVc2Vyc0NvbnRyb2xsZXIiLCJwb3N0TmV3IiwicmVxIiwicmVzIiwiZW1haWwiLCJwYXNzd29yZCIsImJvZHkiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJleGlzdGluZ1VzZXIiLCJkYkNsaWVudCIsInVzZXJzIiwiZmluZE9uZSIsImhhc2hlZFBhc3N3b3JkIiwic2hhMSIsInJlc3VsdCIsImluc2VydE9uZSIsInVzZXIiLCJpZCIsImluc2VydGVkSWQiLCJhZGQiLCJ1c2VySWQiLCJ0b1N0cmluZyIsImdldE1lIiwidG9rZW4iLCJoZWFkZXIiLCJyZWRpc0NsaWVudCIsImdldCIsImNvbmNhdCIsIl9pZCIsIk9iamVjdElEIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvYWx4LWZpbGVzX21hbmFnZXIvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJVc2Vyc0NvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNoYTEgZnJvbSAnc2hhMSc7XG5pbXBvcnQgeyBPYmplY3RJRCB9IGZyb20gJ21vbmdvZGInO1xuaW1wb3J0IFF1ZXVlIGZyb20gJ2J1bGwnO1xuaW1wb3J0IGRiQ2xpZW50IGZyb20gJy4uL3V0aWxzL2RiLmpzJztcbmltcG9ydCByZWRpc0NsaWVudCBmcm9tICcuLi91dGlscy9yZWRpcy5qcyc7XG5cbmNvbnN0IHVzZXJRdWV1ZSA9IG5ldyBRdWV1ZSgndXNlclF1ZXVlJyk7XG5cbmNsYXNzIFVzZXJzQ29udHJvbGxlciB7XG4gICAgc3RhdGljIGFzeW5jIHBvc3ROZXcocmVxLCByZXMpIHtcbiAgICAgICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuXG4gICAgICAgIGlmICghZW1haWwpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTWlzc2luZyBlbWFpbCcgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwYXNzd29yZCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdNaXNzaW5nIHBhc3N3b3JkJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IGRiQ2xpZW50LnVzZXJzLmZpbmRPbmUoeyBlbWFpbCB9KTtcbiAgICAgICAgaWYgKGV4aXN0aW5nVXNlcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdBbHJlYWR5IGV4aXN0JyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gc2hhMShwYXNzd29yZCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiQ2xpZW50LnVzZXJzLmluc2VydE9uZSh7XG4gICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgdXNlciA9IHtcbiAgICAgICAgICAgIGlkOiByZXN1bHQuaW5zZXJ0ZWRJZCxcbiAgICAgICAgICAgIGVtYWlsLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEFkZCB3ZWxjb21lIGVtYWlsIGpvYiB0byBxdWV1ZVxuICAgICAgICBhd2FpdCB1c2VyUXVldWUuYWRkKHsgdXNlcklkOiByZXN1bHQuaW5zZXJ0ZWRJZC50b1N0cmluZygpIH0pO1xuXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih1c2VyKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgYXN5bmMgZ2V0TWUocmVxLCByZXMpIHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuaGVhZGVyKCdYLVRva2VuJyk7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVzZXJJZCA9IGF3YWl0IHJlZGlzQ2xpZW50LmdldChgYXV0aF8ke3Rva2VufWApO1xuICAgICAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGRiQ2xpZW50LnVzZXJzLmZpbmRPbmUoeyBfaWQ6IE9iamVjdElEKHVzZXJJZCkgfSk7XG4gICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgaWQ6IHVzZXIuX2lkLCBlbWFpbDogdXNlci5lbWFpbCB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJzQ29udHJvbGxlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLElBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFFBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLEtBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLEdBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLE1BQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUE0QyxTQUFBRCx1QkFBQU0sQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtB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","map":{"version":3,"names":["_sha","_interopRequireDefault","require","_mongodb","_bull","_db","_redis","e","__esModule","default","userQueue","Queue","UsersController","postNew","req","res","email","password","body","status","json","error","existingUser","dbClient","users","findOne","hashedPassword","sha1","result","insertOne","user","id","insertedId","add","userId","toString","getMe","token","header","redisClient","get","concat","_id","ObjectID","_default","exports"],"sourceRoot":"/alx-files_manager/controllers/","sources":["UsersController.js"],"sourcesContent":["import sha1 from 'sha1';\nimport { ObjectID } from 'mongodb';\nimport Queue from 'bull';\nimport dbClient from '../utils/db.js';\nimport redisClient from '../utils/redis.js';\n\nconst userQueue = new Queue('userQueue');\n\nclass UsersController {\n    static async postNew(req, res) {\n        const { email, password } = req.body;\n\n        if (!email) {\n            return res.status(400).json({ error: 'Missing email' });\n        }\n        if (!password) {\n            return res.status(400).json({ error: 'Missing password' });\n        }\n\n        const existingUser = await dbClient.users.findOne({ email });\n        if (existingUser) {\n            return res.status(400).json({ error: 'Already exist' });\n        }\n\n        const hashedPassword = sha1(password);\n        const result = await dbClient.users.insertOne({\n            email,\n            password: hashedPassword,\n        });\n\n        const user = {\n            id: result.insertedId,\n            email,\n        };\n\n        // Add welcome email job to queue\n        await userQueue.add({ userId: result.insertedId.toString() });\n\n        return res.status(201).json(user);\n    }\n\n    static async getMe(req, res) {\n        const token = req.header('X-Token');\n        if (!token) {\n            return res.status(401).json({ error: 'Unauthorized' });\n        }\n\n        const userId = await redisClient.get(`auth_${token}`);\n        if (!userId) {\n            return res.status(401).json({ error: 'Unauthorized' });\n        }\n\n        const user = await dbClient.users.findOne({ _id: ObjectID(userId) });\n        if (!user) {\n            return res.status(401).json({ error: 'Unauthorized' });\n        }\n\n        return res.status(200).json({ id: user._id, email: user.email });\n    }\n}\n\nexport default UsersController;\n"],"mappings":"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","ignoreList":[]}},"mtime":1736348927686},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/controllers/AuthController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$24\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$25\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-import-attributes\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"deprecatedAssertSyntax\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"109.0.0\",\"edge\":\"130.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"11.0.0\",\"node\":\"10.0.0\",\"opera\":\"114.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"26.0.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":true,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.promise.js\");\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\nvar _sha = _interopRequireDefault(require(\"sha1\"));\nvar _uuid = require(\"uuid\");\nvar _redis = _interopRequireDefault(require(\"../utils/redis.js\"));\nvar _db = _interopRequireDefault(require(\"../utils/db.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nclass AuthController {\n  static async getConnect(req, res) {\n    const authHeader = req.header('Authorization');\n    if (!authHeader || !authHeader.startsWith('Basic ')) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const credentials = Buffer.from(authHeader.split(' ')[1], 'base64').toString('utf-8');\n    const [email, password] = credentials.split(':');\n    if (!email || !password) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const hashedPassword = (0, _sha.default)(password);\n    const user = await _db.default.users.findOne({\n      email,\n      password: hashedPassword\n    });\n    if (!user) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const token = (0, _uuid.v4)();\n    await _redis.default.set(\"auth_\".concat(token), user._id.toString(), 24 * 60 * 60);\n    return res.status(200).json({\n      token\n    });\n  }\n  static async getDisconnect(req, res) {\n    const token = req.header('X-Token');\n    if (!token) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const userId = await _redis.default.get(\"auth_\".concat(token));\n    if (!userId) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    await _redis.default.del(\"auth_\".concat(token));\n    return res.status(204).send();\n  }\n}\nvar _default = exports.default = AuthController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2hhIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfdXVpZCIsIl9yZWRpcyIsIl9kYiIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIkF1dGhDb250cm9sbGVyIiwiZ2V0Q29ubmVjdCIsInJlcSIsInJlcyIsImF1dGhIZWFkZXIiLCJoZWFkZXIiLCJzdGFydHNXaXRoIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiY3JlZGVudGlhbHMiLCJCdWZmZXIiLCJmcm9tIiwic3BsaXQiLCJ0b1N0cmluZyIsImVtYWlsIiwicGFzc3dvcmQiLCJoYXNoZWRQYXNzd29yZCIsInNoYTEiLCJ1c2VyIiwiZGJDbGllbnQiLCJ1c2VycyIsImZpbmRPbmUiLCJ0b2tlbiIsInV1aWR2NCIsInJlZGlzQ2xpZW50Iiwic2V0IiwiY29uY2F0IiwiX2lkIiwiZ2V0RGlzY29ubmVjdCIsInVzZXJJZCIsImdldCIsImRlbCIsInNlbmQiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9hbHgtZmlsZXNfbWFuYWdlci9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbIkF1dGhDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzaGExIGZyb20gJ3NoYTEnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgcmVkaXNDbGllbnQgZnJvbSAnLi4vdXRpbHMvcmVkaXMuanMnO1xuaW1wb3J0IGRiQ2xpZW50IGZyb20gJy4uL3V0aWxzL2RiLmpzJztcblxuY2xhc3MgQXV0aENvbnRyb2xsZXIge1xuICAgIHN0YXRpYyBhc3luYyBnZXRDb25uZWN0KHJlcSwgcmVzKSB7XG4gICAgICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVyKCdBdXRob3JpemF0aW9uJyk7XG4gICAgICAgIGlmICghYXV0aEhlYWRlciB8fCAhYXV0aEhlYWRlci5zdGFydHNXaXRoKCdCYXNpYyAnKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY3JlZGVudGlhbHMgPSBCdWZmZXIuZnJvbShhdXRoSGVhZGVyLnNwbGl0KCcgJylbMV0sICdiYXNlNjQnKS50b1N0cmluZygndXRmLTgnKTtcbiAgICAgICAgY29uc3QgW2VtYWlsLCBwYXNzd29yZF0gPSBjcmVkZW50aWFscy5zcGxpdCgnOicpO1xuXG4gICAgICAgIGlmICghZW1haWwgfHwgIXBhc3N3b3JkKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IHNoYTEocGFzc3dvcmQpO1xuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgZGJDbGllbnQudXNlcnMuZmluZE9uZSh7IGVtYWlsLCBwYXNzd29yZDogaGFzaGVkUGFzc3dvcmQgfSk7XG5cbiAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0b2tlbiA9IHV1aWR2NCgpO1xuICAgICAgICBhd2FpdCByZWRpc0NsaWVudC5zZXQoYGF1dGhfJHt0b2tlbn1gLCB1c2VyLl9pZC50b1N0cmluZygpLCAyNCAqIDYwICogNjApO1xuXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHRva2VuIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyBhc3luYyBnZXREaXNjb25uZWN0KHJlcSwgcmVzKSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcignWC1Ub2tlbicpO1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1c2VySWQgPSBhd2FpdCByZWRpc0NsaWVudC5nZXQoYGF1dGhfJHt0b2tlbn1gKTtcbiAgICAgICAgaWYgKCF1c2VySWQpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHJlZGlzQ2xpZW50LmRlbChgYXV0aF8ke3Rva2VufWApO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDQpLnNlbmQoKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEF1dGhDb250cm9sbGVyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQUFBLElBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLEtBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLE1BQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLEdBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUFzQyxTQUFBRCx1QkFBQUssQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQUV0QyxNQUFNRyxjQUFjLENBQUM7RUFDakIsYUFBYUMsVUFBVUEsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUU7SUFDOUIsTUFBTUMsVUFBVSxHQUFHRixHQUFHLENBQUNHLE1BQU0sQ0FBQyxlQUFlLENBQUM7SUFDOUMsSUFBSSxDQUFDRCxVQUFVLElBQUksQ0FBQ0EsVUFBVSxDQUFDRSxVQUFVLENBQUMsUUFBUSxDQUFDLEVBQUU7TUFDakQsT0FBT0gsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxLQUFLLEVBQUU7TUFBZSxD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","map":{"version":3,"names":["_sha","_interopRequireDefault","require","_uuid","_redis","_db","e","__esModule","default","AuthController","getConnect","req","res","authHeader","header","startsWith","status","json","error","credentials","Buffer","from","split","toString","email","password","hashedPassword","sha1","user","dbClient","users","findOne","token","uuidv4","redisClient","set","concat","_id","getDisconnect","userId","get","del","send","_default","exports"],"sourceRoot":"/alx-files_manager/controllers/","sources":["AuthController.js"],"sourcesContent":["import sha1 from 'sha1';\nimport { v4 as uuidv4 } from 'uuid';\nimport redisClient from '../utils/redis.js';\nimport dbClient from '../utils/db.js';\n\nclass AuthController {\n    static async getConnect(req, res) {\n        const authHeader = req.header('Authorization');\n        if (!authHeader || !authHeader.startsWith('Basic ')) {\n            return res.status(401).json({ error: 'Unauthorized' });\n        }\n\n        const credentials = Buffer.from(authHeader.split(' ')[1], 'base64').toString('utf-8');\n        const [email, password] = credentials.split(':');\n\n        if (!email || !password) {\n            return res.status(401).json({ error: 'Unauthorized' });\n        }\n\n        const hashedPassword = sha1(password);\n        const user = await dbClient.users.findOne({ email, password: hashedPassword });\n\n        if (!user) {\n            return res.status(401).json({ error: 'Unauthorized' });\n        }\n\n        const token = uuidv4();\n        await redisClient.set(`auth_${token}`, user._id.toString(), 24 * 60 * 60);\n\n        return res.status(200).json({ token });\n    }\n\n    static async getDisconnect(req, res) {\n        const token = req.header('X-Token');\n        if (!token) {\n            return res.status(401).json({ error: 'Unauthorized' });\n        }\n\n        const userId = await redisClient.get(`auth_${token}`);\n        if (!userId) {\n            return res.status(401).json({ error: 'Unauthorized' });\n        }\n\n        await redisClient.del(`auth_${token}`);\n        return res.status(204).send();\n    }\n}\n\nexport default AuthController;\n"],"mappings":"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","ignoreList":[]}},"mtime":1736349097437},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/controllers/FilesController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$24\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$25\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-import-attributes\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"deprecatedAssertSyntax\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"109.0.0\",\"edge\":\"130.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"11.0.0\",\"node\":\"10.0.0\",\"opera\":\"114.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"26.0.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":true,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.promise.js\");\nvar _mongodb = require(\"mongodb\");\nvar _fs = _interopRequireDefault(require(\"fs\"));\nvar _uuid = require(\"uuid\");\nvar _mimeTypes = _interopRequireDefault(require(\"mime-types\"));\nvar _bull = _interopRequireDefault(require(\"bull\"));\nvar _db = _interopRequireDefault(require(\"../utils/db.js\"));\nvar _redis = _interopRequireDefault(require(\"../utils/redis.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst fileQueue = new _bull.default('fileQueue');\nconst FOLDER_PATH = process.env.FOLDER_PATH || '/tmp/files_manager';\nclass FilesController {\n  static async postUpload(req, res) {\n    const token = req.header('X-Token');\n    if (!token) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const userId = await _redis.default.get(\"auth_\".concat(token));\n    if (!userId) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const {\n      name,\n      type,\n      parentId = '0',\n      isPublic = false,\n      data\n    } = req.body;\n    if (!name) {\n      return res.status(400).json({\n        error: 'Missing name'\n      });\n    }\n    if (!type || !['folder', 'file', 'image'].includes(type)) {\n      return res.status(400).json({\n        error: 'Missing type'\n      });\n    }\n    if (!data && type !== 'folder') {\n      return res.status(400).json({\n        error: 'Missing data'\n      });\n    }\n    if (parentId !== '0') {\n      const parent = await _db.default.files.findOne({\n        _id: (0, _mongodb.ObjectID)(parentId)\n      });\n      if (!parent) {\n        return res.status(400).json({\n          error: 'Parent not found'\n        });\n      }\n      if (parent.type !== 'folder') {\n        return res.status(400).json({\n          error: 'Parent is not a folder'\n        });\n      }\n    }\n    const fileDocument = {\n      userId: (0, _mongodb.ObjectID)(userId),\n      name,\n      type,\n      isPublic,\n      parentId: parentId === '0' ? 0 : (0, _mongodb.ObjectID)(parentId)\n    };\n    if (type === 'folder') {\n      const result = await _db.default.files.insertOne(fileDocument);\n      return res.status(201).json({\n        id: result.insertedId,\n        userId: fileDocument.userId,\n        name,\n        type,\n        isPublic,\n        parentId: fileDocument.parentId\n      });\n    }\n\n    // Create storage folder if it doesn't exist\n    if (!_fs.default.existsSync(FOLDER_PATH)) {\n      _fs.default.mkdirSync(FOLDER_PATH, {\n        recursive: true\n      });\n    }\n\n    // Save file content\n    const fileUuid = (0, _uuid.v4)();\n    const localPath = \"\".concat(FOLDER_PATH, \"/\").concat(fileUuid);\n    const fileContent = Buffer.from(data, 'base64');\n    _fs.default.writeFileSync(localPath, fileContent);\n    fileDocument.localPath = localPath;\n    const result = await _db.default.files.insertOne(fileDocument);\n\n    // Add thumbnail generation job for images\n    if (type === 'image') {\n      await fileQueue.add({\n        userId: userId.toString(),\n        fileId: result.insertedId.toString()\n      });\n    }\n    return res.status(201).json({\n      id: result.insertedId,\n      userId: fileDocument.userId,\n      name,\n      type,\n      isPublic,\n      parentId: fileDocument.parentId\n    });\n  }\n  static async getShow(req, res) {\n    const token = req.header('X-Token');\n    if (!token) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const userId = await _redis.default.get(\"auth_\".concat(token));\n    if (!userId) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const fileId = req.params.id;\n    const file = await _db.default.files.findOne({\n      _id: (0, _mongodb.ObjectID)(fileId),\n      userId: (0, _mongodb.ObjectID)(userId)\n    });\n    if (!file) {\n      return res.status(404).json({\n        error: 'Not found'\n      });\n    }\n    return res.status(200).json({\n      id: file._id,\n      userId: file.userId,\n      name: file.name,\n      type: file.type,\n      isPublic: file.isPublic,\n      parentId: file.parentId\n    });\n  }\n  static async getIndex(req, res) {\n    const token = req.header('X-Token');\n    if (!token) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const userId = await _redis.default.get(\"auth_\".concat(token));\n    if (!userId) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const parentId = req.query.parentId || '0';\n    const page = parseInt(req.query.page) || 0;\n    const pageSize = 20;\n    const query = {\n      userId: (0, _mongodb.ObjectID)(userId),\n      parentId: parentId === '0' ? 0 : (0, _mongodb.ObjectID)(parentId)\n    };\n    const files = await _db.default.files.aggregate([{\n      $match: query\n    }, {\n      $skip: page * pageSize\n    }, {\n      $limit: pageSize\n    }]).toArray();\n    return res.status(200).json(files.map(file => ({\n      id: file._id,\n      userId: file.userId,\n      name: file.name,\n      type: file.type,\n      isPublic: file.isPublic,\n      parentId: file.parentId\n    })));\n  }\n  static async putPublish(req, res) {\n    const token = req.header('X-Token');\n    if (!token) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const userId = await _redis.default.get(\"auth_\".concat(token));\n    if (!userId) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const fileId = req.params.id;\n    const file = await _db.default.files.findOneAndUpdate({\n      _id: (0, _mongodb.ObjectID)(fileId),\n      userId: (0, _mongodb.ObjectID)(userId)\n    }, {\n      $set: {\n        isPublic: true\n      }\n    }, {\n      returnDocument: 'after'\n    });\n    if (!file.value) {\n      return res.status(404).json({\n        error: 'Not found'\n      });\n    }\n    return res.status(200).json({\n      id: file.value._id,\n      userId: file.value.userId,\n      name: file.value.name,\n      type: file.value.type,\n      isPublic: true,\n      parentId: file.value.parentId\n    });\n  }\n  static async putUnpublish(req, res) {\n    const token = req.header('X-Token');\n    if (!token) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const userId = await _redis.default.get(\"auth_\".concat(token));\n    if (!userId) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const fileId = req.params.id;\n    const file = await _db.default.files.findOneAndUpdate({\n      _id: (0, _mongodb.ObjectID)(fileId),\n      userId: (0, _mongodb.ObjectID)(userId)\n    }, {\n      $set: {\n        isPublic: false\n      }\n    }, {\n      returnDocument: 'after'\n    });\n    if (!file.value) {\n      return res.status(404).json({\n        error: 'Not found'\n      });\n    }\n    return res.status(200).json({\n      id: file.value._id,\n      userId: file.value.userId,\n      name: file.value.name,\n      type: file.value.type,\n      isPublic: false,\n      parentId: file.value.parentId\n    });\n  }\n  static async getFile(req, res) {\n    const fileId = req.params.id;\n    const size = req.query.size;\n    const file = await _db.default.files.findOne({\n      _id: (0, _mongodb.ObjectID)(fileId)\n    });\n    if (!file) {\n      return res.status(404).json({\n        error: 'Not found'\n      });\n    }\n    const token = req.header('X-Token');\n    const userId = token ? await _redis.default.get(\"auth_\".concat(token)) : null;\n    if (!file.isPublic && (!userId || userId !== file.userId.toString())) {\n      return res.status(404).json({\n        error: 'Not found'\n      });\n    }\n    if (file.type === 'folder') {\n      return res.status(400).json({\n        error: \"A folder doesn't have content\"\n      });\n    }\n    let filePath = file.localPath;\n    if (size) {\n      filePath = \"\".concat(file.localPath, \"_\").concat(size);\n    }\n    if (!_fs.default.existsSync(filePath)) {\n      return res.status(404).json({\n        error: 'Not found'\n      });\n    }\n    const mimeType = _mimeTypes.default.lookup(file.name);\n    res.setHeader('Content-Type', mimeType);\n    return res.sendFile(filePath);\n  }\n}\nvar _default = exports.default = FilesController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29kYiIsInJlcXVpcmUiLCJfZnMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX3V1aWQiLCJfbWltZVR5cGVzIiwiX2J1bGwiLCJfZGIiLCJfcmVkaXMiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJmaWxlUXVldWUiLCJRdWV1ZSIsIkZPTERFUl9QQVRIIiwicHJvY2VzcyIsImVudiIsIkZpbGVzQ29udHJvbGxlciIsInBvc3RVcGxvYWQiLCJyZXEiLCJyZXMiLCJ0b2tlbiIsImhlYWRlciIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInVzZXJJZCIsInJlZGlzQ2xpZW50IiwiZ2V0IiwiY29uY2F0IiwibmFtZSIsInR5cGUiLCJwYXJlbnRJZCIsImlzUHVibGljIiwiZGF0YSIsImJvZHkiLCJpbmNsdWRlcyIsInBhcmVudCIsImRiQ2xpZW50IiwiZmlsZXMiLCJmaW5kT25lIiwiX2lkIiwiT2JqZWN0SUQiLCJmaWxlRG9jdW1lbnQiLCJyZXN1bHQiLCJpbnNlcnRPbmUiLCJpZCIsImluc2VydGVkSWQiLCJmcyIsImV4aXN0c1N5bmMiLCJta2RpclN5bmMiLCJyZWN1cnNpdmUiLCJmaWxlVXVpZCIsInV1aWR2NCIsImxvY2FsUGF0aCIsImZpbGVDb250ZW50IiwiQnVmZmVyIiwiZnJvbSIsIndyaXRlRmlsZVN5bmMiLCJhZGQiLCJ0b1N0cmluZyIsImZpbGVJZCIsImdldFNob3ciLCJwYXJhbXMiLCJmaWxlIiwiZ2V0SW5kZXgiLCJxdWVyeSIsInBhZ2UiLCJwYXJzZUludCIsInBhZ2VTaXplIiwiYWdncmVnYXRlIiwiJG1hdGNoIiwiJHNraXAiLCIkbGltaXQiLCJ0b0FycmF5IiwibWFwIiwicHV0UHVibGlzaCIsImZpbmRPbmVBbmRVcGRhdGUiLCIkc2V0IiwicmV0dXJuRG9jdW1lbnQiLCJ2YWx1ZSIsInB1dFVucHVibGlzaCIsImdldEZpbGUiLCJzaXplIiwiZmlsZVBhdGgiLCJtaW1lVHlwZSIsIm1pbWUiLCJsb29rdXAiLCJzZXRIZWFkZXIiLCJzZW5kRmlsZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2FseC1maWxlc19tYW5hZ2VyL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsiRmlsZXNDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9iamVjdElEIH0gZnJvbSAnbW9uZ29kYic7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgbWltZSBmcm9tICdtaW1lLXR5cGVzJztcbmltcG9ydCBRdWV1ZSBmcm9tICdidWxsJztcbmltcG9ydCBkYkNsaWVudCBmcm9tICcuLi91dGlscy9kYi5qcyc7XG5pbXBvcnQgcmVkaXNDbGllbnQgZnJvbSAnLi4vdXRpbHMvcmVkaXMuanMnO1xuXG5jb25zdCBmaWxlUXVldWUgPSBuZXcgUXVldWUoJ2ZpbGVRdWV1ZScpO1xuY29uc3QgRk9MREVSX1BBVEggPSBwcm9jZXNzLmVudi5GT0xERVJfUEFUSCB8fCAnL3RtcC9maWxlc19tYW5hZ2VyJztcblxuY2xhc3MgRmlsZXNDb250cm9sbGVyIHtcbiAgICBzdGF0aWMgYXN5bmMgcG9zdFVwbG9hZChyZXEsIHJlcykge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5oZWFkZXIoJ1gtVG9rZW4nKTtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdXNlcklkID0gYXdhaXQgcmVkaXNDbGllbnQuZ2V0KGBhdXRoXyR7dG9rZW59YCk7XG4gICAgICAgIGlmICghdXNlcklkKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IG5hbWUsIHR5cGUsIHBhcmVudElkID0gJzAnLCBpc1B1YmxpYyA9IGZhbHNlLCBkYXRhIH0gPSByZXEuYm9keTtcblxuICAgICAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTWlzc2luZyBuYW1lJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdHlwZSB8fCAhWydmb2xkZXInLCAnZmlsZScsICdpbWFnZSddLmluY2x1ZGVzKHR5cGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ01pc3NpbmcgdHlwZScgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWRhdGEgJiYgdHlwZSAhPT0gJ2ZvbGRlcicpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTWlzc2luZyBkYXRhJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXJlbnRJZCAhPT0gJzAnKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBhd2FpdCBkYkNsaWVudC5maWxlcy5maW5kT25lKHsgX2lkOiBPYmplY3RJRChwYXJlbnRJZCkgfSk7XG4gICAgICAgICAgICBpZiAoIXBhcmVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnUGFyZW50IG5vdCBmb3VuZCcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyZW50LnR5cGUgIT09ICdmb2xkZXInKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdQYXJlbnQgaXMgbm90IGEgZm9sZGVyJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZpbGVEb2N1bWVudCA9IHtcbiAgICAgICAgICAgIHVzZXJJZDogT2JqZWN0SUQodXNlcklkKSxcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgaXNQdWJsaWMsXG4gICAgICAgICAgICBwYXJlbnRJZDogcGFyZW50SWQgPT09ICcwJyA/IDAgOiBPYmplY3RJRChwYXJlbnRJZCksXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHR5cGUgPT09ICdmb2xkZXInKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYkNsaWVudC5maWxlcy5pbnNlcnRPbmUoZmlsZURvY3VtZW50KTtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICAgICAgICAgICAgaWQ6IHJlc3VsdC5pbnNlcnRlZElkLFxuICAgICAgICAgICAgICAgIHVzZXJJZDogZmlsZURvY3VtZW50LnVzZXJJZCxcbiAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgICAgaXNQdWJsaWMsXG4gICAgICAgICAgICAgICAgcGFyZW50SWQ6IGZpbGVEb2N1bWVudC5wYXJlbnRJZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXRlIHN0b3JhZ2UgZm9sZGVyIGlmIGl0IGRvZXNuJ3QgZXhpc3RcbiAgICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKEZPTERFUl9QQVRIKSkge1xuICAgICAgICAgICAgZnMubWtkaXJTeW5jKEZPTERFUl9QQVRILCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNhdmUgZmlsZSBjb250ZW50XG4gICAgICAgIGNvbnN0IGZpbGVVdWlkID0gdXVpZHY0KCk7XG4gICAgICAgIGNvbnN0IGxvY2FsUGF0aCA9IGAke0ZPTERFUl9QQVRIfS8ke2ZpbGVVdWlkfWA7XG4gICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gQnVmZmVyLmZyb20oZGF0YSwgJ2Jhc2U2NCcpO1xuICAgICAgICBmcy53cml0ZUZpbGVTeW5jKGxvY2FsUGF0aCwgZmlsZUNvbnRlbnQpO1xuXG4gICAgICAgIGZpbGVEb2N1bWVudC5sb2NhbFBhdGggPSBsb2NhbFBhdGg7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiQ2xpZW50LmZpbGVzLmluc2VydE9uZShmaWxlRG9jdW1lbnQpO1xuXG4gICAgICAgIC8vIEFkZCB0aHVtYm5haWwgZ2VuZXJhdGlvbiBqb2IgZm9yIGltYWdlc1xuICAgICAgICBpZiAodHlwZSA9PT0gJ2ltYWdlJykge1xuICAgICAgICAgICAgYXdhaXQgZmlsZVF1ZXVlLmFkZCh7XG4gICAgICAgICAgICAgICAgdXNlcklkOiB1c2VySWQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBmaWxlSWQ6IHJlc3VsdC5pbnNlcnRlZElkLnRvU3RyaW5nKCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICAgICAgICBpZDogcmVzdWx0Lmluc2VydGVkSWQsXG4gICAgICAgICAgICB1c2VySWQ6IGZpbGVEb2N1bWVudC51c2VySWQsXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgIGlzUHVibGljLFxuICAgICAgICAgICAgcGFyZW50SWQ6IGZpbGVEb2N1bWVudC5wYXJlbnRJZCxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGFzeW5jIGdldFNob3cocmVxLCByZXMpIHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuaGVhZGVyKCdYLVRva2VuJyk7XG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVzZXJJZCA9IGF3YWl0IHJlZGlzQ2xpZW50LmdldChgYXV0aF8ke3Rva2VufWApO1xuICAgICAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmlsZUlkID0gcmVxLnBhcmFtcy5pZDtcbiAgICAgICAgY29uc3QgZmlsZSA9IGF3YWl0IGRiQ2xpZW50LmZpbGVzLmZpbmRPbmUoe1xuICAgICAgICAgICAgX2lkOiBPYmplY3RJRChmaWxlSWQpLFxuICAgICAgICAgICAgdXNlcklkOiBPYmplY3RJRCh1c2VySWQpLFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIWZpbGUpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnTm90IGZvdW5kJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICBpZDogZmlsZS5faWQsXG4gICAgICAgICAgICB1c2VySWQ6IGZpbGUudXNlcklkLFxuICAgICAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICAgICAgdHlwZTogZmlsZS50eXBlLFxuICAgICAgICAgICAgaXNQdWJsaWM6IGZpbGUuaXNQdWJsaWMsXG4gICAgICAgICAgICBwYXJlbnRJZDogZmlsZS5wYXJlbnRJZCxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGFzeW5jIGdldEluZGV4KHJlcSwgcmVzKSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcignWC1Ub2tlbicpO1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1c2VySWQgPSBhd2FpdCByZWRpc0NsaWVudC5nZXQoYGF1dGhfJHt0b2tlbn1gKTtcbiAgICAgICAgaWYgKCF1c2VySWQpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBhcmVudElkID0gcmVxLnF1ZXJ5LnBhcmVudElkIHx8ICcwJztcbiAgICAgICAgY29uc3QgcGFnZSA9IHBhcnNlSW50KHJlcS5xdWVyeS5wYWdlKSB8fCAwO1xuICAgICAgICBjb25zdCBwYWdlU2l6ZSA9IDIwO1xuXG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0ge1xuICAgICAgICAgICAgdXNlcklkOiBPYmplY3RJRCh1c2VySWQpLFxuICAgICAgICAgICAgcGFyZW50SWQ6IHBhcmVudElkID09PSAnMCcgPyAwIDogT2JqZWN0SUQocGFyZW50SWQpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGZpbGVzID0gYXdhaXQgZGJDbGllbnQuZmlsZXNcbiAgICAgICAgICAgIC5hZ2dyZWdhdGUoW1xuICAgICAgICAgICAgICAgIHsgJG1hdGNoOiBxdWVyeSB9LFxuICAgICAgICAgICAgICAgIHsgJHNraXA6IHBhZ2UgKiBwYWdlU2l6ZSB9LFxuICAgICAgICAgICAgICAgIHsgJGxpbWl0OiBwYWdlU2l6ZSB9LFxuICAgICAgICAgICAgXSlcbiAgICAgICAgICAgIC50b0FycmF5KCk7XG5cbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKFxuICAgICAgICAgICAgZmlsZXMubWFwKChmaWxlKSA9PiAoe1xuICAgICAgICAgICAgICAgIGlkOiBmaWxlLl9pZCxcbiAgICAgICAgICAgICAgICB1c2VySWQ6IGZpbGUudXNlcklkLFxuICAgICAgICAgICAgICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBmaWxlLnR5cGUsXG4gICAgICAgICAgICAgICAgaXNQdWJsaWM6IGZpbGUuaXNQdWJsaWMsXG4gICAgICAgICAgICAgICAgcGFyZW50SWQ6IGZpbGUucGFyZW50SWQsXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgYXN5bmMgcHV0UHVibGlzaChyZXEsIHJlcykge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5oZWFkZXIoJ1gtVG9rZW4nKTtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdXNlcklkID0gYXdhaXQgcmVkaXNDbGllbnQuZ2V0KGBhdXRoXyR7dG9rZW59YCk7XG4gICAgICAgIGlmICghdXNlcklkKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaWxlSWQgPSByZXEucGFyYW1zLmlkO1xuICAgICAgICBjb25zdCBmaWxlID0gYXdhaXQgZGJDbGllbnQuZmlsZXMuZmluZE9uZUFuZFVwZGF0ZShcbiAgICAgICAgICAgIHsgX2lkOiBPYmplY3RJRChmaWxlSWQpLCB1c2VySWQ6IE9iamVjdElEKHVzZXJJZCkgfSxcbiAgICAgICAgICAgIHsgJHNldDogeyBpc1B1YmxpYzogdHJ1ZSB9IH0sXG4gICAgICAgICAgICB7IHJldHVybkRvY3VtZW50OiAnYWZ0ZXInIH1cbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoIWZpbGUudmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnTm90IGZvdW5kJyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgICBpZDogZmlsZS52YWx1ZS5faWQsXG4gICAgICAgICAgICB1c2VySWQ6IGZpbGUudmFsdWUudXNlcklkLFxuICAgICAgICAgICAgbmFtZTogZmlsZS52YWx1ZS5uYW1lLFxuICAgICAgICAgICAgdHlwZTogZmlsZS52YWx1ZS50eXBlLFxuICAgICAgICAgICAgaXNQdWJsaWM6IHRydWUsXG4gICAgICAgICAgICBwYXJlbnRJZDogZmlsZS52YWx1ZS5wYXJlbnRJZCxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGFzeW5jIHB1dFVucHVibGlzaChyZXEsIHJlcykge1xuICAgICAgICBjb25zdCB0b2tlbiA9IHJlcS5oZWFkZXIoJ1gtVG9rZW4nKTtcbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdXNlcklkID0gYXdhaXQgcmVkaXNDbGllbnQuZ2V0KGBhdXRoXyR7dG9rZW59YCk7XG4gICAgICAgIGlmICghdXNlcklkKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaWxlSWQgPSByZXEucGFyYW1zLmlkO1xuICAgICAgICBjb25zdCBmaWxlID0gYXdhaXQgZGJDbGllbnQuZmlsZXMuZmluZE9uZUFuZFVwZGF0ZShcbiAgICAgICAgICAgIHsgX2lkOiBPYmplY3RJRChmaWxlSWQpLCB1c2VySWQ6IE9iamVjdElEKHVzZXJJZCkgfSxcbiAgICAgICAgICAgIHsgJHNldDogeyBpc1B1YmxpYzogZmFsc2UgfSB9LFxuICAgICAgICAgICAgeyByZXR1cm5Eb2N1bWVudDogJ2FmdGVyJyB9XG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKCFmaWxlLnZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ05vdCBmb3VuZCcgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgICAgaWQ6IGZpbGUudmFsdWUuX2lkLFxuICAgICAgICAgICAgdXNlcklkOiBmaWxlLnZhbHVlLnVzZXJJZCxcbiAgICAgICAgICAgIG5hbWU6IGZpbGUudmFsdWUubmFtZSxcbiAgICAgICAgICAgIHR5cGU6IGZpbGUudmFsdWUudHlwZSxcbiAgICAgICAgICAgIGlzUHVibGljOiBmYWxzZSxcbiAgICAgICAgICAgIHBhcmVudElkOiBmaWxlLnZhbHVlLnBhcmVudElkLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgYXN5bmMgZ2V0RmlsZShyZXEsIHJlcykge1xuICAgICAgICBjb25zdCBmaWxlSWQgPSByZXEucGFyYW1zLmlkO1xuICAgICAgICBjb25zdCBzaXplID0gcmVxLnF1ZXJ5LnNpemU7XG5cbiAgICAgICAgY29uc3QgZmlsZSA9IGF3YWl0IGRiQ2xpZW50LmZpbGVzLmZpbmRPbmUoeyBfaWQ6IE9iamVjdElEKGZpbGVJZCkgfSk7XG4gICAgICAgIGlmICghZmlsZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdOb3QgZm91bmQnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuaGVhZGVyKCdYLVRva2VuJyk7XG4gICAgICAgIGNvbnN0IHVzZXJJZCA9IHRva2VuID8gYXdhaXQgcmVkaXNDbGllbnQuZ2V0KGBhdXRoXyR7dG9rZW59YCkgOiBudWxsO1xuXG4gICAgICAgIGlmICghZmlsZS5pc1B1YmxpYyAmJiAoIXVzZXJJZCB8fCB1c2VySWQgIT09IGZpbGUudXNlcklkLnRvU3RyaW5nKCkpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ05vdCBmb3VuZCcgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmlsZS50eXBlID09PSAnZm9sZGVyJykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQSBmb2xkZXIgZG9lc24ndCBoYXZlIGNvbnRlbnRcIiB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBmaWxlUGF0aCA9IGZpbGUubG9jYWxQYXRoO1xuICAgICAgICBpZiAoc2l6ZSkge1xuICAgICAgICAgICAgZmlsZVBhdGggPSBgJHtmaWxlLmxvY2FsUGF0aH1fJHtzaXplfWA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoZmlsZVBhdGgpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ05vdCBmb3VuZCcgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtaW1lVHlwZSA9IG1pbWUubG9va3VwKGZpbGUubmFtZSk7XG5cdHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsIG1pbWVUeXBlKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zZW5kRmlsZShmaWxlUGF0aCk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGaWxlc0NvbnRyb2xsZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxHQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBRyxLQUFBLEdBQUFILE9BQUE7QUFDQSxJQUFBSSxVQUFBLEdBQUFGLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBSyxLQUFBLEdBQUFILHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBTSxHQUFBLEdBQUFKLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBTyxNQUFBLEdBQUFMLHNCQUFBLENBQUFGLE9BQUE7QUFBNEMsU0FBQUUsdUJBQUFNLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFFNUMsTUFBTUcsU0FBUyxHQUFHLElBQUlDLGFBQUssQ0FBQyxXQUFXLENBQUM7QUFDeEMsTUFBTUMsV0FBVyxHQUFHQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0YsV0FBVyxJQUFJLG9CQUFvQjtBQUVuRSxNQUFNRyxlQUFlLENBQUM7RUFDbEIsYUFBYUMsVUFBVUEsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUU7SUFDOUIsTUFBTUMsS0FBSyxHQUFHRixHQUFHLENBQUNHLE1BQU0sQ0FBQyxTQUFTLENBQUM7SUFDbkMsSUFBSSxDQUFDRCxLQUFLLEVBQUU7TUFDUixPQUFPRCxHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLEtBQUssRUFBRTtNQUFlLENBQUMsQ0FBQztJQUMxRDtJQUVBLE1BQU1DLE1BQU0sR0FBRyxNQUFNQyxjQUFXLENBQUNDLEdBQUcsU0FBQUMsTUFBQSxDQUFTUixLQUFLLENBQUUsQ0FBQztJQUNyRCxJQUFJLENBQUNLLE1BQU0sRUFBRTtNQUNULE9BQU9OLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsS0FBSyxFQUFFO01BQWUsQ0FBQyxDQUFDO0lBQzFEO0lBRUEsTUFBTTtNQUFFSyxJQUFJO01BQUVDLElBQUk7TUFBRUMsUUFBUSxHQUFHLEdBQUc7TUFBRUMsUUFBUSxHQUFHLEtBQUs7TUFBRUM7SUFBSyxDQUFDLEdBQUdmLEdBQUcsQ0FBQ2dCLElBQUk7SUFFdkUsSUFBSSxDQUFDTCxJQUFJLEVBQUU7TUFDUCxPQUFPVixHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLEtBQUssRUFBRTtNQUFlLENBQUMsQ0FBQztJQUMxRDtJQUVBLElBQUksQ0FBQ00sSUFBSSxJQUFJLENBQUMsQ0FBQyxRQUFRLEVBQUUsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDSyxRQUFRLENBQUNMLElBQUksQ0FBQyxFQUFFO01BQ3RELE9BQU9YLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsS0FBSyxFQUFFO01BQWUsQ0FBQyxDQUFDO0lBQzFEO0lBRUEsSUFBSSxDQUFDUyxJQUFJLElBQUlILElBQUksS0FBSyxRQUFRLEVBQUU7TUFDNUIsT0FBT1gsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxLQUFLLEVBQUU7TUFBZSxDQUFDLENBQUM7SUFDMUQ7SUFFQSxJQUFJTyxRQUFRLEtBQUssR0FBRyxFQUFFO01BQ2xCLE1BQU1LLE1BQU0sR0FBRyxNQUFNQyxXQUFRLENBQUNDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDO1FBQUVDLEdBQUcsRUFBRSxJQUFBQyxpQkFBUSxFQUFDVixRQUFRO01BQUUsQ0FBQyxDQUFDO01BQ3hFLElBQUksQ0FBQ0ssTUFBTSxFQUFFO1FBQ1QsT0FBT2pCLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7VUFBRUMsS0FBSyxFQUFFO1FBQW1CLENBQUMsQ0FBQztNQUM5RDtNQUNBLElBQUlZLE1BQU0sQ0FBQ04sSUFBSSxLQUFLLFFBQVEsRUFBRTtRQUMxQixPQUFPWCxHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1VBQUVDLEtBQUssRUFBRTtRQUF5QixDQUFDLENBQUM7TUFDcEU7SUFDSjtJQUVBLE1BQU1rQixZQUFZLEdBQUc7TUFDakJqQixNQUFNLEVBQUUsSUFBQWdCLGlCQUFRLEVBQUNoQixNQUFNLENBQUM7TUFDeEJJLElBQUk7TUFDSkMsSUFBSTtNQUNKRSxRQUFRO01BQ1JELFFBQVEsRUFBRUEsUUFBUSxLQUFLLEdBQUcsR0FBRyxDQUFDLEdBQUcsSUFBQVUsaUJBQVEsRUFBQ1YsUUFBUTtJQUN0RCxDQUFDO0lBRUQsSUFBSUQsSUFBSSxLQUFLLFFBQVEsRUFBRTtNQUNuQixNQUFNYSxNQUFNLEdBQUcsTUFBTU4sV0FBUSxDQUFDQyxLQUFLLENBQUNNLFNBQVMsQ0FBQ0YsWUFBWSxDQUFDO01BQzNELE9BQU92QixHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQ3hCc0IsRUFBRSxFQUFFRixNQUFNLENBQUNHLFVBQVU7UUFDckJyQixNQUFNLEVBQUVpQixZQUFZLENBQUNqQixNQUFNO1FBQzNCSSxJQUFJO1FBQ0pDLElBQUk7UUFDSkUsUUFBUTtRQUNSRCxRQUFRLEVBQUVXLFlBQVksQ0FBQ1g7TUFDM0IsQ0FBQyxDQUFDO0lBQ047O0lBRUE7SUFDQSxJQUFJLENBQUNnQixXQUFFLENBQUNDLFVBQVUsQ0FBQ25DLFdBQVcsQ0FBQyxFQUFFO01BQzdCa0MsV0FBRSxDQUFDRSxTQUFTLENBQUNwQyxXQUFXLEVBQUU7UUFBRXFDLFNBQVMsRUFBRTtNQUFLLENBQUMsQ0FBQztJQUNsRDs7SUFFQTtJQUNBLE1BQU1DLFFBQVEsR0FBRyxJQUFBQyxRQUFNLEVBQUMsQ0FBQztJQUN6QixNQUFNQyxTQUFTLE1BQUF6QixNQUFBLENBQU1mLFdBQVcsT0FBQWUsTUFBQSxDQUFJdUIsUUFBUSxDQUFFO0lBQzlDLE1BQU1HLFdBQVcsR0FBR0MsTUFBTSxDQUFDQyxJQUFJLENBQUN2QixJQUFJLEVBQUUsUUFBUSxDQUFDO0lBQy9DYyxXQUFFLENBQUNVLGFBQWEsQ0FBQ0osU0FBUyxFQUFFQyxXQUFXLENBQUM7SUFFeENaLFlBQVksQ0FBQ1csU0FBUyxHQUFHQSxTQUFTO0lBQ2xDLE1BQU1WLE1BQU0sR0FBRyxNQUFNTixXQUFRLENBQUNDLEtBQUssQ0FBQ00sU0FBUyxDQUFDRixZQUFZLENBQUM7O0lBRTNEO0lBQ0EsSUFBSVosSUFBSSxLQUFLLE9BQU8sRUFBRTtNQUNsQixNQUFNbkIsU0FBUyxDQUFDK0MsR0FBRyxDQUFDO1FBQ2hCakMsTUFBTSxFQUFFQSxNQUFNLENBQUNrQyxRQUFRLENBQUMsQ0FBQztRQUN6QkMsTUFBTSxFQUFFakIsTUFBTSxDQUFDRyxVQUFVLENBQUNhLFFBQVEsQ0FBQztNQUN2QyxDQUFDLENBQUM7SUFDTjtJQUVBLE9BQU94QyxHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ3hCc0IsRUFBRSxFQUFFRixNQUFNLENBQUNHLFVBQVU7TUFDckJyQixNQUFNLEVBQUVpQixZQUFZLENBQUNqQixNQUFNO01BQzNCSSxJQUFJO01BQ0pDLElBQUk7TUFDSkUsUUFBUTtNQUNSRCxRQUFRLEVBQUVXLFlBQVksQ0FBQ1g7SUFDM0IsQ0FBQyxDQUFDO0VBQ047RUFFQSxhQUFhOEIsT0FBT0EsQ0FBQzNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFO0lBQzNCLE1BQU1DLEtBQUssR0FBR0YsR0FBRyxDQUFDRyxNQUFNLENBQUMsU0FBUyxDQUFDO0lBQ25DLElBQUksQ0FBQ0QsS0FBSyxFQUFFO01BQ1IsT0FBT0QsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxLQUFLLEVBQUU7TUFBZSxDQUFDLENBQUM7SUFDMUQ7SUFFQSxNQUFNQyxNQUFNLEdBQUcsTUFBTUMsY0FBVyxDQUFDQyxHQUFHLFNBQUFDLE1BQUEsQ0FBU1IsS0FBSyxDQUFFLENBQUM7SUFDckQsSUFBSSxDQUFDSyxNQUFNLEVBQUU7TUFDVCxPQUFPTixHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLEtBQUssRUFBRTtNQUFlLENBQUMsQ0FBQztJQUMxRDtJQUVBLE1BQU1vQyxNQUFNLEdBQUcxQyxHQUFHLENBQUM0QyxNQUFNLENBQUNqQixFQUFFO0lBQzVCLE1BQU1rQixJQUFJLEdBQUcsTUFBTTFCLFdBQVEsQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLENBQUM7TUFDdENDLEdBQUcsRUFBRSxJQUFBQyxpQkFBUSxFQUFDbUIsTUFBTSxDQUFDO01BQ3JCbkMsTUFBTSxFQUFFLElBQUFnQixpQkFBUSxFQUFDaEIsTUFBTTtJQUMzQixDQUFDLENBQUM7SUFFRixJQUFJLENBQUNzQyxJQUFJLEVBQUU7TUFDUCxPQUFPNUMsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxLQUFLLEVBQUU7TUFBWSxDQUFDLENBQUM7SUFDdkQ7SUFFQSxPQUFPTCxHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQ3hCc0IsRUFBRSxFQUFFa0IsSUFBSSxDQUFDdkIsR0FBRztNQUNaZixNQUFNLEVBQUVzQyxJQUFJLENBQUN0QyxNQUFNO01BQ25CSSxJQUFJLEVBQUVrQyxJQUFJLENBQUNsQyxJQUFJO01BQ2ZDLElBQUksRUFBRWlDLElBQUksQ0FBQ2pDLElBQUk7TUFDZkUsUUFBUSxFQUFFK0IsSUFBSSxDQUFDL0IsUUFBUTtNQUN2QkQsUUFBUSxFQUFFZ0MsSUFBSSxDQUFDaEM7SUFDbkIsQ0FBQyxDQUFDO0VBQ047RUFFQSxhQUFhaUMsUUFBUUEsQ0FBQzlDLEdBQUcsRUFBRUMsR0FBRyxFQUFFO0lBQzVCLE1BQU1DLEtBQUssR0FBR0YsR0FBRyxDQUFDRyxNQUFNLENBQUMsU0FBUyxDQUFDO0lBQ25DLElBQUksQ0FBQ0QsS0FBSyxFQUFFO01BQ1IsT0FBT0QsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxLQUFLLEVBQUU7TUFBZSxDQUFDLENBQUM7SUFDMUQ7SUFFQSxNQUFNQyxNQUFNLEdBQUcsTUFBTUMsY0FBVyxDQUFDQyxHQUFHLFNBQUFDLE1BQUEsQ0FBU1IsS0FBSyxDQUFFLENBQUM7SUFDckQsSUFBSSxDQUFDSyxNQUFNLEVBQUU7TUFDVCxPQUFPTixHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLEtBQUssRUFBRTtNQUFlLENBQUMsQ0FBQztJQUMxRDtJQUVBLE1BQU1PLFFBQVEsR0FBR2IsR0FBRyxDQUFDK0MsS0FBSyxDQUFDbEMsUUFBUSxJQUFJLEdBQUc7SUFDMUMsTUFBTW1DLElBQUksR0FBR0MsUUFBUSxDQUFDakQsR0FBRyxDQUFDK0MsS0FBSyxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQzFDLE1BQU1FLFFBQVEsR0FBRyxFQUFFO0lBRW5CLE1BQU1ILEtBQUssR0FBRztNQUNWeEMsTUFBTSxFQUFFLElBQUFnQixpQkFBUSxFQUFDaEIsTUFBTSxDQUFDO01BQ3hCTSxRQUFRLEVBQUVBLFFBQVEsS0FBSyxHQUFHLEdBQUcsQ0FBQyxHQUFHLElBQUFVLGlCQUFRLEVBQUNWLFFBQVE7SUFDdEQsQ0FBQztJQUVELE1BQU1PLEtBQUssR0FBRyxNQUFNRCxXQUFRLENBQUNDLEtBQUssQ0FDN0IrQixTQUFTLENBQUMsQ0FDUDtNQUFFQyxNQUFNLEVBQUVMO0lBQU0sQ0FBQyxFQUNqQjtNQUFFTSxLQUFLLEVBQUVMLElBQUksR0FBR0U7SUFBUyxDQUFDLEVBQzFCO01BQUVJLE1BQU0sRUFBRUo7SUFBUyxDQUFDLENBQ3ZCLENBQUMsQ0FDREssT0FBTyxDQUFDLENBQUM7SUFFZCxPQUFPdEQsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FDdkJlLEtBQUssQ0FBQ29DLEdBQUcsQ0FBRVgsSUFBSSxLQUFNO01BQ2pCbEIsRUFBRSxFQUFFa0IsSUFBSSxDQUFDdkIsR0FBRztNQUNaZixNQUFNLEVBQUVzQyxJQUFJLENBQUN0QyxNQUFNO01BQ25CSSxJQUFJLEVBQUVrQyxJQUFJLENBQUNsQyxJQUFJO01BQ2ZDLElBQUksRUFBRWlDLElBQUksQ0FBQ2pDLElBQUk7TUFDZkUsUUFBUSxFQUFFK0IsSUFBSSxDQUFDL0IsUUFBUTtNQUN2QkQsUUFBUSxFQUFFZ0MsSUFBSSxDQUFDaEM7SUFDbkIsQ0FBQyxDQUFDLENBQ04sQ0FBQztFQUNMO0VBRUEsYUFBYTRDLFVBQVVBLENBQUN6RCxHQUFHLEVBQUVDLEdBQUcsRUFBRTtJQUM5QixNQUFNQyxLQUFLLEdBQUdGLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLFNBQVMsQ0FBQztJQUNuQyxJQUFJLENBQUNELEtBQUssRUFBRTtNQUNSLE9BQU9ELEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsS0FBSyxFQUFFO01BQWUsQ0FBQyxDQUFDO0lBQzFEO0lBRUEsTUFBTUMsTUFBTSxHQUFHLE1BQU1DLGNBQVcsQ0FBQ0MsR0FBRyxTQUFBQyxNQUFBLENBQVNSLEtBQUssQ0FBRSxDQUFDO0lBQ3JELElBQUksQ0FBQ0ssTUFBTSxFQUFFO01BQ1QsT0FBT04sR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxLQUFLLEVBQUU7TUFBZSxDQUFDLENBQUM7SUFDMUQ7SUFFQSxNQUFNb0MsTUFBTSxHQUFHMUMsR0FBRyxDQUFDNEMsTUFBTSxDQUFDakIsRUFBRTtJQUM1QixNQUFNa0IsSUFBSSxHQUFHLE1BQU0xQixXQUFRLENBQUNDLEtBQUssQ0FBQ3NDLGdCQUFnQixDQUM5QztNQUFFcEMsR0FBRyxFQUFFLElBQUFDLGlCQUFRLEVBQUNtQixNQUFNLENBQUM7TUFBRW5DLE1BQU0sRUFBRSxJQUFBZ0IsaUJBQVEsRUFBQ2hCLE1BQU07SUFBRSxDQUFDLEVBQ25EO01BQUVvRCxJQUFJLEVBQUU7UUFBRTdDLFFBQVEsRUFBRTtNQUFLO0lBQUUsQ0FBQyxFQUM1QjtNQUFFOEMsY0FBYyxFQUFFO0lBQVEsQ0FDOUIsQ0FBQztJQUVELElBQUksQ0FBQ2YsSUFBSSxDQUFDZ0IsS0FBSyxFQUFFO01BQ2IsT0FBTzVELEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsS0FBSyxFQUFFO01BQVksQ0FBQyxDQUFDO0lBQ3ZEO0lBRUEsT0FBT0wsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUN4QnNCLEVBQUUsRUFBRWtCLElBQUksQ0FBQ2dCLEtBQUssQ0FBQ3ZDLEdBQUc7TUFDbEJmLE1BQU0sRUFBRXNDLElBQUksQ0FBQ2dCLEtBQUssQ0FBQ3RELE1BQU07TUFDekJJLElBQUksRUFBRWtDLElBQUksQ0FBQ2dCLEtBQUssQ0FBQ2xELElBQUk7TUFDckJDLElBQUksRUFBRWlDLElBQUksQ0FBQ2dCLEtBQUssQ0FBQ2pELElBQUk7TUFDckJFLFFBQVEsRUFBRSxJQUFJO01BQ2RELFFBQVEsRUFBRWdDLElBQUksQ0FBQ2dCLEtBQUssQ0FBQ2hEO0lBQ3pCLENBQUMsQ0FBQztFQUNOO0VBRUEsYUFBYWlELFlBQVlBLENBQUM5RCxHQUFHLEVBQUVDLEdBQUcsRUFBRTtJQUNoQyxNQUFNQyxLQUFLLEdBQUdGLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLFNBQVMsQ0FBQztJQUNuQyxJQUFJLENBQUNELEtBQUssRUFBRTtNQUNSLE9BQU9ELEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsS0FBSyxFQUFFO01BQWUsQ0FBQyxDQUFDO0lBQzFEO0lBRUEsTUFBTUMsTUFBTSxHQUFHLE1BQU1DLGNBQVcsQ0FBQ0MsR0FBRyxTQUFBQyxNQUFBLENBQVNSLEtBQUssQ0FBRSxDQUFDO0lBQ3JELElBQUksQ0FBQ0ssTUFBTSxFQUFFO01BQ1QsT0FBT04sR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxLQUFLLEVBQUU7TUFBZSxDQUFDLENBQUM7SUFDMUQ7SUFFQSxNQUFNb0MsTUFBTSxHQUFHMUMsR0FBRyxDQUFDNEMsTUFBTSxDQUFDakIsRUFBRTtJQUM1QixNQUFNa0IsSUFBSSxHQUFHLE1BQU0xQixXQUFRLENBQUNDLEtBQUssQ0FBQ3NDLGdCQUFnQixDQUM5QztNQUFFcEMsR0FBRyxFQUFFLElBQUFDLGlCQUFRLEVBQUNtQixNQUFNLENBQUM7TUFBRW5DLE1BQU0sRUFBRSxJQUFBZ0IsaUJBQVEsRUFBQ2hCLE1BQU07SUFBRSxDQUFDLEVBQ25EO01BQUVvRCxJQUFJLEVBQUU7UUFBRTdDLFFBQVEsRUFBRTtNQUFNO0lBQUUsQ0FBQyxFQUM3QjtNQUFFOEMsY0FBYyxFQUFFO0lBQVEsQ0FDOUIsQ0FBQztJQUVELElBQUksQ0FBQ2YsSUFBSSxDQUFDZ0IsS0FBSyxFQUFFO01BQ2IsT0FBTzVELEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsS0FBSyxFQUFFO01BQVksQ0FBQyxDQUFDO0lBQ3ZEO0lBRUEsT0FBT0wsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUN4QnNCLEVBQUUsRUFBRWtCLElBQUksQ0FBQ2dCLEtBQUssQ0FBQ3ZDLEdBQUc7TUFDbEJmLE1BQU0sRUFBRXNDLElBQUksQ0FBQ2dCLEtBQUssQ0FBQ3RELE1BQU07TUFDekJJLElBQUksRUFBRWtDLElBQUksQ0FBQ2dCLEtBQUssQ0FBQ2xELElBQUk7TUFDckJDLElBQUksRUFBRWlDLElBQUksQ0FBQ2dCLEtBQUssQ0FBQ2pELElBQUk7TUFDckJFLFFBQVEsRUFBRSxLQUFLO01BQ2ZELFFBQVEsRUFBRWdDLElBQUksQ0FBQ2dCLEtBQUssQ0FBQ2hEO0lBQ3pCLENBQUMsQ0FBQztFQUNOO0VBRUEsYUFBYWtELE9BQU9BLENBQUMvRCxHQUFHLEVBQUVDLEdBQUcsRUFBRTtJQUMzQixNQUFNeUMsTUFBTSxHQUFHMUMsR0FBRyxDQUFDNEMsTUFBTSxDQUFDakIsRUFBRTtJQUM1QixNQUFNcUMsSUFBSSxHQUFHaEUsR0FBRyxDQUFDK0MsS0FBSyxDQUFDaUIsSUFBSTtJQUUzQixNQUFNbkIsSUFBSSxHQUFHLE1BQU0xQixXQUFRLENBQUNDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDO01BQUVDLEdBQUcsRUFBRSxJQUFBQyxpQkFBUSxFQUFDbUIsTUFBTTtJQUFFLENBQUMsQ0FBQztJQUNwRSxJQUFJLENBQUNHLElBQUksRUFBRTtNQUNQLE9BQU81QyxHQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLEtBQUssRUFBRTtNQUFZLENBQUMsQ0FBQztJQUN2RDtJQUVBLE1BQU1KLEtBQUssR0FBR0YsR0FBRyxDQUFDRyxNQUFNLENBQUMsU0FBUyxDQUFDO0lBQ25DLE1BQU1JLE1BQU0sR0FBR0wsS0FBSyxHQUFHLE1BQU1NLGNBQVcsQ0FBQ0MsR0FBRyxTQUFBQyxNQUFBLENBQVNSLEtBQUssQ0FBRSxDQUFDLEdBQUcsSUFBSTtJQUVwRSxJQUFJLENBQUMyQyxJQUFJLENBQUMvQixRQUFRLEtBQUssQ0FBQ1AsTUFBTSxJQUFJQSxNQUFNLEtBQUtzQyxJQUFJLENBQUN0QyxNQUFNLENBQUNrQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUU7TUFDbEUsT0FBT3hDLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsS0FBSyxFQUFFO01BQVksQ0FBQyxDQUFDO0lBQ3ZEO0lBRUEsSUFBSXVDLElBQUksQ0FBQ2pDLElBQUksS0FBSyxRQUFRLEVBQUU7TUFDeEIsT0FBT1gsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxLQUFLLEVBQUU7TUFBZ0MsQ0FBQyxDQUFDO0lBQzNFO0lBRUEsSUFBSTJELFFBQVEsR0FBR3BCLElBQUksQ0FBQ1YsU0FBUztJQUM3QixJQUFJNkIsSUFBSSxFQUFFO01BQ05DLFFBQVEsTUFBQXZELE1BQUEsQ0FBTW1DLElBQUksQ0FBQ1YsU0FBUyxPQUFBekIsTUFBQSxDQUFJc0QsSUFBSSxDQUFFO0lBQzFDO0lBRUEsSUFBSSxDQUFDbkMsV0FBRSxDQUFDQyxVQUFVLENBQUNtQyxRQUFRLENBQUMsRUFBRTtNQUMxQixPQUFPaEUsR0FBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxLQUFLLEVBQUU7TUFBWSxDQUFDLENBQUM7SUFDdkQ7SUFFQSxNQUFNNEQsUUFBUSxHQUFHQyxrQkFBSSxDQUFDQyxNQUFNLENBQUN2QixJQUFJLENBQUNsQyxJQUFJLENBQUM7SUFDOUNWLEdBQUcsQ0FBQ29FLFNBQVMsQ0FBQyxjQUFjLEVBQUVILFFBQVEsQ0FBQztJQUNoQyxPQUFPakUsR0FBRyxDQUFDcUUsUUFBUSxDQUFDTCxRQUFRLENBQUM7RUFDakM7QUFDSjtBQUFDLElBQUFNLFFBQUEsR0FBQUMsT0FBQSxDQUFBaEYsT0FBQSxHQUVjTSxlQUFlIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_mongodb","require","_fs","_interopRequireDefault","_uuid","_mimeTypes","_bull","_db","_redis","e","__esModule","default","fileQueue","Queue","FOLDER_PATH","process","env","FilesController","postUpload","req","res","token","header","status","json","error","userId","redisClient","get","concat","name","type","parentId","isPublic","data","body","includes","parent","dbClient","files","findOne","_id","ObjectID","fileDocument","result","insertOne","id","insertedId","fs","existsSync","mkdirSync","recursive","fileUuid","uuidv4","localPath","fileContent","Buffer","from","writeFileSync","add","toString","fileId","getShow","params","file","getIndex","query","page","parseInt","pageSize","aggregate","$match","$skip","$limit","toArray","map","putPublish","findOneAndUpdate","$set","returnDocument","value","putUnpublish","getFile","size","filePath","mimeType","mime","lookup","setHeader","sendFile","_default","exports"],"sourceRoot":"/alx-files_manager/controllers/","sources":["FilesController.js"],"sourcesContent":["import { ObjectID } from 'mongodb';\nimport fs from 'fs';\nimport { v4 as uuidv4 } from 'uuid';\nimport mime from 'mime-types';\nimport Queue from 'bull';\nimport dbClient from '../utils/db.js';\nimport redisClient from '../utils/redis.js';\n\nconst fileQueue = new Queue('fileQueue');\nconst FOLDER_PATH = process.env.FOLDER_PATH || '/tmp/files_manager';\n\nclass FilesController {\n    static async postUpload(req, res) {\n        const token = req.header('X-Token');\n        if (!token) {\n            return res.status(401).json({ error: 'Unauthorized' });\n        }\n\n        const userId = await redisClient.get(`auth_${token}`);\n        if (!userId) {\n            return res.status(401).json({ error: 'Unauthorized' });\n        }\n\n        const { name, type, parentId = '0', isPublic = false, data } = req.body;\n\n        if (!name) {\n            return res.status(400).json({ error: 'Missing name' });\n        }\n\n        if (!type || !['folder', 'file', 'image'].includes(type)) {\n            return res.status(400).json({ error: 'Missing type' });\n        }\n\n        if (!data && type !== 'folder') {\n            return res.status(400).json({ error: 'Missing data' });\n        }\n\n        if (parentId !== '0') {\n            const parent = await dbClient.files.findOne({ _id: ObjectID(parentId) });\n            if (!parent) {\n                return res.status(400).json({ error: 'Parent not found' });\n            }\n            if (parent.type !== 'folder') {\n                return res.status(400).json({ error: 'Parent is not a folder' });\n            }\n        }\n\n        const fileDocument = {\n            userId: ObjectID(userId),\n            name,\n            type,\n            isPublic,\n            parentId: parentId === '0' ? 0 : ObjectID(parentId),\n        };\n\n        if (type === 'folder') {\n            const result = await dbClient.files.insertOne(fileDocument);\n            return res.status(201).json({\n                id: result.insertedId,\n                userId: fileDocument.userId,\n                name,\n                type,\n                isPublic,\n                parentId: fileDocument.parentId,\n            });\n        }\n\n        // Create storage folder if it doesn't exist\n        if (!fs.existsSync(FOLDER_PATH)) {\n            fs.mkdirSync(FOLDER_PATH, { recursive: true });\n        }\n\n        // Save file content\n        const fileUuid = uuidv4();\n        const localPath = `${FOLDER_PATH}/${fileUuid}`;\n        const fileContent = Buffer.from(data, 'base64');\n        fs.writeFileSync(localPath, fileContent);\n\n        fileDocument.localPath = localPath;\n        const result = await dbClient.files.insertOne(fileDocument);\n\n        // Add thumbnail generation job for images\n        if (type === 'image') {\n            await fileQueue.add({\n                userId: userId.toString(),\n                fileId: result.insertedId.toString(),\n            });\n        }\n\n        return res.status(201).json({\n            id: result.insertedId,\n            userId: fileDocument.userId,\n            name,\n            type,\n            isPublic,\n            parentId: fileDocument.parentId,\n        });\n    }\n\n    static async getShow(req, res) {\n        const token = req.header('X-Token');\n        if (!token) {\n            return res.status(401).json({ error: 'Unauthorized' });\n        }\n\n        const userId = await redisClient.get(`auth_${token}`);\n        if (!userId) {\n            return res.status(401).json({ error: 'Unauthorized' });\n        }\n\n        const fileId = req.params.id;\n        const file = await dbClient.files.findOne({\n            _id: ObjectID(fileId),\n            userId: ObjectID(userId),\n        });\n\n        if (!file) {\n            return res.status(404).json({ error: 'Not found' });\n        }\n\n        return res.status(200).json({\n            id: file._id,\n            userId: file.userId,\n            name: file.name,\n            type: file.type,\n            isPublic: file.isPublic,\n            parentId: file.parentId,\n        });\n    }\n\n    static async getIndex(req, res) {\n        const token = req.header('X-Token');\n        if (!token) {\n            return res.status(401).json({ error: 'Unauthorized' });\n        }\n\n        const userId = await redisClient.get(`auth_${token}`);\n        if (!userId) {\n            return res.status(401).json({ error: 'Unauthorized' });\n        }\n\n        const parentId = req.query.parentId || '0';\n        const page = parseInt(req.query.page) || 0;\n        const pageSize = 20;\n\n        const query = {\n            userId: ObjectID(userId),\n            parentId: parentId === '0' ? 0 : ObjectID(parentId),\n        };\n\n        const files = await dbClient.files\n            .aggregate([\n                { $match: query },\n                { $skip: page * pageSize },\n                { $limit: pageSize },\n            ])\n            .toArray();\n\n        return res.status(200).json(\n            files.map((file) => ({\n                id: file._id,\n                userId: file.userId,\n                name: file.name,\n                type: file.type,\n                isPublic: file.isPublic,\n                parentId: file.parentId,\n            }))\n        );\n    }\n\n    static async putPublish(req, res) {\n        const token = req.header('X-Token');\n        if (!token) {\n            return res.status(401).json({ error: 'Unauthorized' });\n        }\n\n        const userId = await redisClient.get(`auth_${token}`);\n        if (!userId) {\n            return res.status(401).json({ error: 'Unauthorized' });\n        }\n\n        const fileId = req.params.id;\n        const file = await dbClient.files.findOneAndUpdate(\n            { _id: ObjectID(fileId), userId: ObjectID(userId) },\n            { $set: { isPublic: true } },\n            { returnDocument: 'after' }\n        );\n\n        if (!file.value) {\n            return res.status(404).json({ error: 'Not found' });\n        }\n\n        return res.status(200).json({\n            id: file.value._id,\n            userId: file.value.userId,\n            name: file.value.name,\n            type: file.value.type,\n            isPublic: true,\n            parentId: file.value.parentId,\n        });\n    }\n\n    static async putUnpublish(req, res) {\n        const token = req.header('X-Token');\n        if (!token) {\n            return res.status(401).json({ error: 'Unauthorized' });\n        }\n\n        const userId = await redisClient.get(`auth_${token}`);\n        if (!userId) {\n            return res.status(401).json({ error: 'Unauthorized' });\n        }\n\n        const fileId = req.params.id;\n        const file = await dbClient.files.findOneAndUpdate(\n            { _id: ObjectID(fileId), userId: ObjectID(userId) },\n            { $set: { isPublic: false } },\n            { returnDocument: 'after' }\n        );\n\n        if (!file.value) {\n            return res.status(404).json({ error: 'Not found' });\n        }\n\n        return res.status(200).json({\n            id: file.value._id,\n            userId: file.value.userId,\n            name: file.value.name,\n            type: file.value.type,\n            isPublic: false,\n            parentId: file.value.parentId,\n        });\n    }\n\n    static async getFile(req, res) {\n        const fileId = req.params.id;\n        const size = req.query.size;\n\n        const file = await dbClient.files.findOne({ _id: ObjectID(fileId) });\n        if (!file) {\n            return res.status(404).json({ error: 'Not found' });\n        }\n\n        const token = req.header('X-Token');\n        const userId = token ? await redisClient.get(`auth_${token}`) : null;\n\n        if (!file.isPublic && (!userId || userId !== file.userId.toString())) {\n            return res.status(404).json({ error: 'Not found' });\n        }\n\n        if (file.type === 'folder') {\n            return res.status(400).json({ error: \"A folder doesn't have content\" });\n        }\n\n        let filePath = file.localPath;\n        if (size) {\n            filePath = `${file.localPath}_${size}`;\n        }\n\n        if (!fs.existsSync(filePath)) {\n            return res.status(404).json({ error: 'Not found' });\n        }\n\n        const mimeType = mime.lookup(file.name);\n\tres.setHeader('Content-Type', mimeType);\n        return res.sendFile(filePath);\n    }\n}\n\nexport default FilesController;\n"],"mappings":"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","ignoreList":[]}},"mtime":1736349744384},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/tests/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/tests/redisClient.test.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$24\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$25\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-import-attributes\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"deprecatedAssertSyntax\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"109.0.0\",\"edge\":\"130.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"11.0.0\",\"node\":\"10.0.0\",\"opera\":\"114.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"26.0.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":true,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.promise.js\");\nvar _chai = require(\"chai\");\nvar _redis = _interopRequireDefault(require(\"../utils/redis.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n// tests/redisClient.test.js\n\ndescribe('RedisClient', () => {\n  before(async () => {\n    await _redis.default.client.flushall('ASYNC');\n  });\n  after(async () => {\n    await _redis.default.client.flushall('ASYNC');\n  });\n  it('should connect to Redis successfully', () => {\n    (0, _chai.expect)(_redis.default.isAlive()).to.be.true;\n  });\n  it('should set and get a value successfully', async () => {\n    await _redis.default.set('test_key', 'test_value', 60);\n    const value = await _redis.default.get('test_key');\n    (0, _chai.expect)(value).to.equal('test_value');\n  });\n  it('should delete a value successfully', async () => {\n    await _redis.default.set('test_key2', 'test_value2', 60);\n    await _redis.default.del('test_key2');\n    const value = await _redis.default.get('test_key2');\n    (0, _chai.expect)(value).to.be.null;\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY2hhaSIsInJlcXVpcmUiLCJfcmVkaXMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiZGVzY3JpYmUiLCJiZWZvcmUiLCJyZWRpc0NsaWVudCIsImNsaWVudCIsImZsdXNoYWxsIiwiYWZ0ZXIiLCJpdCIsImV4cGVjdCIsImlzQWxpdmUiLCJ0byIsImJlIiwidHJ1ZSIsInNldCIsInZhbHVlIiwiZ2V0IiwiZXF1YWwiLCJkZWwiLCJudWxsIl0sInNvdXJjZVJvb3QiOiIvYWx4LWZpbGVzX21hbmFnZXIvdGVzdHMvIiwic291cmNlcyI6WyJyZWRpc0NsaWVudC50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHRlc3RzL3JlZGlzQ2xpZW50LnRlc3QuanNcbmltcG9ydCB7IGV4cGVjdCB9IGZyb20gJ2NoYWknO1xuaW1wb3J0IHJlZGlzQ2xpZW50IGZyb20gJy4uL3V0aWxzL3JlZGlzLmpzJztcblxuZGVzY3JpYmUoJ1JlZGlzQ2xpZW50JywgKCkgPT4ge1xuICAgIGJlZm9yZShhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHJlZGlzQ2xpZW50LmNsaWVudC5mbHVzaGFsbCgnQVNZTkMnKTtcbiAgICB9KTtcblxuICAgIGFmdGVyKGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgcmVkaXNDbGllbnQuY2xpZW50LmZsdXNoYWxsKCdBU1lOQycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjb25uZWN0IHRvIFJlZGlzIHN1Y2Nlc3NmdWxseScsICgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlZGlzQ2xpZW50LmlzQWxpdmUoKSkudG8uYmUudHJ1ZTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2V0IGFuZCBnZXQgYSB2YWx1ZSBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHJlZGlzQ2xpZW50LnNldCgndGVzdF9rZXknLCAndGVzdF92YWx1ZScsIDYwKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCByZWRpc0NsaWVudC5nZXQoJ3Rlc3Rfa2V5Jyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZSkudG8uZXF1YWwoJ3Rlc3RfdmFsdWUnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGVsZXRlIGEgdmFsdWUgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCByZWRpc0NsaWVudC5zZXQoJ3Rlc3Rfa2V5MicsICd0ZXN0X3ZhbHVlMicsIDYwKTtcbiAgICAgICAgYXdhaXQgcmVkaXNDbGllbnQuZGVsKCd0ZXN0X2tleTInKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCByZWRpc0NsaWVudC5nZXQoJ3Rlc3Rfa2V5MicpO1xuICAgICAgICBleHBlY3QodmFsdWUpLnRvLmJlLm51bGw7XG4gICAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBQ0EsSUFBQUEsS0FBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsTUFBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBQTRDLFNBQUFFLHVCQUFBQyxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBRjVDOztBQUlBRyxRQUFRLENBQUMsYUFBYSxFQUFFLE1BQU07RUFDMUJDLE1BQU0sQ0FBQyxZQUFZO0lBQ2YsTUFBTUMsY0FBVyxDQUFDQyxNQUFNLENBQUNDLFFBQVEsQ0FBQyxPQUFPLENBQUM7RUFDOUMsQ0FBQyxDQUFDO0VBRUZDLEtBQUssQ0FBQyxZQUFZO0lBQ2QsTUFBTUgsY0FBVyxDQUFDQyxNQUFNLENBQUNDLFFBQVEsQ0FBQyxPQUFPLENBQUM7RUFDOUMsQ0FBQyxDQUFDO0VBRUZFLEVBQUUsQ0FBQyxzQ0FBc0MsRUFBRSxNQUFNO0lBQzdDLElBQUFDLFlBQU0sRUFBQ0wsY0FBVyxDQUFDTSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUNDLEVBQUUsQ0FBQ0MsRUFBRSxDQUFDQyxJQUFJO0VBQzVDLENBQUMsQ0FBQztFQUVGTCxFQUFFLENBQUMseUNBQXlDLEVBQUUsWUFBWTtJQUN0RCxNQUFNSixjQUFXLENBQUNVLEdBQUcsQ0FBQyxVQUFVLEVBQUUsWUFBWSxFQUFFLEVBQUUsQ0FBQztJQUNuRCxNQUFNQyxLQUFLLEdBQUcsTUFBTVgsY0FBVyxDQUFDWSxHQUFHLENBQUMsVUFBVSxDQUFDO0lBQy9DLElBQUFQLFlBQU0sRUFBQ00sS0FBSyxDQUFDLENBQUNKLEVBQUUsQ0FBQ00sS0FBSyxDQUFDLFlBQVksQ0FBQztFQUN4QyxDQUFDLENBQUM7RUFFRlQsRUFBRSxDQUFDLG9DQUFvQyxFQUFFLFlBQVk7SUFDakQsTUFBTUosY0FBVyxDQUFDVSxHQUFHLENBQUMsV0FBVyxFQUFFLGFBQWEsRUFBRSxFQUFFLENBQUM7SUFDckQsTUFBTVYsY0FBVyxDQUFDYyxHQUFHLENBQUMsV0FBVyxDQUFDO0lBQ2xDLE1BQU1ILEtBQUssR0FBRyxNQUFNWCxjQUFXLENBQUNZLEdBQUcsQ0FBQyxXQUFXLENBQUM7SUFDaEQsSUFBQVAsWUFBTSxFQUFDTSxLQUFLLENBQUMsQ0FBQ0osRUFBRSxDQUFDQyxFQUFFLENBQUNPLElBQUk7RUFDNUIsQ0FBQyxDQUFDO0FBQ04sQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_chai","require","_redis","_interopRequireDefault","e","__esModule","default","describe","before","redisClient","client","flushall","after","it","expect","isAlive","to","be","true","set","value","get","equal","del","null"],"sourceRoot":"/alx-files_manager/tests/","sources":["redisClient.test.js"],"sourcesContent":["// tests/redisClient.test.js\nimport { expect } from 'chai';\nimport redisClient from '../utils/redis.js';\n\ndescribe('RedisClient', () => {\n    before(async () => {\n        await redisClient.client.flushall('ASYNC');\n    });\n\n    after(async () => {\n        await redisClient.client.flushall('ASYNC');\n    });\n\n    it('should connect to Redis successfully', () => {\n        expect(redisClient.isAlive()).to.be.true;\n    });\n\n    it('should set and get a value successfully', async () => {\n        await redisClient.set('test_key', 'test_value', 60);\n        const value = await redisClient.get('test_key');\n        expect(value).to.equal('test_value');\n    });\n\n    it('should delete a value successfully', async () => {\n        await redisClient.set('test_key2', 'test_value2', 60);\n        await redisClient.del('test_key2');\n        const value = await redisClient.get('test_key2');\n        expect(value).to.be.null;\n    });\n});\n"],"mappings":";;;AACA,IAAAA,KAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAC,sBAAA,CAAAF,OAAA;AAA4C,SAAAE,uBAAAC,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAF5C;;AAIAG,QAAQ,CAAC,aAAa,EAAE,MAAM;EAC1BC,MAAM,CAAC,YAAY;IACf,MAAMC,cAAW,CAACC,MAAM,CAACC,QAAQ,CAAC,OAAO,CAAC;EAC9C,CAAC,CAAC;EAEFC,KAAK,CAAC,YAAY;IACd,MAAMH,cAAW,CAACC,MAAM,CAACC,QAAQ,CAAC,OAAO,CAAC;EAC9C,CAAC,CAAC;EAEFE,EAAE,CAAC,sCAAsC,EAAE,MAAM;IAC7C,IAAAC,YAAM,EAACL,cAAW,CAACM,OAAO,CAAC,CAAC,CAAC,CAACC,EAAE,CAACC,EAAE,CAACC,IAAI;EAC5C,CAAC,CAAC;EAEFL,EAAE,CAAC,yCAAyC,EAAE,YAAY;IACtD,MAAMJ,cAAW,CAACU,GAAG,CAAC,UAAU,EAAE,YAAY,EAAE,EAAE,CAAC;IACnD,MAAMC,KAAK,GAAG,MAAMX,cAAW,CAACY,GAAG,CAAC,UAAU,CAAC;IAC/C,IAAAP,YAAM,EAACM,KAAK,CAAC,CAACJ,EAAE,CAACM,KAAK,CAAC,YAAY,CAAC;EACxC,CAAC,CAAC;EAEFT,EAAE,CAAC,oCAAoC,EAAE,YAAY;IACjD,MAAMJ,cAAW,CAACU,GAAG,CAAC,WAAW,EAAE,aAAa,EAAE,EAAE,CAAC;IACrD,MAAMV,cAAW,CAACc,GAAG,CAAC,WAAW,CAAC;IAClC,MAAMH,KAAK,GAAG,MAAMX,cAAW,CAACY,GAAG,CAAC,WAAW,CAAC;IAChD,IAAAP,YAAM,EAACM,KAAK,CAAC,CAACJ,EAAE,CAACC,EAAE,CAACO,IAAI;EAC5B,CAAC,CAAC;AACN,CAAC,CAAC","ignoreList":[]}},"mtime":1736350386330},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/utils/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/utils/db.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$24\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$25\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-import-attributes\",\"visitor\":{},\"options\":{\"deprecatedAssertSyntax\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"109.0.0\",\"edge\":\"130.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"11.0.0\",\"node\":\"10.0.0\",\"opera\":\"114.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"26.0.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":true,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.promise.js\");\nvar _mongodb = require(\"mongodb\");\nclass DBClient {\n  constructor() {\n    const host = process.env.DB_HOST || 'localhost';\n    const port = process.env.DB_PORT || 27017;\n    const database = process.env.DB_DATABASE || 'files_manager';\n    const url = \"mongodb://\".concat(host, \":\").concat(port, \"/\").concat(database);\n    this.client = new _mongodb.MongoClient(url, {\n      useUnifiedTopology: true\n    });\n    this.client.connect(err => {\n      if (!err) {\n        this.db = this.client.db(database);\n      } else {\n        this.db = false;\n      }\n    });\n  }\n  isAlive() {\n    return !!this.db;\n  }\n  async nbUsers() {\n    if (!this.db) return 0;\n    const users = this.db.collection('users');\n    return users.countDocuments();\n  }\n  async nbFiles() {\n    if (!this.db) return 0;\n    const files = this.db.collection('files');\n    return files.countDocuments();\n  }\n}\nconst dbClient = new DBClient();\nvar _default = exports.default = dbClient;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29kYiIsInJlcXVpcmUiLCJEQkNsaWVudCIsImNvbnN0cnVjdG9yIiwiaG9zdCIsInByb2Nlc3MiLCJlbnYiLCJEQl9IT1NUIiwicG9ydCIsIkRCX1BPUlQiLCJkYXRhYmFzZSIsIkRCX0RBVEFCQVNFIiwidXJsIiwiY29uY2F0IiwiY2xpZW50IiwiTW9uZ29DbGllbnQiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJjb25uZWN0IiwiZXJyIiwiZGIiLCJpc0FsaXZlIiwibmJVc2VycyIsInVzZXJzIiwiY29sbGVjdGlvbiIsImNvdW50RG9jdW1lbnRzIiwibmJGaWxlcyIsImZpbGVzIiwiZGJDbGllbnQiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvYWx4LWZpbGVzX21hbmFnZXIvdXRpbHMvIiwic291cmNlcyI6WyJkYi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNb25nb0NsaWVudCB9IGZyb20gJ21vbmdvZGInO1xuXG5jbGFzcyBEQkNsaWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IGhvc3QgPSBwcm9jZXNzLmVudi5EQl9IT1NUIHx8ICdsb2NhbGhvc3QnO1xuICAgIGNvbnN0IHBvcnQgPSBwcm9jZXNzLmVudi5EQl9QT1JUIHx8IDI3MDE3O1xuICAgIGNvbnN0IGRhdGFiYXNlID0gcHJvY2Vzcy5lbnYuREJfREFUQUJBU0UgfHwgJ2ZpbGVzX21hbmFnZXInO1xuICAgIGNvbnN0IHVybCA9IGBtb25nb2RiOi8vJHtob3N0fToke3BvcnR9LyR7ZGF0YWJhc2V9YDtcblxuICAgIHRoaXMuY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KHVybCwgeyB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUgfSk7XG4gICAgdGhpcy5jbGllbnQuY29ubmVjdCgoZXJyKSA9PiB7XG4gICAgICBpZiAoIWVycikge1xuICAgICAgICB0aGlzLmRiID0gdGhpcy5jbGllbnQuZGIoZGF0YWJhc2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kYiA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaXNBbGl2ZSgpIHtcbiAgICByZXR1cm4gISF0aGlzLmRiO1xuICB9XG5cbiAgYXN5bmMgbmJVc2VycygpIHtcbiAgICBpZiAoIXRoaXMuZGIpIHJldHVybiAwO1xuICAgIGNvbnN0IHVzZXJzID0gdGhpcy5kYi5jb2xsZWN0aW9uKCd1c2VycycpO1xuICAgIHJldHVybiB1c2Vycy5jb3VudERvY3VtZW50cygpO1xuICB9XG5cbiAgYXN5bmMgbmJGaWxlcygpIHtcbiAgICBpZiAoIXRoaXMuZGIpIHJldHVybiAwO1xuICAgIGNvbnN0IGZpbGVzID0gdGhpcy5kYi5jb2xsZWN0aW9uKCdmaWxlcycpO1xuICAgIHJldHVybiBmaWxlcy5jb3VudERvY3VtZW50cygpO1xuICB9XG59XG5cbmNvbnN0IGRiQ2xpZW50ID0gbmV3IERCQ2xpZW50KCk7XG5leHBvcnQgZGVmYXVsdCBkYkNsaWVudDtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQU1DLFFBQVEsQ0FBQztFQUNiQyxXQUFXQSxDQUFBLEVBQUc7SUFDWixNQUFNQyxJQUFJLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxPQUFPLElBQUksV0FBVztJQUMvQyxNQUFNQyxJQUFJLEdBQUdILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRyxPQUFPLElBQUksS0FBSztJQUN6QyxNQUFNQyxRQUFRLEdBQUdMLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSyxXQUFXLElBQUksZUFBZTtJQUMzRCxNQUFNQyxHQUFHLGdCQUFBQyxNQUFBLENBQWdCVCxJQUFJLE9BQUFTLE1BQUEsQ0FBSUwsSUFBSSxPQUFBSyxNQUFBLENBQUlILFFBQVEsQ0FBRTtJQUVuRCxJQUFJLENBQUNJLE1BQU0sR0FBRyxJQUFJQyxvQkFBVyxDQUFDSCxHQUFHLEVBQUU7TUFBRUksa0JBQWtCLEVBQUU7SUFBSyxDQUFDLENBQUM7SUFDaEUsSUFBSSxDQUFDRixNQUFNLENBQUNHLE9BQU8sQ0FBRUMsR0FBRyxJQUFLO01BQzNCLElBQUksQ0FBQ0EsR0FBRyxFQUFFO1FBQ1IsSUFBSSxDQUFDQyxFQUFFLEdBQUcsSUFBSSxDQUFDTCxNQUFNLENBQUNLLEVBQUUsQ0FBQ1QsUUFBUSxDQUFDO01BQ3BDLENBQUMsTUFBTTtRQUNMLElBQUksQ0FBQ1MsRUFBRSxHQUFHLEtBQUs7TUFDakI7SUFDRixDQUFDLENBQUM7RUFDSjtFQUVBQyxPQUFPQSxDQUFBLEVBQUc7SUFDUixPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUNELEVBQUU7RUFDbEI7RUFFQSxNQUFNRSxPQUFPQSxDQUFBLEVBQUc7SUFDZCxJQUFJLENBQUMsSUFBSSxDQUFDRixFQUFFLEVBQUUsT0FBTyxDQUFDO0lBQ3RCLE1BQU1HLEtBQUssR0FBRyxJQUFJLENBQUNILEVBQUUsQ0FBQ0ksVUFBVSxDQUFDLE9BQU8sQ0FBQztJQUN6QyxPQUFPRCxLQUFLLENBQUNFLGNBQWMsQ0FBQyxDQUFDO0VBQy9CO0VBRUEsTUFBTUMsT0FBT0EsQ0FBQSxFQUFHO0lBQ2QsSUFBSSxDQUFDLElBQUksQ0FBQ04sRUFBRSxFQUFFLE9BQU8sQ0FBQztJQUN0QixNQUFNTyxLQUFLLEdBQUcsSUFBSSxDQUFDUCxFQUFFLENBQUNJLFVBQVUsQ0FBQyxPQUFPLENBQUM7SUFDekMsT0FBT0csS0FBSyxDQUFDRixjQUFjLENBQUMsQ0FBQztFQUMvQjtBQUNGO0FBRUEsTUFBTUcsUUFBUSxHQUFHLElBQUl6QixRQUFRLENBQUMsQ0FBQztBQUFDLElBQUEwQixRQUFBLEdBQUFDLE9BQUEsQ0FBQUMsT0FBQSxHQUNqQkgsUUFBUSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["_mongodb","require","DBClient","constructor","host","process","env","DB_HOST","port","DB_PORT","database","DB_DATABASE","url","concat","client","MongoClient","useUnifiedTopology","connect","err","db","isAlive","nbUsers","users","collection","countDocuments","nbFiles","files","dbClient","_default","exports","default"],"sourceRoot":"/alx-files_manager/utils/","sources":["db.js"],"sourcesContent":["import { MongoClient } from 'mongodb';\n\nclass DBClient {\n  constructor() {\n    const host = process.env.DB_HOST || 'localhost';\n    const port = process.env.DB_PORT || 27017;\n    const database = process.env.DB_DATABASE || 'files_manager';\n    const url = `mongodb://${host}:${port}/${database}`;\n\n    this.client = new MongoClient(url, { useUnifiedTopology: true });\n    this.client.connect((err) => {\n      if (!err) {\n        this.db = this.client.db(database);\n      } else {\n        this.db = false;\n      }\n    });\n  }\n\n  isAlive() {\n    return !!this.db;\n  }\n\n  async nbUsers() {\n    if (!this.db) return 0;\n    const users = this.db.collection('users');\n    return users.countDocuments();\n  }\n\n  async nbFiles() {\n    if (!this.db) return 0;\n    const files = this.db.collection('files');\n    return files.countDocuments();\n  }\n}\n\nconst dbClient = new DBClient();\nexport default dbClient;\n"],"mappings":";;;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AAEA,MAAMC,QAAQ,CAAC;EACbC,WAAWA,CAAA,EAAG;IACZ,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,OAAO,IAAI,WAAW;IAC/C,MAAMC,IAAI,GAAGH,OAAO,CAACC,GAAG,CAACG,OAAO,IAAI,KAAK;IACzC,MAAMC,QAAQ,GAAGL,OAAO,CAACC,GAAG,CAACK,WAAW,IAAI,eAAe;IAC3D,MAAMC,GAAG,gBAAAC,MAAA,CAAgBT,IAAI,OAAAS,MAAA,CAAIL,IAAI,OAAAK,MAAA,CAAIH,QAAQ,CAAE;IAEnD,IAAI,CAACI,MAAM,GAAG,IAAIC,oBAAW,CAACH,GAAG,EAAE;MAAEI,kBAAkB,EAAE;IAAK,CAAC,CAAC;IAChE,IAAI,CAACF,MAAM,CAACG,OAAO,CAAEC,GAAG,IAAK;MAC3B,IAAI,CAACA,GAAG,EAAE;QACR,IAAI,CAACC,EAAE,GAAG,IAAI,CAACL,MAAM,CAACK,EAAE,CAACT,QAAQ,CAAC;MACpC,CAAC,MAAM;QACL,IAAI,CAACS,EAAE,GAAG,KAAK;MACjB;IACF,CAAC,CAAC;EACJ;EAEAC,OAAOA,CAAA,EAAG;IACR,OAAO,CAAC,CAAC,IAAI,CAACD,EAAE;EAClB;EAEA,MAAME,OAAOA,CAAA,EAAG;IACd,IAAI,CAAC,IAAI,CAACF,EAAE,EAAE,OAAO,CAAC;IACtB,MAAMG,KAAK,GAAG,IAAI,CAACH,EAAE,CAACI,UAAU,CAAC,OAAO,CAAC;IACzC,OAAOD,KAAK,CAACE,cAAc,CAAC,CAAC;EAC/B;EAEA,MAAMC,OAAOA,CAAA,EAAG;IACd,IAAI,CAAC,IAAI,CAACN,EAAE,EAAE,OAAO,CAAC;IACtB,MAAMO,KAAK,GAAG,IAAI,CAACP,EAAE,CAACI,UAAU,CAAC,OAAO,CAAC;IACzC,OAAOG,KAAK,CAACF,cAAc,CAAC,CAAC;EAC/B;AACF;AAEA,MAAMG,QAAQ,GAAG,IAAIzB,QAAQ,CAAC,CAAC;AAAC,IAAA0B,QAAA,GAAAC,OAAA,CAAAC,OAAA,GACjBH,QAAQ","ignoreList":[]}},"mtime":1736398766934},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/tests/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/tests/endpoints.test.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$24\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$25\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-import-attributes\",\"visitor\":{},\"options\":{\"deprecatedAssertSyntax\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"109.0.0\",\"edge\":\"130.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"11.0.0\",\"node\":\"10.0.0\",\"opera\":\"114.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"26.0.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":true,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.promise.js\");\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\nvar _chai = require(\"chai\");\nvar _supertest = _interopRequireDefault(require(\"supertest\"));\nvar _uuid = require(\"uuid\");\nvar _server = _interopRequireDefault(require(\"../server\"));\nvar _redis = _interopRequireDefault(require(\"../utils/redis\"));\nvar _db = _interopRequireDefault(require(\"../utils/db\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n// tests/endpoints.test.js\n\ndescribe('API Endpoints', () => {\n  let token;\n  let userId;\n  let fileId;\n  before(async () => {\n    await _redis.default.client.flushall('ASYNC');\n    const collections = await _db.default.db.listCollections().toArray();\n    for (const collection of collections) {\n      await _db.default.db.collection(collection.name).deleteMany({});\n    }\n  });\n  describe('GET /status', () => {\n    it('should return status of Redis and DB connections', async () => {\n      const res = await (0, _supertest.default)(_server.default).get('/status');\n      (0, _chai.expect)(res.status).to.equal(200);\n      (0, _chai.expect)(res.body).to.deep.equal({\n        redis: true,\n        db: true\n      });\n    });\n  });\n  describe('GET /stats', () => {\n    it('should return correct stats', async () => {\n      const res = await (0, _supertest.default)(_server.default).get('/stats');\n      (0, _chai.expect)(res.status).to.equal(200);\n      (0, _chai.expect)(res.body).to.have.property('users');\n      (0, _chai.expect)(res.body).to.have.property('files');\n    });\n  });\n  describe('POST /users', () => {\n    it('should create a new user successfully', async () => {\n      const res = await (0, _supertest.default)(_server.default).post('/users').send({\n        email: 'test@test.com',\n        password: 'testpassword'\n      });\n      (0, _chai.expect)(res.status).to.equal(201);\n      (0, _chai.expect)(res.body).to.have.property('id');\n      (0, _chai.expect)(res.body).to.have.property('email', 'test@test.com');\n      userId = res.body.id;\n    });\n    it('should return error if email is missing', async () => {\n      const res = await (0, _supertest.default)(_server.default).post('/users').send({\n        password: 'testpassword'\n      });\n      (0, _chai.expect)(res.status).to.equal(400);\n      (0, _chai.expect)(res.body).to.deep.equal({\n        error: 'Missing email'\n      });\n    });\n  });\n  describe('GET /connect', () => {\n    it('should authenticate user and return token', async () => {\n      const credentials = Buffer.from('test@test.com:testpassword').toString('base64');\n      const res = await (0, _supertest.default)(_server.default).get('/connect').set('Authorization', \"Basic \".concat(credentials));\n      (0, _chai.expect)(res.status).to.equal(200);\n      (0, _chai.expect)(res.body).to.have.property('token');\n      token = res.body.token;\n    });\n  });\n  describe('GET /disconnect', () => {\n    it('should disconnect user successfully', async () => {\n      const res = await (0, _supertest.default)(_server.default).get('/disconnect').set('X-Token', token);\n      (0, _chai.expect)(res.status).to.equal(204);\n    });\n  });\n  describe('GET /users/me', () => {\n    it('should return user information', async () => {\n      const res = await (0, _supertest.default)(_server.default).get('/users/me').set('X-Token', token);\n      (0, _chai.expect)(res.status).to.equal(200);\n      (0, _chai.expect)(res.body).to.have.property('email', 'test@test.com');\n      (0, _chai.expect)(res.body).to.have.property('id');\n    });\n  });\n  describe('POST /files', () => {\n    it('should create a new file successfully', async () => {\n      const res = await (0, _supertest.default)(_server.default).post('/files').set('X-Token', token).send({\n        name: 'test.txt',\n        type: 'file',\n        data: Buffer.from('Hello World').toString('base64')\n      });\n      (0, _chai.expect)(res.status).to.equal(201);\n      (0, _chai.expect)(res.body).to.have.property('id');\n      fileId = res.body.id;\n    });\n  });\n  describe('GET /files/:id', () => {\n    it('should retrieve file information', async () => {\n      const res = await (0, _supertest.default)(_server.default).get(\"/files/\".concat(fileId)).set('X-Token', token);\n      (0, _chai.expect)(res.status).to.equal(200);\n      (0, _chai.expect)(res.body).to.have.property('name', 'test.txt');\n    });\n  });\n  describe('GET /files', () => {\n    it('should list files with pagination', async () => {\n      const res = await (0, _supertest.default)(_server.default).get('/files').set('X-Token', token).query({\n        page: 0\n      });\n      (0, _chai.expect)(res.status).to.equal(200);\n      (0, _chai.expect)(res.body).to.be.an('array');\n    });\n  });\n  describe('PUT /files/:id/publish', () => {\n    it('should publish a file', async () => {\n      const res = await (0, _supertest.default)(_server.default).put(\"/files/\".concat(fileId, \"/publish\")).set('X-Token', token);\n      (0, _chai.expect)(res.status).to.equal(200);\n      (0, _chai.expect)(res.body).to.have.property('isPublic', true);\n    });\n  });\n  describe('PUT /files/:id/unpublish', () => {\n    it('should unpublish a file', async () => {\n      const res = await (0, _supertest.default)(_server.default).put(\"/files/\".concat(fileId, \"/unpublish\")).set('X-Token', token);\n      (0, _chai.expect)(res.status).to.equal(200);\n      (0, _chai.expect)(res.body).to.have.property('isPublic', false);\n    });\n  });\n  describe('GET /files/:id/data', () => {\n    it('should retrieve file data', async () => {\n      const res = await (0, _supertest.default)(_server.default).get(\"/files/\".concat(fileId, \"/data\")).set('X-Token', token);\n      (0, _chai.expect)(res.status).to.equal(200);\n      (0, _chai.expect)(res.text).to.equal('Hello World');\n    });\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY2hhaSIsInJlcXVpcmUiLCJfc3VwZXJ0ZXN0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl91dWlkIiwiX3NlcnZlciIsIl9yZWRpcyIsIl9kYiIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImRlc2NyaWJlIiwidG9rZW4iLCJ1c2VySWQiLCJmaWxlSWQiLCJiZWZvcmUiLCJyZWRpc0NsaWVudCIsImNsaWVudCIsImZsdXNoYWxsIiwiY29sbGVjdGlvbnMiLCJkYkNsaWVudCIsImRiIiwibGlzdENvbGxlY3Rpb25zIiwidG9BcnJheSIsImNvbGxlY3Rpb24iLCJuYW1lIiwiZGVsZXRlTWFueSIsIml0IiwicmVzIiwicmVxdWVzdCIsImFwcCIsImdldCIsImV4cGVjdCIsInN0YXR1cyIsInRvIiwiZXF1YWwiLCJib2R5IiwiZGVlcCIsInJlZGlzIiwiaGF2ZSIsInByb3BlcnR5IiwicG9zdCIsInNlbmQiLCJlbWFpbCIsInBhc3N3b3JkIiwiaWQiLCJlcnJvciIsImNyZWRlbnRpYWxzIiwiQnVmZmVyIiwiZnJvbSIsInRvU3RyaW5nIiwic2V0IiwiY29uY2F0IiwidHlwZSIsImRhdGEiLCJxdWVyeSIsInBhZ2UiLCJiZSIsImFuIiwicHV0IiwidGV4dCJdLCJzb3VyY2VSb290IjoiL2FseC1maWxlc19tYW5hZ2VyL3Rlc3RzLyIsInNvdXJjZXMiOlsiZW5kcG9pbnRzLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdGVzdHMvZW5kcG9pbnRzLnRlc3QuanNcbmltcG9ydCB7IGV4cGVjdCB9IGZyb20gJ2NoYWknO1xuaW1wb3J0IHJlcXVlc3QgZnJvbSAnc3VwZXJ0ZXN0JztcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IGFwcCBmcm9tICcuLi9zZXJ2ZXInO1xuaW1wb3J0IHJlZGlzQ2xpZW50IGZyb20gJy4uL3V0aWxzL3JlZGlzJztcbmltcG9ydCBkYkNsaWVudCBmcm9tICcuLi91dGlscy9kYic7XG5cbmRlc2NyaWJlKCdBUEkgRW5kcG9pbnRzJywgKCkgPT4ge1xuICAgIGxldCB0b2tlbjtcbiAgICBsZXQgdXNlcklkO1xuICAgIGxldCBmaWxlSWQ7XG5cbiAgICBiZWZvcmUoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCByZWRpc0NsaWVudC5jbGllbnQuZmx1c2hhbGwoJ0FTWU5DJyk7XG4gICAgICAgIGNvbnN0IGNvbGxlY3Rpb25zID0gYXdhaXQgZGJDbGllbnQuZGIubGlzdENvbGxlY3Rpb25zKCkudG9BcnJheSgpO1xuICAgICAgICBmb3IgKGNvbnN0IGNvbGxlY3Rpb24gb2YgY29sbGVjdGlvbnMpIHtcbiAgICAgICAgICAgIGF3YWl0IGRiQ2xpZW50LmRiLmNvbGxlY3Rpb24oY29sbGVjdGlvbi5uYW1lKS5kZWxldGVNYW55KHt9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ0dFVCAvc3RhdHVzJywgKCkgPT4ge1xuICAgICAgICBpdCgnc2hvdWxkIHJldHVybiBzdGF0dXMgb2YgUmVkaXMgYW5kIERCIGNvbm5lY3Rpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChhcHApLmdldCgnL3N0YXR1cycpO1xuICAgICAgICAgICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvLmVxdWFsKDIwMCk7XG4gICAgICAgICAgICBleHBlY3QocmVzLmJvZHkpLnRvLmRlZXAuZXF1YWwoe1xuICAgICAgICAgICAgICAgIHJlZGlzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGRiOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnR0VUIC9zdGF0cycsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gY29ycmVjdCBzdGF0cycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QoYXBwKS5nZXQoJy9zdGF0cycpO1xuICAgICAgICAgICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvLmVxdWFsKDIwMCk7XG4gICAgICAgICAgICBleHBlY3QocmVzLmJvZHkpLnRvLmhhdmUucHJvcGVydHkoJ3VzZXJzJyk7XG4gICAgICAgICAgICBleHBlY3QocmVzLmJvZHkpLnRvLmhhdmUucHJvcGVydHkoJ2ZpbGVzJyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ1BPU1QgL3VzZXJzJywgKCkgPT4ge1xuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBhIG5ldyB1c2VyIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAgICAgICAgIC5wb3N0KCcvdXNlcnMnKVxuICAgICAgICAgICAgICAgIC5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6ICd0ZXN0QHRlc3QuY29tJyxcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICd0ZXN0cGFzc3dvcmQnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBleHBlY3QocmVzLnN0YXR1cykudG8uZXF1YWwoMjAxKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXMuYm9keSkudG8uaGF2ZS5wcm9wZXJ0eSgnaWQnKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXMuYm9keSkudG8uaGF2ZS5wcm9wZXJ0eSgnZW1haWwnLCAndGVzdEB0ZXN0LmNvbScpO1xuICAgICAgICAgICAgdXNlcklkID0gcmVzLmJvZHkuaWQ7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgcmV0dXJuIGVycm9yIGlmIGVtYWlsIGlzIG1pc3NpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgICAgICAgICAucG9zdCgnL3VzZXJzJylcbiAgICAgICAgICAgICAgICAuc2VuZCh7IHBhc3N3b3JkOiAndGVzdHBhc3N3b3JkJyB9KTtcbiAgICAgICAgICAgIGV4cGVjdChyZXMuc3RhdHVzKS50by5lcXVhbCg0MDApO1xuICAgICAgICAgICAgZXhwZWN0KHJlcy5ib2R5KS50by5kZWVwLmVxdWFsKHsgZXJyb3I6ICdNaXNzaW5nIGVtYWlsJyB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnR0VUIC9jb25uZWN0JywgKCkgPT4ge1xuICAgICAgICBpdCgnc2hvdWxkIGF1dGhlbnRpY2F0ZSB1c2VyIGFuZCByZXR1cm4gdG9rZW4nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjcmVkZW50aWFscyA9IEJ1ZmZlci5mcm9tKCd0ZXN0QHRlc3QuY29tOnRlc3RwYXNzd29yZCcpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAgICAgICAgIC5nZXQoJy9jb25uZWN0JylcbiAgICAgICAgICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJhc2ljICR7Y3JlZGVudGlhbHN9YCk7XG4gICAgICAgICAgICBleHBlY3QocmVzLnN0YXR1cykudG8uZXF1YWwoMjAwKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXMuYm9keSkudG8uaGF2ZS5wcm9wZXJ0eSgndG9rZW4nKTtcbiAgICAgICAgICAgIHRva2VuID0gcmVzLmJvZHkudG9rZW47XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ0dFVCAvZGlzY29ubmVjdCcsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCBkaXNjb25uZWN0IHVzZXIgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLmdldCgnL2Rpc2Nvbm5lY3QnKVxuICAgICAgICAgICAgICAgIC5zZXQoJ1gtVG9rZW4nLCB0b2tlbik7XG4gICAgICAgICAgICBleHBlY3QocmVzLnN0YXR1cykudG8uZXF1YWwoMjA0KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnR0VUIC91c2Vycy9tZScsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gdXNlciBpbmZvcm1hdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAgICAgICAgIC5nZXQoJy91c2Vycy9tZScpXG4gICAgICAgICAgICAgICAgLnNldCgnWC1Ub2tlbicsIHRva2VuKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXMuc3RhdHVzKS50by5lcXVhbCgyMDApO1xuICAgICAgICAgICAgZXhwZWN0KHJlcy5ib2R5KS50by5oYXZlLnByb3BlcnR5KCdlbWFpbCcsICd0ZXN0QHRlc3QuY29tJyk7XG4gICAgICAgICAgICBleHBlY3QocmVzLmJvZHkpLnRvLmhhdmUucHJvcGVydHkoJ2lkJyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ1BPU1QgL2ZpbGVzJywgKCkgPT4ge1xuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBhIG5ldyBmaWxlIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAgICAgICAgIC5wb3N0KCcvZmlsZXMnKVxuICAgICAgICAgICAgICAgIC5zZXQoJ1gtVG9rZW4nLCB0b2tlbilcbiAgICAgICAgICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd0ZXN0LnR4dCcsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmaWxlJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogQnVmZmVyLmZyb20oJ0hlbGxvIFdvcmxkJykudG9TdHJpbmcoJ2Jhc2U2NCcpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBleHBlY3QocmVzLnN0YXR1cykudG8uZXF1YWwoMjAxKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXMuYm9keSkudG8uaGF2ZS5wcm9wZXJ0eSgnaWQnKTtcbiAgICAgICAgICAgIGZpbGVJZCA9IHJlcy5ib2R5LmlkO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdHRVQgL2ZpbGVzLzppZCcsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCByZXRyaWV2ZSBmaWxlIGluZm9ybWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLmdldChgL2ZpbGVzLyR7ZmlsZUlkfWApXG4gICAgICAgICAgICAgICAgLnNldCgnWC1Ub2tlbicsIHRva2VuKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXMuc3RhdHVzKS50by5lcXVhbCgyMDApO1xuICAgICAgICAgICAgZXhwZWN0KHJlcy5ib2R5KS50by5oYXZlLnByb3BlcnR5KCduYW1lJywgJ3Rlc3QudHh0Jyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ0dFVCAvZmlsZXMnLCAoKSA9PiB7XG4gICAgICAgIGl0KCdzaG91bGQgbGlzdCBmaWxlcyB3aXRoIHBhZ2luYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgICAgICAgICAuZ2V0KCcvZmlsZXMnKVxuICAgICAgICAgICAgICAgIC5zZXQoJ1gtVG9rZW4nLCB0b2tlbilcbiAgICAgICAgICAgICAgICAucXVlcnkoeyBwYWdlOiAwIH0pO1xuICAgICAgICAgICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvLmVxdWFsKDIwMCk7XG4gICAgICAgICAgICBleHBlY3QocmVzLmJvZHkpLnRvLmJlLmFuKCdhcnJheScpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdQVVQgL2ZpbGVzLzppZC9wdWJsaXNoJywgKCkgPT4ge1xuICAgICAgICBpdCgnc2hvdWxkIHB1Ymxpc2ggYSBmaWxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLnB1dChgL2ZpbGVzLyR7ZmlsZUlkfS9wdWJsaXNoYClcbiAgICAgICAgICAgICAgICAuc2V0KCdYLVRva2VuJywgdG9rZW4pO1xuICAgICAgICAgICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvLmVxdWFsKDIwMCk7XG4gICAgICAgICAgICBleHBlY3QocmVzLmJvZHkpLnRvLmhhdmUucHJvcGVydHkoJ2lzUHVibGljJywgdHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ1BVVCAvZmlsZXMvOmlkL3VucHVibGlzaCcsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCB1bnB1Ymxpc2ggYSBmaWxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLnB1dChgL2ZpbGVzLyR7ZmlsZUlkfS91bnB1Ymxpc2hgKVxuICAgICAgICAgICAgICAgIC5zZXQoJ1gtVG9rZW4nLCB0b2tlbik7XG4gICAgICAgICAgICBleHBlY3QocmVzLnN0YXR1cykudG8uZXF1YWwoMjAwKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXMuYm9keSkudG8uaGF2ZS5wcm9wZXJ0eSgnaXNQdWJsaWMnLCBmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ0dFVCAvZmlsZXMvOmlkL2RhdGEnLCAoKSA9PiB7XG4gICAgICAgIGl0KCdzaG91bGQgcmV0cmlldmUgZmlsZSBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgICAgICAgICAgLmdldChgL2ZpbGVzLyR7ZmlsZUlkfS9kYXRhYClcbiAgICAgICAgICAgICAgICAuc2V0KCdYLVRva2VuJywgdG9rZW4pO1xuICAgICAgICAgICAgZXhwZWN0KHJlcy5zdGF0dXMpLnRvLmVxdWFsKDIwMCk7XG4gICAgICAgICAgICBleHBlY3QocmVzLnRleHQpLnRvLmVxdWFsKCdIZWxsbyBXb3JsZCcpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuXG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFDQSxJQUFBQSxLQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxVQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBRyxLQUFBLEdBQUFILE9BQUE7QUFDQSxJQUFBSSxPQUFBLEdBQUFGLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBSyxNQUFBLEdBQUFILHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBTSxHQUFBLEdBQUFKLHNCQUFBLENBQUFGLE9BQUE7QUFBbUMsU0FBQUUsdUJBQUFLLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFObkM7O0FBUUFHLFFBQVEsQ0FBQyxlQUFlLEVBQUUsTUFBTTtFQUM1QixJQUFJQyxLQUFLO0VBQ1QsSUFBSUMsTUFBTTtFQUNWLElBQUlDLE1BQU07RUFFVkMsTUFBTSxDQUFDLFlBQVk7SUFDZixNQUFNQyxjQUFXLENBQUNDLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDLE9BQU8sQ0FBQztJQUMxQyxNQUFNQyxXQUFXLEdBQUcsTUFBTUMsV0FBUSxDQUFDQyxFQUFFLENBQUNDLGVBQWUsQ0FBQyxDQUFDLENBQUNDLE9BQU8sQ0FBQyxDQUFDO0lBQ2pFLEtBQUssTUFBTUMsVUFBVSxJQUFJTCxXQUFXLEVBQUU7TUFDbEMsTUFBTUMsV0FBUSxDQUFDQyxFQUFFLENBQUNHLFVBQVUsQ0FBQ0EsVUFBVSxDQUFDQyxJQUFJ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","map":{"version":3,"names":["_chai","require","_supertest","_interopRequireDefault","_uuid","_server","_redis","_db","e","__esModule","default","describe","token","userId","fileId","before","redisClient","client","flushall","collections","dbClient","db","listCollections","toArray","collection","name","deleteMany","it","res","request","app","get","expect","status","to","equal","body","deep","redis","have","property","post","send","email","password","id","error","credentials","Buffer","from","toString","set","concat","type","data","query","page","be","an","put","text"],"sourceRoot":"/alx-files_manager/tests/","sources":["endpoints.test.js"],"sourcesContent":["// tests/endpoints.test.js\nimport { expect } from 'chai';\nimport request from 'supertest';\nimport { v4 as uuidv4 } from 'uuid';\nimport app from '../server';\nimport redisClient from '../utils/redis';\nimport dbClient from '../utils/db';\n\ndescribe('API Endpoints', () => {\n    let token;\n    let userId;\n    let fileId;\n\n    before(async () => {\n        await redisClient.client.flushall('ASYNC');\n        const collections = await dbClient.db.listCollections().toArray();\n        for (const collection of collections) {\n            await dbClient.db.collection(collection.name).deleteMany({});\n        }\n    });\n\n    describe('GET /status', () => {\n        it('should return status of Redis and DB connections', async () => {\n            const res = await request(app).get('/status');\n            expect(res.status).to.equal(200);\n            expect(res.body).to.deep.equal({\n                redis: true,\n                db: true\n            });\n        });\n    });\n\n    describe('GET /stats', () => {\n        it('should return correct stats', async () => {\n            const res = await request(app).get('/stats');\n            expect(res.status).to.equal(200);\n            expect(res.body).to.have.property('users');\n            expect(res.body).to.have.property('files');\n        });\n    });\n\n    describe('POST /users', () => {\n        it('should create a new user successfully', async () => {\n            const res = await request(app)\n                .post('/users')\n                .send({\n                    email: 'test@test.com',\n                    password: 'testpassword'\n                });\n            expect(res.status).to.equal(201);\n            expect(res.body).to.have.property('id');\n            expect(res.body).to.have.property('email', 'test@test.com');\n            userId = res.body.id;\n        });\n\n        it('should return error if email is missing', async () => {\n            const res = await request(app)\n                .post('/users')\n                .send({ password: 'testpassword' });\n            expect(res.status).to.equal(400);\n            expect(res.body).to.deep.equal({ error: 'Missing email' });\n        });\n    });\n\n    describe('GET /connect', () => {\n        it('should authenticate user and return token', async () => {\n            const credentials = Buffer.from('test@test.com:testpassword').toString('base64');\n            const res = await request(app)\n                .get('/connect')\n                .set('Authorization', `Basic ${credentials}`);\n            expect(res.status).to.equal(200);\n            expect(res.body).to.have.property('token');\n            token = res.body.token;\n        });\n    });\n\n    describe('GET /disconnect', () => {\n        it('should disconnect user successfully', async () => {\n            const res = await request(app)\n                .get('/disconnect')\n                .set('X-Token', token);\n            expect(res.status).to.equal(204);\n        });\n    });\n\n    describe('GET /users/me', () => {\n        it('should return user information', async () => {\n            const res = await request(app)\n                .get('/users/me')\n                .set('X-Token', token);\n            expect(res.status).to.equal(200);\n            expect(res.body).to.have.property('email', 'test@test.com');\n            expect(res.body).to.have.property('id');\n        });\n    });\n\n    describe('POST /files', () => {\n        it('should create a new file successfully', async () => {\n            const res = await request(app)\n                .post('/files')\n                .set('X-Token', token)\n                .send({\n                    name: 'test.txt',\n                    type: 'file',\n                    data: Buffer.from('Hello World').toString('base64')\n                });\n            expect(res.status).to.equal(201);\n            expect(res.body).to.have.property('id');\n            fileId = res.body.id;\n        });\n    });\n\n    describe('GET /files/:id', () => {\n        it('should retrieve file information', async () => {\n            const res = await request(app)\n                .get(`/files/${fileId}`)\n                .set('X-Token', token);\n            expect(res.status).to.equal(200);\n            expect(res.body).to.have.property('name', 'test.txt');\n        });\n    });\n\n    describe('GET /files', () => {\n        it('should list files with pagination', async () => {\n            const res = await request(app)\n                .get('/files')\n                .set('X-Token', token)\n                .query({ page: 0 });\n            expect(res.status).to.equal(200);\n            expect(res.body).to.be.an('array');\n        });\n    });\n\n    describe('PUT /files/:id/publish', () => {\n        it('should publish a file', async () => {\n            const res = await request(app)\n                .put(`/files/${fileId}/publish`)\n                .set('X-Token', token);\n            expect(res.status).to.equal(200);\n            expect(res.body).to.have.property('isPublic', true);\n        });\n    });\n\n    describe('PUT /files/:id/unpublish', () => {\n        it('should unpublish a file', async () => {\n            const res = await request(app)\n                .put(`/files/${fileId}/unpublish`)\n                .set('X-Token', token);\n            expect(res.status).to.equal(200);\n            expect(res.body).to.have.property('isPublic', false);\n        });\n    });\n\n    describe('GET /files/:id/data', () => {\n        it('should retrieve file data', async () => {\n            const res = await request(app)\n                .get(`/files/${fileId}/data`)\n                .set('X-Token', token);\n            expect(res.status).to.equal(200);\n            expect(res.text).to.equal('Hello World');\n        });\n    });\n});\n\n"],"mappings":"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","ignoreList":[]}},"mtime":1736398042588},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$24\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$25\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-import-attributes\",\"visitor\":{},\"options\":{\"deprecatedAssertSyntax\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"109.0.0\",\"edge\":\"130.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"11.0.0\",\"node\":\"10.0.0\",\"opera\":\"114.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"26.0.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":true,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _index = _interopRequireDefault(require(\"./routes/index.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst app = (0, _express.default)();\nconst port = process.env.PORT || 5000;\napp.use(_express.default.json());\napp.use('/', _index.default);\napp.listen(port, () => {\n  console.log(\"Server running on port \".concat(port));\n});\nvar _default = exports.default = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2luZGV4IiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiYXBwIiwiZXhwcmVzcyIsInBvcnQiLCJwcm9jZXNzIiwiZW52IiwiUE9SVCIsInVzZSIsImpzb24iLCJyb3V0ZXMiLCJsaXN0ZW4iLCJjb25zb2xlIiwibG9nIiwiY29uY2F0IiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvYWx4LWZpbGVzX21hbmFnZXIvIiwic291cmNlcyI6WyJzZXJ2ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgcm91dGVzIGZyb20gJy4vcm91dGVzL2luZGV4LmpzJztcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuY29uc3QgcG9ydCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgNTAwMDtcblxuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG5hcHAudXNlKCcvJywgcm91dGVzKTtcblxuYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coYFNlcnZlciBydW5uaW5nIG9uIHBvcnQgJHtwb3J0fWApO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGFwcDtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsUUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsTUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQXVDLFNBQUFELHVCQUFBRyxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBRXZDLE1BQU1HLEdBQUcsR0FBRyxJQUFBQyxnQkFBTyxFQUFDLENBQUM7QUFDckIsTUFBTUMsSUFBSSxHQUFHQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsSUFBSSxJQUFJLElBQUk7QUFFckNMLEdBQUcsQ0FBQ00sR0FBRyxDQUFDTCxnQkFBTyxDQUFDTSxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ3ZCUCxHQUFHLENBQUNNLEdBQUcsQ0FBQyxHQUFHLEVBQUVFLGNBQU0sQ0FBQztBQUVwQlIsR0FBRyxDQUFDUyxNQUFNLENBQUNQLElBQUksRUFBRSxNQUFNO0VBQ25CUSxPQUFPLENBQUNDLEdBQUcsMkJBQUFDLE1BQUEsQ0FBMkJWLElBQUksQ0FBRSxDQUFDO0FBQ2pELENBQUMsQ0FBQztBQUFDLElBQUFXLFFBQUEsR0FBQUMsT0FBQSxDQUFBZixPQUFBLEdBRVlDLEdBQUciLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_express","_interopRequireDefault","require","_index","e","__esModule","default","app","express","port","process","env","PORT","use","json","routes","listen","console","log","concat","_default","exports"],"sourceRoot":"/alx-files_manager/","sources":["server.js"],"sourcesContent":["import express from 'express';\nimport routes from './routes/index.js';\n\nconst app = express();\nconst port = process.env.PORT || 5000;\n\napp.use(express.json());\napp.use('/', routes);\n\napp.listen(port, () => {\n    console.log(`Server running on port ${port}`);\n});\n\nexport default app;\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,MAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAuC,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAEvC,MAAMG,GAAG,GAAG,IAAAC,gBAAO,EAAC,CAAC;AACrB,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,IAAI,IAAI,IAAI;AAErCL,GAAG,CAACM,GAAG,CAACL,gBAAO,CAACM,IAAI,CAAC,CAAC,CAAC;AACvBP,GAAG,CAACM,GAAG,CAAC,GAAG,EAAEE,cAAM,CAAC;AAEpBR,GAAG,CAACS,MAAM,CAACP,IAAI,EAAE,MAAM;EACnBQ,OAAO,CAACC,GAAG,2BAAAC,MAAA,CAA2BV,IAAI,CAAE,CAAC;AACjD,CAAC,CAAC;AAAC,IAAAW,QAAA,GAAAC,OAAA,CAAAf,OAAA,GAEYC,GAAG","ignoreList":[]}},"mtime":1736347303916},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$24\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$25\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-import-attributes\",\"visitor\":{},\"options\":{\"deprecatedAssertSyntax\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"109.0.0\",\"edge\":\"130.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"11.0.0\",\"node\":\"10.0.0\",\"opera\":\"114.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"26.0.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":true,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = require(\"express\");\nvar _AppController = _interopRequireDefault(require(\"../controllers/AppController.js\"));\nvar _UsersController = _interopRequireDefault(require(\"../controllers/UsersController.js\"));\nvar _AuthController = _interopRequireDefault(require(\"../controllers/AuthController.js\"));\nvar _FilesController = _interopRequireDefault(require(\"../controllers/FilesController.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst router = (0, _express.Router)();\n\n// App routes\nrouter.get('/status', _AppController.default.getStatus);\nrouter.get('/stats', _AppController.default.getStats);\n\n// User routes\nrouter.post('/users', _UsersController.default.postNew);\nrouter.get('/users/me', _UsersController.default.getMe);\n\n// Auth routes\nrouter.get('/connect', _AuthController.default.getConnect);\nrouter.get('/disconnect', _AuthController.default.getDisconnect);\n\n// Files routes\nrouter.post('/files', _FilesController.default.postUpload);\nrouter.get('/files', _FilesController.default.getIndex);\nrouter.get('/files/:id', _FilesController.default.getShow);\nrouter.get('/files/:id/data', _FilesController.default.getFile);\nrouter.put('/files/:id/publish', _FilesController.default.putPublish);\nrouter.put('/files/:id/unpublish', _FilesController.default.putUnpublish);\nvar _default = exports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsInJlcXVpcmUiLCJfQXBwQ29udHJvbGxlciIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfVXNlcnNDb250cm9sbGVyIiwiX0F1dGhDb250cm9sbGVyIiwiX0ZpbGVzQ29udHJvbGxlciIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInJvdXRlciIsIlJvdXRlciIsImdldCIsIkFwcENvbnRyb2xsZXIiLCJnZXRTdGF0dXMiLCJnZXRTdGF0cyIsInBvc3QiLCJVc2Vyc0NvbnRyb2xsZXIiLCJwb3N0TmV3IiwiZ2V0TWUiLCJBdXRoQ29udHJvbGxlciIsImdldENvbm5lY3QiLCJnZXREaXNjb25uZWN0IiwiRmlsZXNDb250cm9sbGVyIiwicG9zdFVwbG9hZCIsImdldEluZGV4IiwiZ2V0U2hvdyIsImdldEZpbGUiLCJwdXQiLCJwdXRQdWJsaXNoIiwicHV0VW5wdWJsaXNoIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvYWx4LWZpbGVzX21hbmFnZXIvcm91dGVzLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgQXBwQ29udHJvbGxlciBmcm9tICcuLi9jb250cm9sbGVycy9BcHBDb250cm9sbGVyLmpzJztcbmltcG9ydCBVc2Vyc0NvbnRyb2xsZXIgZnJvbSAnLi4vY29udHJvbGxlcnMvVXNlcnNDb250cm9sbGVyLmpzJztcbmltcG9ydCBBdXRoQ29udHJvbGxlciBmcm9tICcuLi9jb250cm9sbGVycy9BdXRoQ29udHJvbGxlci5qcyc7XG5pbXBvcnQgRmlsZXNDb250cm9sbGVyIGZyb20gJy4uL2NvbnRyb2xsZXJzL0ZpbGVzQ29udHJvbGxlci5qcyc7XG5cbmNvbnN0IHJvdXRlciA9IFJvdXRlcigpO1xuXG4vLyBBcHAgcm91dGVzXG5yb3V0ZXIuZ2V0KCcvc3RhdHVzJywgQXBwQ29udHJvbGxlci5nZXRTdGF0dXMpO1xucm91dGVyLmdldCgnL3N0YXRzJywgQXBwQ29udHJvbGxlci5nZXRTdGF0cyk7XG5cbi8vIFVzZXIgcm91dGVzXG5yb3V0ZXIucG9zdCgnL3VzZXJzJywgVXNlcnNDb250cm9sbGVyLnBvc3ROZXcpO1xucm91dGVyLmdldCgnL3VzZXJzL21lJywgVXNlcnNDb250cm9sbGVyLmdldE1lKTtcblxuLy8gQXV0aCByb3V0ZXNcbnJvdXRlci5nZXQoJy9jb25uZWN0JywgQXV0aENvbnRyb2xsZXIuZ2V0Q29ubmVjdCk7XG5yb3V0ZXIuZ2V0KCcvZGlzY29ubmVjdCcsIEF1dGhDb250cm9sbGVyLmdldERpc2Nvbm5lY3QpO1xuXG4vLyBGaWxlcyByb3V0ZXNcbnJvdXRlci5wb3N0KCcvZmlsZXMnLCBGaWxlc0NvbnRyb2xsZXIucG9zdFVwbG9hZCk7XG5yb3V0ZXIuZ2V0KCcvZmlsZXMnLCBGaWxlc0NvbnRyb2xsZXIuZ2V0SW5kZXgpO1xucm91dGVyLmdldCgnL2ZpbGVzLzppZCcsIEZpbGVzQ29udHJvbGxlci5nZXRTaG93KTtcbnJvdXRlci5nZXQoJy9maWxlcy86aWQvZGF0YScsIEZpbGVzQ29udHJvbGxlci5nZXRGaWxlKTtcbnJvdXRlci5wdXQoJy9maWxlcy86aWQvcHVibGlzaCcsIEZpbGVzQ29udHJvbGxlci5wdXRQdWJsaXNoKTtcbnJvdXRlci5wdXQoJy9maWxlcy86aWQvdW5wdWJsaXNoJywgRmlsZXNDb250cm9sbGVyLnB1dFVucHVibGlzaCk7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsUUFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsY0FBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQUcsZ0JBQUEsR0FBQUQsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFJLGVBQUEsR0FBQUYsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFLLGdCQUFBLEdBQUFILHNCQUFBLENBQUFGLE9BQUE7QUFBZ0UsU0FBQUUsdUJBQUFJLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFFaEUsTUFBTUcsTUFBTSxHQUFHLElBQUFDLGVBQU0sRUFBQyxDQUFDOztBQUV2QjtBQUNBRCxNQUFNLENBQUNFLEdBQUcsQ0FBQyxTQUFTLEVBQUVDLHNCQUFhLENBQUNDLFNBQVMsQ0FBQztBQUM5Q0osTUFBTSxDQUFDRSxHQUFHLENBQUMsUUFBUSxFQUFFQyxzQkFBYSxDQUFDRSxRQUFRLENBQUM7O0FBRTVDO0FBQ0FMLE1BQU0sQ0FBQ00sSUFBSSxDQUFDLFFBQVEsRUFBRUMsd0JBQWUsQ0FBQ0MsT0FBTyxDQUFDO0FBQzlDUixNQUFNLENBQUNFLEdBQUcsQ0FBQyxXQUFXLEVBQUVLLHdCQUFlLENBQUNFLEtBQUssQ0FBQzs7QUFFOUM7QUFDQVQsTUFBTSxDQUFDRSxHQUFHLENBQUMsVUFBVSxFQUFFUSx1QkFBYyxDQUFDQyxVQUFVLENBQUM7QUFDakRYLE1BQU0sQ0FBQ0UsR0FBRyxDQUFDLGFBQWEsRUFBRVEsdUJBQWMsQ0FBQ0UsYUFBYSxDQUFDOztBQUV2RDtBQUNBWixNQUFNLENBQUNNLElBQUksQ0FBQyxRQUFRLEVBQUVPLHdCQUFlLENBQUNDLFVBQVUsQ0FBQztBQUNqRGQsTUFBTSxDQUFDRSxHQUFHLENBQUMsUUFBUSxFQUFFVyx3QkFBZSxDQUFDRSxRQUFRLENBQUM7QUFDOUNmLE1BQU0sQ0FBQ0UsR0FBRyxDQUFDLFlBQVksRUFBRVcsd0JBQWUsQ0FBQ0csT0FBTyxDQUFDO0FBQ2pEaEIsTUFBTSxDQUFDRSxHQUFHLENBQUMsaUJBQWlCLEVBQUVXLHdCQUFlLENBQUNJLE9BQU8sQ0FBQztBQUN0RGpCLE1BQU0sQ0FBQ2tCLEdBQUcsQ0FBQyxvQkFBb0IsRUFBRUwsd0JBQWUsQ0FBQ00sVUFBVSxDQUFDO0FBQzVEbkIsTUFBTSxDQUFDa0IsR0FBRyxDQUFDLHNCQUFzQixFQUFFTCx3QkFBZSxDQUFDTyxZQUFZLENBQUM7QUFBQyxJQUFBQyxRQUFBLEdBQUFDLE9BQUEsQ0FBQXZCLE9BQUEsR0FFbERDLE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_express","require","_AppController","_interopRequireDefault","_UsersController","_AuthController","_FilesController","e","__esModule","default","router","Router","get","AppController","getStatus","getStats","post","UsersController","postNew","getMe","AuthController","getConnect","getDisconnect","FilesController","postUpload","getIndex","getShow","getFile","put","putPublish","putUnpublish","_default","exports"],"sourceRoot":"/alx-files_manager/routes/","sources":["index.js"],"sourcesContent":["import { Router } from 'express';\nimport AppController from '../controllers/AppController.js';\nimport UsersController from '../controllers/UsersController.js';\nimport AuthController from '../controllers/AuthController.js';\nimport FilesController from '../controllers/FilesController.js';\n\nconst router = Router();\n\n// App routes\nrouter.get('/status', AppController.getStatus);\nrouter.get('/stats', AppController.getStats);\n\n// User routes\nrouter.post('/users', UsersController.postNew);\nrouter.get('/users/me', UsersController.getMe);\n\n// Auth routes\nrouter.get('/connect', AuthController.getConnect);\nrouter.get('/disconnect', AuthController.getDisconnect);\n\n// Files routes\nrouter.post('/files', FilesController.postUpload);\nrouter.get('/files', FilesController.getIndex);\nrouter.get('/files/:id', FilesController.getShow);\nrouter.get('/files/:id/data', FilesController.getFile);\nrouter.put('/files/:id/publish', FilesController.putPublish);\nrouter.put('/files/:id/unpublish', FilesController.putUnpublish);\n\nexport default router;\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,cAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,gBAAA,GAAAD,sBAAA,CAAAF,OAAA;AACA,IAAAI,eAAA,GAAAF,sBAAA,CAAAF,OAAA;AACA,IAAAK,gBAAA,GAAAH,sBAAA,CAAAF,OAAA;AAAgE,SAAAE,uBAAAI,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAEhE,MAAMG,MAAM,GAAG,IAAAC,eAAM,EAAC,CAAC;;AAEvB;AACAD,MAAM,CAACE,GAAG,CAAC,SAAS,EAAEC,sBAAa,CAACC,SAAS,CAAC;AAC9CJ,MAAM,CAACE,GAAG,CAAC,QAAQ,EAAEC,sBAAa,CAACE,QAAQ,CAAC;;AAE5C;AACAL,MAAM,CAACM,IAAI,CAAC,QAAQ,EAAEC,wBAAe,CAACC,OAAO,CAAC;AAC9CR,MAAM,CAACE,GAAG,CAAC,WAAW,EAAEK,wBAAe,CAACE,KAAK,CAAC;;AAE9C;AACAT,MAAM,CAACE,GAAG,CAAC,UAAU,EAAEQ,uBAAc,CAACC,UAAU,CAAC;AACjDX,MAAM,CAACE,GAAG,CAAC,aAAa,EAAEQ,uBAAc,CAACE,aAAa,CAAC;;AAEvD;AACAZ,MAAM,CAACM,IAAI,CAAC,QAAQ,EAAEO,wBAAe,CAACC,UAAU,CAAC;AACjDd,MAAM,CAACE,GAAG,CAAC,QAAQ,EAAEW,wBAAe,CAACE,QAAQ,CAAC;AAC9Cf,MAAM,CAACE,GAAG,CAAC,YAAY,EAAEW,wBAAe,CAACG,OAAO,CAAC;AACjDhB,MAAM,CAACE,GAAG,CAAC,iBAAiB,EAAEW,wBAAe,CAACI,OAAO,CAAC;AACtDjB,MAAM,CAACkB,GAAG,CAAC,oBAAoB,EAAEL,wBAAe,CAACM,UAAU,CAAC;AAC5DnB,MAAM,CAACkB,GAAG,CAAC,sBAAsB,EAAEL,wBAAe,CAACO,YAAY,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAvB,OAAA,GAElDC,MAAM","ignoreList":[]}},"mtime":1736347787152},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/controllers/AppController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$24\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$25\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-import-attributes\",\"visitor\":{},\"options\":{\"deprecatedAssertSyntax\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"109.0.0\",\"edge\":\"130.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"11.0.0\",\"node\":\"10.0.0\",\"opera\":\"114.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"26.0.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":true,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.promise.js\");\nvar _redis = _interopRequireDefault(require(\"../utils/redis.js\"));\nvar _db = _interopRequireDefault(require(\"../utils/db.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nclass AppController {\n  static getStatus(req, res) {\n    const status = {\n      redis: _redis.default.isAlive(),\n      db: _db.default.isAlive()\n    };\n    res.status(200).json(status);\n  }\n  static async getStats(req, res) {\n    const stats = {\n      users: await _db.default.nbUsers(),\n      files: await _db.default.nbFiles()\n    };\n    res.status(200).json(stats);\n  }\n}\nvar _default = exports.default = AppController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVkaXMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9kYiIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIkFwcENvbnRyb2xsZXIiLCJnZXRTdGF0dXMiLCJyZXEiLCJyZXMiLCJzdGF0dXMiLCJyZWRpcyIsInJlZGlzQ2xpZW50IiwiaXNBbGl2ZSIsImRiIiwiZGJDbGllbnQiLCJqc29uIiwiZ2V0U3RhdHMiLCJzdGF0cyIsInVzZXJzIiwibmJVc2VycyIsImZpbGVzIiwibmJGaWxlcyIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2FseC1maWxlc19tYW5hZ2VyL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsiQXBwQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcmVkaXNDbGllbnQgZnJvbSAnLi4vdXRpbHMvcmVkaXMuanMnO1xuaW1wb3J0IGRiQ2xpZW50IGZyb20gJy4uL3V0aWxzL2RiLmpzJztcblxuY2xhc3MgQXBwQ29udHJvbGxlciB7XG4gICAgc3RhdGljIGdldFN0YXR1cyhyZXEsIHJlcykge1xuICAgICAgICBjb25zdCBzdGF0dXMgPSB7XG4gICAgICAgICAgICByZWRpczogcmVkaXNDbGllbnQuaXNBbGl2ZSgpLFxuICAgICAgICAgICAgZGI6IGRiQ2xpZW50LmlzQWxpdmUoKSxcbiAgICAgICAgfTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oc3RhdHVzKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgYXN5bmMgZ2V0U3RhdHMocmVxLCByZXMpIHtcbiAgICAgICAgY29uc3Qgc3RhdHMgPSB7XG4gICAgICAgICAgICB1c2VyczogYXdhaXQgZGJDbGllbnQubmJVc2VycygpLFxuICAgICAgICAgICAgZmlsZXM6IGF3YWl0IGRiQ2xpZW50Lm5iRmlsZXMoKSxcbiAgICAgICAgfTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oc3RhdHMpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBwQ29udHJvbGxlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLEdBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUFzQyxTQUFBRCx1QkFBQUcsQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQUV0QyxNQUFNRyxhQUFhLENBQUM7RUFDaEIsT0FBT0MsU0FBU0EsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUU7SUFDdkIsTUFBTUMsTUFBTSxHQUFHO01BQ1hDLEtBQUssRUFBRUMsY0FBVyxDQUFDQyxPQUFPLENBQUMsQ0FBQztNQUM1QkMsRUFBRSxFQUFFQyxXQUFRLENBQUNGLE9BQU8sQ0FBQztJQUN6QixDQUFDO0lBQ0RKLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDTSxJQUFJLENBQUNOLE1BQU0sQ0FBQztFQUNoQztFQUVBLGFBQWFPLFFBQVFBLENBQUNULEdBQUcsRUFBRUMsR0FBRyxFQUFFO0lBQzVCLE1BQU1TLEtBQUssR0FBRztNQUNWQyxLQUFLLEVBQUUsTUFBTUosV0FBUSxDQUFDSyxPQUFPLENBQUMsQ0FBQztNQUMvQkMsS0FBSyxFQUFFLE1BQU1OLFdBQVEsQ0FBQ08sT0FBTyxDQUFDO0lBQ2xDLENBQUM7SUFDRGIsR0FBRyxDQUFDQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNNLElBQUksQ0FBQ0UsS0FBSyxDQUFDO0VBQy9CO0FBQ0o7QUFBQyxJQUFBSyxRQUFBLEdBQUFDLE9BQUEsQ0FBQW5CLE9BQUEsR0FFY0MsYUFBYSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["_redis","_interopRequireDefault","require","_db","e","__esModule","default","AppController","getStatus","req","res","status","redis","redisClient","isAlive","db","dbClient","json","getStats","stats","users","nbUsers","files","nbFiles","_default","exports"],"sourceRoot":"/alx-files_manager/controllers/","sources":["AppController.js"],"sourcesContent":["import redisClient from '../utils/redis.js';\nimport dbClient from '../utils/db.js';\n\nclass AppController {\n    static getStatus(req, res) {\n        const status = {\n            redis: redisClient.isAlive(),\n            db: dbClient.isAlive(),\n        };\n        res.status(200).json(status);\n    }\n\n    static async getStats(req, res) {\n        const stats = {\n            users: await dbClient.nbUsers(),\n            files: await dbClient.nbFiles(),\n        };\n        res.status(200).json(stats);\n    }\n}\n\nexport default AppController;\n"],"mappings":";;;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,GAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAsC,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAEtC,MAAMG,aAAa,CAAC;EAChB,OAAOC,SAASA,CAACC,GAAG,EAAEC,GAAG,EAAE;IACvB,MAAMC,MAAM,GAAG;MACXC,KAAK,EAAEC,cAAW,CAACC,OAAO,CAAC,CAAC;MAC5BC,EAAE,EAAEC,WAAQ,CAACF,OAAO,CAAC;IACzB,CAAC;IACDJ,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACM,IAAI,CAACN,MAAM,CAAC;EAChC;EAEA,aAAaO,QAAQA,CAACT,GAAG,EAAEC,GAAG,EAAE;IAC5B,MAAMS,KAAK,GAAG;MACVC,KAAK,EAAE,MAAMJ,WAAQ,CAACK,OAAO,CAAC,CAAC;MAC/BC,KAAK,EAAE,MAAMN,WAAQ,CAACO,OAAO,CAAC;IAClC,CAAC;IACDb,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACM,IAAI,CAACE,KAAK,CAAC;EAC/B;AACJ;AAAC,IAAAK,QAAA,GAAAC,OAAA,CAAAnB,OAAA,GAEcC,aAAa","ignoreList":[]}},"mtime":1736348747707},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/utils/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/utils/redis.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$24\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$25\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"syntax-import-attributes\",\"visitor\":{},\"options\":{\"deprecatedAssertSyntax\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"109.0.0\",\"edge\":\"130.0.0\",\"firefox\":\"115.0.0\",\"ios\":\"11.0.0\",\"node\":\"10.0.0\",\"opera\":\"114.0.0\",\"opera_mobile\":\"80.0.0\",\"safari\":\"17.6.0\",\"samsung\":\"26.0.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":true,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es.promise.js\");\nvar _redis = _interopRequireDefault(require(\"redis\"));\nvar _util = require(\"util\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nclass RedisClient {\n  constructor() {\n    this.client = _redis.default.createClient({\n      host: process.env.REDIS_HOST || '127.0.0.1',\n      port: process.env.REDIS_PORT || 6379,\n      retry_strategy: options => {\n        if (options.total_retry_time > 1000 * 60 * 60) {\n          return new Error('Retry time exhausted');\n        }\n        return Math.min(options.attempt * 100, 3000);\n      }\n    });\n    this.client.on('error', error => {\n      console.error('Redis client error:', error);\n    });\n  }\n  isAlive() {\n    return this.client.connected;\n  }\n  async get(key) {\n    const asyncGet = (0, _util.promisify)(this.client.get).bind(this.client);\n    return asyncGet(key);\n  }\n  async set(key, value, duration) {\n    const asyncSet = (0, _util.promisify)(this.client.setex).bind(this.client);\n    return asyncSet(key, duration, value);\n  }\n  async del(key) {\n    const asyncDel = (0, _util.promisify)(this.client.del).bind(this.client);\n    return asyncDel(key);\n  }\n}\nconst redisClient = new RedisClient();\nvar _default = exports.default = redisClient;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVkaXMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl91dGlsIiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiUmVkaXNDbGllbnQiLCJjb25zdHJ1Y3RvciIsImNsaWVudCIsInJlZGlzIiwiY3JlYXRlQ2xpZW50IiwiaG9zdCIsInByb2Nlc3MiLCJlbnYiLCJSRURJU19IT1NUIiwicG9ydCIsIlJFRElTX1BPUlQiLCJyZXRyeV9zdHJhdGVneSIsIm9wdGlvbnMiLCJ0b3RhbF9yZXRyeV90aW1lIiwiRXJyb3IiLCJNYXRoIiwibWluIiwiYXR0ZW1wdCIsIm9uIiwiZXJyb3IiLCJjb25zb2xlIiwiaXNBbGl2ZSIsImNvbm5lY3RlZCIsImdldCIsImtleSIsImFzeW5jR2V0IiwicHJvbWlzaWZ5IiwiYmluZCIsInNldCIsInZhbHVlIiwiZHVyYXRpb24iLCJhc3luY1NldCIsInNldGV4IiwiZGVsIiwiYXN5bmNEZWwiLCJyZWRpc0NsaWVudCIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2FseC1maWxlc19tYW5hZ2VyL3V0aWxzLyIsInNvdXJjZXMiOlsicmVkaXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHJlZGlzIGZyb20gJ3JlZGlzJztcbmltcG9ydCB7IHByb21pc2lmeSB9IGZyb20gJ3V0aWwnO1xuXG5jbGFzcyBSZWRpc0NsaWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY2xpZW50ID0gcmVkaXMuY3JlYXRlQ2xpZW50KHtcbiAgICAgIGhvc3Q6IHByb2Nlc3MuZW52LlJFRElTX0hPU1QgfHwgJzEyNy4wLjAuMScsXG4gICAgICBwb3J0OiBwcm9jZXNzLmVudi5SRURJU19QT1JUIHx8IDYzNzksXG4gICAgICByZXRyeV9zdHJhdGVneTogKG9wdGlvbnMpID0+IHtcbiAgICAgICAgaWYgKG9wdGlvbnMudG90YWxfcmV0cnlfdGltZSA+IDEwMDAgKiA2MCAqIDYwKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignUmV0cnkgdGltZSBleGhhdXN0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTWF0aC5taW4ob3B0aW9ucy5hdHRlbXB0ICogMTAwLCAzMDAwKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuY2xpZW50Lm9uKCdlcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcignUmVkaXMgY2xpZW50IGVycm9yOicsIGVycm9yKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlzQWxpdmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50LmNvbm5lY3RlZDtcbiAgfVxuXG4gIGFzeW5jIGdldChrZXkpIHtcbiAgICBjb25zdCBhc3luY0dldCA9IHByb21pc2lmeSh0aGlzLmNsaWVudC5nZXQpLmJpbmQodGhpcy5jbGllbnQpO1xuICAgIHJldHVybiBhc3luY0dldChrZXkpO1xuICB9XG5cbiAgYXN5bmMgc2V0KGtleSwgdmFsdWUsIGR1cmF0aW9uKSB7XG4gICAgY29uc3QgYXN5bmNTZXQgPSBwcm9taXNpZnkodGhpcy5jbGllbnQuc2V0ZXgpLmJpbmQodGhpcy5jbGllbnQpO1xuICAgIHJldHVybiBhc3luY1NldChrZXksIGR1cmF0aW9uLCB2YWx1ZSk7XG4gIH1cblxuICBhc3luYyBkZWwoa2V5KSB7XG4gICAgY29uc3QgYXN5bmNEZWwgPSBwcm9taXNpZnkodGhpcy5jbGllbnQuZGVsKS5iaW5kKHRoaXMuY2xpZW50KTtcbiAgICByZXR1cm4gYXN5bmNEZWwoa2V5KTtcbiAgfVxufVxuXG5jb25zdCByZWRpc0NsaWVudCA9IG5ldyBSZWRpc0NsaWVudCgpO1xuZXhwb3J0IGRlZmF1bHQgcmVkaXNDbGllbnQ7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBQSxNQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxLQUFBLEdBQUFELE9BQUE7QUFBaUMsU0FBQUQsdUJBQUFHLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFFakMsTUFBTUcsV0FBVyxDQUFDO0VBQ2hCQyxXQUFXQSxDQUFBLEVBQUc7SUFDWixJQUFJLENBQUNDLE1BQU0sR0FBR0MsY0FBSyxDQUFDQyxZQUFZLENBQUM7TUFDL0JDLElBQUksRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFVBQVUsSUFBSSxXQUFXO01BQzNDQyxJQUFJLEVBQUVILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRyxVQUFVLElBQUksSUFBSTtNQUNwQ0MsY0FBYyxFQUFHQyxPQUFPLElBQUs7UUFDM0IsSUFBSUEsT0FBTyxDQUFDQyxnQkFBZ0IsR0FBRyxJQUFJLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRTtVQUM3QyxPQUFPLElBQUlDLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQztRQUMxQztRQUNBLE9BQU9DLElBQUksQ0FBQ0MsR0FBRyxDQUFDSixPQUFPLENBQUNLLE9BQU8sR0FBRyxHQUFHLEVBQUUsSUFBSSxDQUFDO01BQzlDO0lBQ0YsQ0FBQyxDQUFDO0lBRUYsSUFBSSxDQUFDZixNQUFNLENBQUNnQixFQUFFLENBQUMsT0FBTyxFQUFHQyxLQUFLLElBQUs7TUFDakNDLE9BQU8sQ0FBQ0QsS0FBSyxDQUFDLHFCQUFxQixFQUFFQSxLQUFLLENBQUM7SUFDN0MsQ0FBQyxDQUFDO0VBQ0o7RUFFQUUsT0FBT0EsQ0FBQSxFQUFHO0lBQ1IsT0FBTyxJQUFJLENBQUNuQixNQUFNLENBQUNvQixTQUFTO0VBQzlCO0VBRUEsTUFBTUMsR0FBR0EsQ0FBQ0MsR0FBRyxFQUFFO0lBQ2IsTUFBTUMsUUFBUSxHQUFHLElBQUFDLGVBQVMsRUFBQyxJQUFJLENBQUN4QixNQUFNLENBQUNxQixHQUFHLENBQUMsQ0FBQ0ksSUFBSSxDQUFDLElBQUksQ0FBQ3pCLE1BQU0sQ0FBQztJQUM3RCxPQUFPdUIsUUFBUSxDQUFDRCxHQUFHLENBQUM7RUFDdEI7RUFFQSxNQUFNSSxHQUFHQSxDQUFDSixHQUFHLEVBQUVLLEtBQUssRUFBRUMsUUFBUSxFQUFFO0lBQzlCLE1BQU1DLFFBQVEsR0FBRyxJQUFBTCxlQUFTLEVBQUMsSUFBSSxDQUFDeEIsTUFBTSxDQUFDOEIsS0FBSyxDQUFDLENBQUNMLElBQUksQ0FBQyxJQUFJLENBQUN6QixNQUFNLENBQUM7SUFDL0QsT0FBTzZCLFFBQVEsQ0FBQ1AsR0FBRyxFQUFFTSxRQUFRLEVBQUVELEtBQUssQ0FBQztFQUN2QztFQUVBLE1BQU1JLEdBQUdBLENBQUNULEdBQUcsRUFBRTtJQUNiLE1BQU1VLFFBQVEsR0FBRyxJQUFBUixlQUFTLEVBQUMsSUFBSSxDQUFDeEIsTUFBTSxDQUFDK0IsR0FBRyxDQUFDLENBQUNOLElBQUksQ0FBQyxJQUFJLENBQUN6QixNQUFNLENBQUM7SUFDN0QsT0FBT2dDLFFBQVEsQ0FBQ1YsR0FBRyxDQUFDO0VBQ3RCO0FBQ0Y7QUFFQSxNQUFNVyxXQUFXLEdBQUcsSUFBSW5DLFdBQVcsQ0FBQyxDQUFDO0FBQUMsSUFBQW9DLFFBQUEsR0FBQUMsT0FBQSxDQUFBdEMsT0FBQSxHQUN2Qm9DLFdBQVciLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_redis","_interopRequireDefault","require","_util","e","__esModule","default","RedisClient","constructor","client","redis","createClient","host","process","env","REDIS_HOST","port","REDIS_PORT","retry_strategy","options","total_retry_time","Error","Math","min","attempt","on","error","console","isAlive","connected","get","key","asyncGet","promisify","bind","set","value","duration","asyncSet","setex","del","asyncDel","redisClient","_default","exports"],"sourceRoot":"/alx-files_manager/utils/","sources":["redis.js"],"sourcesContent":["import redis from 'redis';\nimport { promisify } from 'util';\n\nclass RedisClient {\n  constructor() {\n    this.client = redis.createClient({\n      host: process.env.REDIS_HOST || '127.0.0.1',\n      port: process.env.REDIS_PORT || 6379,\n      retry_strategy: (options) => {\n        if (options.total_retry_time > 1000 * 60 * 60) {\n          return new Error('Retry time exhausted');\n        }\n        return Math.min(options.attempt * 100, 3000);\n      }\n    });\n\n    this.client.on('error', (error) => {\n      console.error('Redis client error:', error);\n    });\n  }\n\n  isAlive() {\n    return this.client.connected;\n  }\n\n  async get(key) {\n    const asyncGet = promisify(this.client.get).bind(this.client);\n    return asyncGet(key);\n  }\n\n  async set(key, value, duration) {\n    const asyncSet = promisify(this.client.setex).bind(this.client);\n    return asyncSet(key, duration, value);\n  }\n\n  async del(key) {\n    const asyncDel = promisify(this.client.del).bind(this.client);\n    return asyncDel(key);\n  }\n}\n\nconst redisClient = new RedisClient();\nexport default redisClient;\n"],"mappings":";;;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AAAiC,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAEjC,MAAMG,WAAW,CAAC;EAChBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,MAAM,GAAGC,cAAK,CAACC,YAAY,CAAC;MAC/BC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,UAAU,IAAI,WAAW;MAC3CC,IAAI,EAAEH,OAAO,CAACC,GAAG,CAACG,UAAU,IAAI,IAAI;MACpCC,cAAc,EAAGC,OAAO,IAAK;QAC3B,IAAIA,OAAO,CAACC,gBAAgB,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE,EAAE;UAC7C,OAAO,IAAIC,KAAK,CAAC,sBAAsB,CAAC;QAC1C;QACA,OAAOC,IAAI,CAACC,GAAG,CAACJ,OAAO,CAACK,OAAO,GAAG,GAAG,EAAE,IAAI,CAAC;MAC9C;IACF,CAAC,CAAC;IAEF,IAAI,CAACf,MAAM,CAACgB,EAAE,CAAC,OAAO,EAAGC,KAAK,IAAK;MACjCC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;IAC7C,CAAC,CAAC;EACJ;EAEAE,OAAOA,CAAA,EAAG;IACR,OAAO,IAAI,CAACnB,MAAM,CAACoB,SAAS;EAC9B;EAEA,MAAMC,GAAGA,CAACC,GAAG,EAAE;IACb,MAAMC,QAAQ,GAAG,IAAAC,eAAS,EAAC,IAAI,CAACxB,MAAM,CAACqB,GAAG,CAAC,CAACI,IAAI,CAAC,IAAI,CAACzB,MAAM,CAAC;IAC7D,OAAOuB,QAAQ,CAACD,GAAG,CAAC;EACtB;EAEA,MAAMI,GAAGA,CAACJ,GAAG,EAAEK,KAAK,EAAEC,QAAQ,EAAE;IAC9B,MAAMC,QAAQ,GAAG,IAAAL,eAAS,EAAC,IAAI,CAACxB,MAAM,CAAC8B,KAAK,CAAC,CAACL,IAAI,CAAC,IAAI,CAACzB,MAAM,CAAC;IAC/D,OAAO6B,QAAQ,CAACP,GAAG,EAAEM,QAAQ,EAAED,KAAK,CAAC;EACvC;EAEA,MAAMI,GAAGA,CAACT,GAAG,EAAE;IACb,MAAMU,QAAQ,GAAG,IAAAR,eAAS,EAAC,IAAI,CAACxB,MAAM,CAAC+B,GAAG,CAAC,CAACN,IAAI,CAAC,IAAI,CAACzB,MAAM,CAAC;IAC7D,OAAOgC,QAAQ,CAACV,GAAG,CAAC;EACtB;AACF;AAEA,MAAMW,WAAW,GAAG,IAAInC,WAAW,CAAC,CAAC;AAAC,IAAAoC,QAAA,GAAAC,OAAA,CAAAtC,OAAA,GACvBoC,WAAW","ignoreList":[]}},"mtime":1736390791012}}